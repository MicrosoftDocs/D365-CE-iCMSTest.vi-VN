---
title: Data Export Service (Developer Guide for Dynamics 365 for Customer Engagement apps) | MicrosoftDocs
description: Capabilities, prerequisites, API, and programming of the Data Export Service.
ms.custom: ''
ms.date: 10/31/2017
ms.reviewer: ''
ms.service: crm-online
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: get-started-article
applies_to:
- Dynamics 365 for Customer Engagement (online)
ms.assetid: a80ea2c1-c8f6-4edf-8841-18707e83059b
author: JimDaly
ms.author: jdaly
search.audienceType:
- developer
search.app:
- D365CE
ms.openlocfilehash: e2d35efac23d93d2b83e97ce693b2d6a87ac3e30
ms.sourcegitcommit: 9f0efd59de16a6d9902fa372cb25fc0baf1c2838
ms.translationtype: HT
ms.contentlocale: vi-VN
ms.lasthandoff: 01/08/2019
ms.locfileid: "387054"
---
# <a name="data-export-service"></a><span data-ttu-id="5aeb7-103">Data Export Service</span><span class="sxs-lookup"><span data-stu-id="5aeb7-103">Data Export Service</span></span>

[!INCLUDE[](../includes/cc_applies_to_update_9_0_0.md)]

<span data-ttu-id="5aeb7-104">Data Export is an add-on service made available as a [!INCLUDE[pn_CRM_Online](../includes/pn-crm-online.md)] solution that adds the ability to replicate [!INCLUDE[pn_crm_online_subsequent](../includes/pn-crm-online-subsequent.md)] data to a Microsoft Azure SQL Database store in a customer-owned Microsoft Azure subscription.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-104">Data Export is an add-on service made available as a [!INCLUDE[pn_CRM_Online](../includes/pn-crm-online.md)] solution that adds the ability to replicate [!INCLUDE[pn_crm_online_subsequent](../includes/pn-crm-online-subsequent.md)] data to a Microsoft Azure SQL Database store in a customer-owned Microsoft Azure subscription.</span></span> <span data-ttu-id="5aeb7-105">The supported target destinations are Microsoft Azure SQL Database and Microsoft Azure SQL Server on Microsoft Azure virtual machines.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-105">The supported target destinations are Microsoft Azure SQL Database and Microsoft Azure SQL Server on Microsoft Azure virtual machines.</span></span> <span data-ttu-id="5aeb7-106">Data Export intelligently synchronizes the entire Dynamics 365 for Customer Engagement apps schema and data initially and thereafter synchronizes on a continuous basis as changes occur (delta changes) in the Dynamics 365 for Customer Engagement apps system.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-106">Data Export intelligently synchronizes the entire Dynamics 365 for Customer Engagement apps schema and data initially and thereafter synchronizes on a continuous basis as changes occur (delta changes) in the Dynamics 365 for Customer Engagement apps system.</span></span>  
  
 <span data-ttu-id="5aeb7-107">The Data Export service provides an interface for managing configuration and ongoing administration of this service from within [!INCLUDE[pn_crm_online_subsequent](../includes/pn-crm-online-subsequent.md)].</span><span class="sxs-lookup"><span data-stu-id="5aeb7-107">The Data Export service provides an interface for managing configuration and ongoing administration of this service from within [!INCLUDE[pn_crm_online_subsequent](../includes/pn-crm-online-subsequent.md)].</span></span>  <span data-ttu-id="5aeb7-108">For more information, see [Data Export](https://technet.microsoft.com/library/a70feedc-12b9-4a2d-baf0-f489cdcc177d).</span><span class="sxs-lookup"><span data-stu-id="5aeb7-108">For more information, see [Data Export](https://technet.microsoft.com/library/a70feedc-12b9-4a2d-baf0-f489cdcc177d).</span></span> <span data-ttu-id="5aeb7-109">This topic explains the corresponding programmatic interface and issues for this service.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-109">This topic explains the corresponding programmatic interface and issues for this service.</span></span>  
  
## <a name="prerequisites-for-using-the-data-export-service"></a><span data-ttu-id="5aeb7-110">Prerequisites for using the Data Export Service</span><span class="sxs-lookup"><span data-stu-id="5aeb7-110">Prerequisites for using the Data Export Service</span></span>  
 <span data-ttu-id="5aeb7-111">Because this service requires access to an external Microsoft Azure SQL Database from [!INCLUDE[pn_crm_online_subsequent](../includes/pn-crm-online-subsequent.md)] apps,   a number of prerequisites must be satisfied before you can successfully access this service.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-111">Because this service requires access to an external Microsoft Azure SQL Database from [!INCLUDE[pn_crm_online_subsequent](../includes/pn-crm-online-subsequent.md)] apps,   a number of prerequisites must be satisfied before you can successfully access this service.</span></span> <span data-ttu-id="5aeb7-112">The following perquisites are more fully explained from an administrator's perspective in the section [Prerequisites for using Data Export Service](https://technet.microsoft.com/library/mt744592.aspx).</span><span class="sxs-lookup"><span data-stu-id="5aeb7-112">The following perquisites are more fully explained from an administrator's perspective in the section [Prerequisites for using Data Export Service](https://technet.microsoft.com/library/mt744592.aspx).</span></span>  
  
 <span data-ttu-id="5aeb7-113">Your [!INCLUDE[pn_crm_online_subsequent](../includes/pn-crm-online-subsequent.md)] apps service must be configured so that:</span><span class="sxs-lookup"><span data-stu-id="5aeb7-113">Your [!INCLUDE[pn_crm_online_subsequent](../includes/pn-crm-online-subsequent.md)] apps service must be configured so that:</span></span>  
  
- <span data-ttu-id="5aeb7-114">You must have [!INCLUDE[pn_crm_8_2_0_online](../includes/pn-crm-8-2-0-online.md)] or a later instance with the original or full data copy.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-114">You must have [!INCLUDE[pn_crm_8_2_0_online](../includes/pn-crm-8-2-0-online.md)] or a later instance with the original or full data copy.</span></span> <span data-ttu-id="5aeb7-115">For more information, see [Copy an instance](https://technet.microsoft.com/en-us/library/dn659832.aspx).</span><span class="sxs-lookup"><span data-stu-id="5aeb7-115">For more information, see [Copy an instance](https://technet.microsoft.com/en-us/library/dn659832.aspx).</span></span>  
  
- <span data-ttu-id="5aeb7-116">The entities that will be exported are enabled with change tracking.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-116">The entities that will be exported are enabled with change tracking.</span></span> <span data-ttu-id="5aeb7-117">For more information, see [Use change tracking to synchronize data with external systems](use-change-tracking-synchronize-data-external-systems.md).</span><span class="sxs-lookup"><span data-stu-id="5aeb7-117">For more information, see [Use change tracking to synchronize data with external systems](use-change-tracking-synchronize-data-external-systems.md).</span></span>  
  
- <span data-ttu-id="5aeb7-118">Code is run in the context of a user with the System Administrator security role.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-118">Code is run in the context of a user with the System Administrator security role.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="5aeb7-119">Note that programmatic access to this service does *not* require the installation of the associated Data Export managed solution.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-119">Note that programmatic access to this service does *not* require the installation of the associated Data Export managed solution.</span></span>  
  
 <span data-ttu-id="5aeb7-120">The target Azure SQL Database must be configured so that:</span><span class="sxs-lookup"><span data-stu-id="5aeb7-120">The target Azure SQL Database must be configured so that:</span></span>  
  
- <span data-ttu-id="5aeb7-121">The subscription must support the volume of data being replicated from your [!INCLUDE[pn_crm_2016_shortest](../includes/pn-crm-2016-shortest.md)] instance.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-121">The subscription must support the volume of data being replicated from your [!INCLUDE[pn_crm_2016_shortest](../includes/pn-crm-2016-shortest.md)] instance.</span></span>  
  
- <span data-ttu-id="5aeb7-122">Firewall settings must allow access from the IP address of your  Data Export service.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-122">Firewall settings must allow access from the IP address of your  Data Export service.</span></span> <span data-ttu-id="5aeb7-123">For more information, see [Configure an Azure SQL Database server-level firewall rule using the Azure Portal](https://azure.microsoft.com/en-us/documentation/articles/sql-database-configure-firewall-settings/).</span><span class="sxs-lookup"><span data-stu-id="5aeb7-123">For more information, see [Configure an Azure SQL Database server-level firewall rule using the Azure Portal](https://azure.microsoft.com/en-us/documentation/articles/sql-database-configure-firewall-settings/).</span></span>  
  
- <span data-ttu-id="5aeb7-124">It is recommended that option “Allow access to azure services” be enabled.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-124">It is recommended that option “Allow access to azure services” be enabled.</span></span>  
  
- <span data-ttu-id="5aeb7-125">The database user, specified in the  data export connection string, must have the proper create and alter permissions on the target database.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-125">The database user, specified in the  data export connection string, must have the proper create and alter permissions on the target database.</span></span>  <span data-ttu-id="5aeb7-126">At minimum these include: `CRTB`, `CRTY`, `CRVW`,     `CRPR`, and `ALUS`.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-126">At minimum these include: `CRTB`, `CRTY`, `CRVW`,     `CRPR`, and `ALUS`.</span></span> <span data-ttu-id="5aeb7-127">For more information, see [Permissions (Database Engine)](https://msdn.microsoft.com/en-us/library/ms191291.aspx).</span><span class="sxs-lookup"><span data-stu-id="5aeb7-127">For more information, see [Permissions (Database Engine)](https://msdn.microsoft.com/en-us/library/ms191291.aspx).</span></span>  
  
- <span data-ttu-id="5aeb7-128">At least one user have extensive permissions on the schema.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-128">At least one user have extensive permissions on the schema.</span></span> <span data-ttu-id="5aeb7-129">The following script creates such a new user.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-129">The following script creates such a new user.</span></span>  
  
```sql  
  
USE MASTER;  
CREATE LOGIN NewUser WITH PASSWORD='newpassword';  
  
USE DESTINATIONDATABASE;  
CREATE USER NewUser FOR LOGIN NewUser  
GRANT CREATE TABLE, CREATE TYPE, CREATE VIEW, CREATE PROCEDURE, ALTER ANY USER to NewUser  
GRANT ALTER, REFERENCES, INSERT, DELETE, UPDATE, SELECT, EXECUTE ON SCHEMA::dbo TO NewUser  
  
```  
  
 <span data-ttu-id="5aeb7-130">For online solutions and services, Azure provides a [Key Vault](https://azure.microsoft.com/en-us/services/key-vault/) service to safeguard cryptographic keys, passwords, and other secrets.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-130">For online solutions and services, Azure provides a [Key Vault](https://azure.microsoft.com/en-us/services/key-vault/) service to safeguard cryptographic keys, passwords, and other secrets.</span></span>  <span data-ttu-id="5aeb7-131">To use Azure Key Vault, this customer-owned service must be configured so that permission is granted to "Dynamics 365 for Customer Engagement apps Data Export Service", which is used to safely store the SQL Azure connection string.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-131">To use Azure Key Vault, this customer-owned service must be configured so that permission is granted to "Dynamics 365 for Customer Engagement apps Data Export Service", which is used to safely store the SQL Azure connection string.</span></span> <span data-ttu-id="5aeb7-132">To perform this configuration with a PowerShell script, see [How to set up Azure Key Vault](https://technet.microsoft.com/library/mt744592.aspx).</span><span class="sxs-lookup"><span data-stu-id="5aeb7-132">To perform this configuration with a PowerShell script, see [How to set up Azure Key Vault](https://technet.microsoft.com/library/mt744592.aspx).</span></span> <span data-ttu-id="5aeb7-133">Alternately, this service can be managed through its REST API; see [Key Vault management](https://msdn.microsoft.com/library/azure/mt620024.aspx).</span><span class="sxs-lookup"><span data-stu-id="5aeb7-133">Alternately, this service can be managed through its REST API; see [Key Vault management](https://msdn.microsoft.com/library/azure/mt620024.aspx).</span></span>  
  
 <span data-ttu-id="5aeb7-134">It is also advised that you add the domain https://discovery.crmreplication.azure.net/ to the trusted sites list in your browser and to enable pop-ups for this site.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-134">It is also advised that you add the domain https://discovery.crmreplication.azure.net/ to the trusted sites list in your browser and to enable pop-ups for this site.</span></span>  
  
## <a name="programming-for-the-data-export-service"></a><span data-ttu-id="5aeb7-135">Programming for the Data Export Service</span><span class="sxs-lookup"><span data-stu-id="5aeb7-135">Programming for the Data Export Service</span></span>  
 <span data-ttu-id="5aeb7-136">The Data Export Service exposes a REST-based API that is divided into two groups: a set of `Metadata` operations for exploring [!INCLUDE[pn_crm_2016_shortest](../includes/pn-crm-2016-shortest.md)] apps organizational structure, relationships, and connection information; and a set of `Profiles` operations    for configuring and managing each data replication.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-136">The Data Export Service exposes a REST-based API that is divided into two groups: a set of `Metadata` operations for exploring [!INCLUDE[pn_crm_2016_shortest](../includes/pn-crm-2016-shortest.md)] apps organizational structure, relationships, and connection information; and a set of `Profiles` operations    for configuring and managing each data replication.</span></span>  <span data-ttu-id="5aeb7-137">This API is fully defined and documented at the following [Swagger](http://swagger.io/) URLs:</span><span class="sxs-lookup"><span data-stu-id="5aeb7-137">This API is fully defined and documented at the following [Swagger](http://swagger.io/) URLs:</span></span>  
  
|<span data-ttu-id="5aeb7-138">Swagger endpoint</span><span class="sxs-lookup"><span data-stu-id="5aeb7-138">Swagger endpoint</span></span>|<span data-ttu-id="5aeb7-139">Mô tả</span><span class="sxs-lookup"><span data-stu-id="5aeb7-139">Description</span></span>|  
|----------------------|-----------------|  
|[https://discovery.crmreplication.azure.net/swagger/docs/2016-01-01](https://discovery.crmreplication.azure.net/swagger/docs/2016-01-01)|<span data-ttu-id="5aeb7-140">JSON definition of the Data Export Service API for use by developer tools and dynamic processes</span><span class="sxs-lookup"><span data-stu-id="5aeb7-140">JSON definition of the Data Export Service API for use by developer tools and dynamic processes</span></span>|  
|[https://discovery.crmreplication.azure.net/swagger/ui/index#](https://discovery.crmreplication.azure.net/swagger/ui/index)|<span data-ttu-id="5aeb7-141">The user-friendly version of this API for developer reference</span><span class="sxs-lookup"><span data-stu-id="5aeb7-141">The user-friendly version of this API for developer reference</span></span>|  
  
<a name="bk_ApiQuickReference"></a>   
### <a name="api-quick-reference"></a><span data-ttu-id="5aeb7-142">API Quick Reference</span><span class="sxs-lookup"><span data-stu-id="5aeb7-142">API Quick Reference</span></span>  
 <span data-ttu-id="5aeb7-143">For the reader's convenience, these interfaces are summarized in the following tables.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-143">For the reader's convenience, these interfaces are summarized in the following tables.</span></span>  
  
 <span data-ttu-id="5aeb7-144">**Metadata operations** (`https://discovery.crmreplication.azure.net/crm/exporter/metadata/`)</span><span class="sxs-lookup"><span data-stu-id="5aeb7-144">**Metadata operations** (`https://discovery.crmreplication.azure.net/crm/exporter/metadata/`)</span></span>  
  
|<span data-ttu-id="5aeb7-145">Nguồn lực</span><span class="sxs-lookup"><span data-stu-id="5aeb7-145">Resource</span></span>|<span data-ttu-id="5aeb7-146">Phương pháp</span><span class="sxs-lookup"><span data-stu-id="5aeb7-146">Methods</span></span>|<span data-ttu-id="5aeb7-147">Mô tả</span><span class="sxs-lookup"><span data-stu-id="5aeb7-147">Description</span></span>|  
|--------------|-------------|-----------------|  
|<span data-ttu-id="5aeb7-148">organizations</span><span class="sxs-lookup"><span data-stu-id="5aeb7-148">organizations</span></span>|[<span data-ttu-id="5aeb7-149">GET</span><span class="sxs-lookup"><span data-stu-id="5aeb7-149">GET</span></span>](https://discovery.crmreplication.azure.net/swagger/ui/index#/Metadata/Metadata_GetOrganizations)|<span data-ttu-id="5aeb7-150">Get organizational details for all organizations that the current user belongs to</span><span class="sxs-lookup"><span data-stu-id="5aeb7-150">Get organizational details for all organizations that the current user belongs to</span></span>|  
|<span data-ttu-id="5aeb7-151">discover</span><span class="sxs-lookup"><span data-stu-id="5aeb7-151">discover</span></span>|[<span data-ttu-id="5aeb7-152">GET</span><span class="sxs-lookup"><span data-stu-id="5aeb7-152">GET</span></span>](https://discovery.crmreplication.azure.net/swagger/ui/index#/Metadata/Metadata_GetOrgDetails)|<span data-ttu-id="5aeb7-153">Get organizational details for the specified organization</span><span class="sxs-lookup"><span data-stu-id="5aeb7-153">Get organizational details for the specified organization</span></span>|  
|<span data-ttu-id="5aeb7-154">connector</span><span class="sxs-lookup"><span data-stu-id="5aeb7-154">connector</span></span>|[<span data-ttu-id="5aeb7-155">GET</span><span class="sxs-lookup"><span data-stu-id="5aeb7-155">GET</span></span>](https://discovery.crmreplication.azure.net/swagger/ui/index#/Metadata/Metadata_GetConnectorDetails)|<span data-ttu-id="5aeb7-156">Get connector details for the specified organization</span><span class="sxs-lookup"><span data-stu-id="5aeb7-156">Get connector details for the specified organization</span></span>|  
|<span data-ttu-id="5aeb7-157">thực thể</span><span class="sxs-lookup"><span data-stu-id="5aeb7-157">entities</span></span>|[<span data-ttu-id="5aeb7-158">GET</span><span class="sxs-lookup"><span data-stu-id="5aeb7-158">GET</span></span>](https://discovery.crmreplication.azure.net/swagger/ui/index#/Metadata/Metadata_GetEntities)|<span data-ttu-id="5aeb7-159">Get all exportable public entities for the specified organization</span><span class="sxs-lookup"><span data-stu-id="5aeb7-159">Get all exportable public entities for the specified organization</span></span>|  
|<span data-ttu-id="5aeb7-160">relationships</span><span class="sxs-lookup"><span data-stu-id="5aeb7-160">relationships</span></span>|[<span data-ttu-id="5aeb7-161">GET</span><span class="sxs-lookup"><span data-stu-id="5aeb7-161">GET</span></span>](https://discovery.crmreplication.azure.net/swagger/ui/index#/Metadata/Metadata_GetRelationships)|<span data-ttu-id="5aeb7-162">Get all exportable relationships for the specified organization</span><span class="sxs-lookup"><span data-stu-id="5aeb7-162">Get all exportable relationships for the specified organization</span></span>|  
|<span data-ttu-id="5aeb7-163">hasorgacceptedprivacyterms</span><span class="sxs-lookup"><span data-stu-id="5aeb7-163">hasorgacceptedprivacyterms</span></span>|[<span data-ttu-id="5aeb7-164">GET</span><span class="sxs-lookup"><span data-stu-id="5aeb7-164">GET</span></span>](https://discovery.crmreplication.azure.net/swagger/ui/index#/Metadata/Metadata_HasOrgAcceptedPrivacyTerms)|<span data-ttu-id="5aeb7-165">Check if the associated organization has accepted the privacy terms</span><span class="sxs-lookup"><span data-stu-id="5aeb7-165">Check if the associated organization has accepted the privacy terms</span></span>|  
|<span data-ttu-id="5aeb7-166">acceptprivacyterms</span><span class="sxs-lookup"><span data-stu-id="5aeb7-166">acceptprivacyterms</span></span>|[<span data-ttu-id="5aeb7-167">POST</span><span class="sxs-lookup"><span data-stu-id="5aeb7-167">POST</span></span>](https://discovery.crmreplication.azure.net/swagger/ui/index#/Metadata/Metadata_AcceptOrgPrivacyTerms)|<span data-ttu-id="5aeb7-168">Accept the specified org for data access</span><span class="sxs-lookup"><span data-stu-id="5aeb7-168">Accept the specified org for data access</span></span>|  
  
 <span data-ttu-id="5aeb7-169">**Profiles operations** (`[Organization-URI]/crm/exporter/`)</span><span class="sxs-lookup"><span data-stu-id="5aeb7-169">**Profiles operations** (`[Organization-URI]/crm/exporter/`)</span></span>  
  
|<span data-ttu-id="5aeb7-170">Nguồn lực</span><span class="sxs-lookup"><span data-stu-id="5aeb7-170">Resource</span></span>|<span data-ttu-id="5aeb7-171">Phương pháp</span><span class="sxs-lookup"><span data-stu-id="5aeb7-171">Methods</span></span>|<span data-ttu-id="5aeb7-172">Mô tả</span><span class="sxs-lookup"><span data-stu-id="5aeb7-172">Description</span></span>|  
|--------------|-------------|-----------------|  
|<span data-ttu-id="5aeb7-173">profiles</span><span class="sxs-lookup"><span data-stu-id="5aeb7-173">profiles</span></span>|<span data-ttu-id="5aeb7-174">[GET](https://discovery.crmreplication.azure.net/swagger/ui/index#/Profiles/Profiles_GetProfilesByOrganizationId), [POST](https://discovery.crmreplication.azure.net/swagger/ui/index#/Profiles/Profiles_CreateProfile)</span><span class="sxs-lookup"><span data-stu-id="5aeb7-174">[GET](https://discovery.crmreplication.azure.net/swagger/ui/index#/Profiles/Profiles_GetProfilesByOrganizationId), [POST](https://discovery.crmreplication.azure.net/swagger/ui/index#/Profiles/Profiles_CreateProfile)</span></span>|<span data-ttu-id="5aeb7-175">Get all profiles for specified organization, create a new export profile</span><span class="sxs-lookup"><span data-stu-id="5aeb7-175">Get all profiles for specified organization, create a new export profile</span></span>|  
|<span data-ttu-id="5aeb7-176">profiles/{id}</span><span class="sxs-lookup"><span data-stu-id="5aeb7-176">profiles/{id}</span></span>|<span data-ttu-id="5aeb7-177">[GET](https://discovery.crmreplication.azure.net/swagger/ui/index#/Profiles/Profiles_GetProfileById), [PUT](https://discovery.crmreplication.azure.net/swagger/ui/index#/Profiles/Profiles_UpdateProfile), [DELETE](https://discovery.crmreplication.azure.net/swagger/ui/index#/Profiles/Profiles_DeleteProfileById)</span><span class="sxs-lookup"><span data-stu-id="5aeb7-177">[GET](https://discovery.crmreplication.azure.net/swagger/ui/index#/Profiles/Profiles_GetProfileById), [PUT](https://discovery.crmreplication.azure.net/swagger/ui/index#/Profiles/Profiles_UpdateProfile), [DELETE](https://discovery.crmreplication.azure.net/swagger/ui/index#/Profiles/Profiles_DeleteProfileById)</span></span>|<span data-ttu-id="5aeb7-178">Get, update or delete a specific profile</span><span class="sxs-lookup"><span data-stu-id="5aeb7-178">Get, update or delete a specific profile</span></span>|  
|<span data-ttu-id="5aeb7-179">profiles/{id}/activate</span><span class="sxs-lookup"><span data-stu-id="5aeb7-179">profiles/{id}/activate</span></span>|[<span data-ttu-id="5aeb7-180">POST</span><span class="sxs-lookup"><span data-stu-id="5aeb7-180">POST</span></span>](https://discovery.crmreplication.azure.net/swagger/ui/index#/Profiles/Profiles_Activate)|<span data-ttu-id="5aeb7-181">Activate a profile, which starts replication of both the associated metadata and data</span><span class="sxs-lookup"><span data-stu-id="5aeb7-181">Activate a profile, which starts replication of both the associated metadata and data</span></span>|  
|<span data-ttu-id="5aeb7-182">profiles/{id}/activatemetadata</span><span class="sxs-lookup"><span data-stu-id="5aeb7-182">profiles/{id}/activatemetadata</span></span>|[<span data-ttu-id="5aeb7-183">POST</span><span class="sxs-lookup"><span data-stu-id="5aeb7-183">POST</span></span>](https://discovery.crmreplication.azure.net/swagger/ui/index#/Profiles/Profiles_ActivateMetadata)|<span data-ttu-id="5aeb7-184">Activate profile for metadata replication only</span><span class="sxs-lookup"><span data-stu-id="5aeb7-184">Activate profile for metadata replication only</span></span>|  
|<span data-ttu-id="5aeb7-185">profiles/{id}/activatedata</span><span class="sxs-lookup"><span data-stu-id="5aeb7-185">profiles/{id}/activatedata</span></span>|[<span data-ttu-id="5aeb7-186">POST</span><span class="sxs-lookup"><span data-stu-id="5aeb7-186">POST</span></span>](https://discovery.crmreplication.azure.net/swagger/ui/index#/Profiles/Profiles_ActivateData)|<span data-ttu-id="5aeb7-187">Activate profile for data replication only</span><span class="sxs-lookup"><span data-stu-id="5aeb7-187">Activate profile for data replication only</span></span>|  
|<span data-ttu-id="5aeb7-188">profiles/{id}/deactivate</span><span class="sxs-lookup"><span data-stu-id="5aeb7-188">profiles/{id}/deactivate</span></span>|[<span data-ttu-id="5aeb7-189">POST</span><span class="sxs-lookup"><span data-stu-id="5aeb7-189">POST</span></span>](https://discovery.crmreplication.azure.net/swagger/ui/index#/Profiles/Profiles_Deactivate)|<span data-ttu-id="5aeb7-190">Deactivate a profile</span><span class="sxs-lookup"><span data-stu-id="5aeb7-190">Deactivate a profile</span></span>|  
|<span data-ttu-id="5aeb7-191">profiles/{id}/test</span><span class="sxs-lookup"><span data-stu-id="5aeb7-191">profiles/{id}/test</span></span>|[<span data-ttu-id="5aeb7-192">GET</span><span class="sxs-lookup"><span data-stu-id="5aeb7-192">GET</span></span>](https://discovery.crmreplication.azure.net/swagger/ui/index#/Profiles/Profiles_GetTestResultById)|<span data-ttu-id="5aeb7-193">Perform test operations on an existing profile</span><span class="sxs-lookup"><span data-stu-id="5aeb7-193">Perform test operations on an existing profile</span></span>|  
|<span data-ttu-id="5aeb7-194">profiles/validate</span><span class="sxs-lookup"><span data-stu-id="5aeb7-194">profiles/validate</span></span>|[<span data-ttu-id="5aeb7-195">POST</span><span class="sxs-lookup"><span data-stu-id="5aeb7-195">POST</span></span>](https://discovery.crmreplication.azure.net/swagger/ui/index#/Profiles/Profiles_ValidateBeforeProfileCreation)|<span data-ttu-id="5aeb7-196">Perform test operations on a profile description before creating it</span><span class="sxs-lookup"><span data-stu-id="5aeb7-196">Perform test operations on a profile description before creating it</span></span>|  
|<span data-ttu-id="5aeb7-197">profiles/{id}/failures</span><span class="sxs-lookup"><span data-stu-id="5aeb7-197">profiles/{id}/failures</span></span>|[<span data-ttu-id="5aeb7-198">GET</span><span class="sxs-lookup"><span data-stu-id="5aeb7-198">GET</span></span>](https://discovery.crmreplication.azure.net/swagger/ui/index#/Profiles/Profiles_GetProfileFailuresInfoById)|<span data-ttu-id="5aeb7-199">Get the connection string to a blob that contains failure details for a given profile</span><span class="sxs-lookup"><span data-stu-id="5aeb7-199">Get the connection string to a blob that contains failure details for a given profile</span></span>|  
  
### <a name="gain-access"></a><span data-ttu-id="5aeb7-200">Gain Access</span><span class="sxs-lookup"><span data-stu-id="5aeb7-200">Gain Access</span></span>  
 <span data-ttu-id="5aeb7-201">Because only [!INCLUDE[pn_crm_2016_shortest](../includes/pn-crm-2016-shortest.md)] System Administrators are authorized to perform data export operations, these APIs enforce caller authorization through the use of Azure Active Directory ([AAD](https://azure.microsoft.com/en-us/services/active-directory/)) [security tokens](https://azure.microsoft.com/en-us/documentation/articles/active-directory-token-and-claims/).</span><span class="sxs-lookup"><span data-stu-id="5aeb7-201">Because only [!INCLUDE[pn_crm_2016_shortest](../includes/pn-crm-2016-shortest.md)] System Administrators are authorized to perform data export operations, these APIs enforce caller authorization through the use of Azure Active Directory ([AAD](https://azure.microsoft.com/en-us/services/active-directory/)) [security tokens](https://azure.microsoft.com/en-us/documentation/articles/active-directory-token-and-claims/).</span></span> <span data-ttu-id="5aeb7-202">The following code snippet demonstrates generating such a token for a web application by using the administrator's name and password.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-202">The following code snippet demonstrates generating such a token for a web application by using the administrator's name and password.</span></span>   <span data-ttu-id="5aeb7-203">You must replace the `AppId`, `crmAdminUser` and `crmAdminPassword` with values appropriate to your service.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-203">You must replace the `AppId`, `crmAdminUser` and `crmAdminPassword` with values appropriate to your service.</span></span> <span data-ttu-id="5aeb7-204">This approach can be used for development and testing, but more secure means should be used for production, such as the use of Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-204">This approach can be used for development and testing, but more secure means should be used for production, such as the use of Azure Key Vault.</span></span>  
  
```csharp  
  
//Reference Azure AD authentication Library (ADAL)    
using Microsoft.IdentityModel.Clients.ActiveDirectory;  
   . . .  
    string yourAppClientID = "[app-associated-GUID]";   //Your AAD-registered AppId   
    string crmAdminUser = "admin1@contoso.com";  //Your CRM administrator user name  
    string crmAdminPassword = "Admin1Password";  //Your CRM administrator password;   
    //For interactive applications, there are overloads of AcquireTokenAsync() which prompt for password.   
    var authParam = AuthenticationParameters.CreateFromResourceUrlAsync(new   
        Uri("https://discovery.crmreplication.azure.net/crm/exporter/aad/challenge")).Result;  
    AuthenticationContext authContext = new AuthenticationContext(authParam.Authority, false);  
    string token = authContext.AcquireTokenAsync(authParam.Resource, yourAppClientID,   
        new UserCredential(crmAdminUser, crmAdminPassword)).Result.AccessToken;  
  
```  
  
 <span data-ttu-id="5aeb7-205">For instructions on how to obtain a `AppId` see [Authorize access to web applications using OAuth 2.0 and Azure Active Directory](https://azure.microsoft.com/en-us/documentation/articles/active-directory-protocols-oauth-code/).</span><span class="sxs-lookup"><span data-stu-id="5aeb7-205">For instructions on how to obtain a `AppId` see [Authorize access to web applications using OAuth 2.0 and Azure Active Directory](https://azure.microsoft.com/en-us/documentation/articles/active-directory-protocols-oauth-code/).</span></span> <span data-ttu-id="5aeb7-206">For more information about Azure user security, see [Authentication Scenarios for Azure AD](https://azure.microsoft.com/en-us/documentation/articles/active-directory-authentication-scenarios/).</span><span class="sxs-lookup"><span data-stu-id="5aeb7-206">For more information about Azure user security, see [Authentication Scenarios for Azure AD](https://azure.microsoft.com/en-us/documentation/articles/active-directory-authentication-scenarios/).</span></span>  
  
### <a name="error-handling-and-failure-processing"></a><span data-ttu-id="5aeb7-207">Error handling and failure processing</span><span class="sxs-lookup"><span data-stu-id="5aeb7-207">Error handling and failure processing</span></span>  
 <span data-ttu-id="5aeb7-208">Once a profile is correctly configured, the synchronization process is typically highly reliable.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-208">Once a profile is correctly configured, the synchronization process is typically highly reliable.</span></span> <span data-ttu-id="5aeb7-209">However, if a record fails to synchronize, the following failure processing is applied:</span><span class="sxs-lookup"><span data-stu-id="5aeb7-209">However, if a record fails to synchronize, the following failure processing is applied:</span></span>  
  
1. <span data-ttu-id="5aeb7-210">After the configured retry interval, another attempt is made to synchronize the record.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-210">After the configured retry interval, another attempt is made to synchronize the record.</span></span> <span data-ttu-id="5aeb7-211">This is repeated up to the configured maximum number of retries.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-211">This is repeated up to the configured maximum number of retries.</span></span>  
  
2. <span data-ttu-id="5aeb7-212">The record is marked as processed.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-212">The record is marked as processed.</span></span>  
  
3. <span data-ttu-id="5aeb7-213">A corresponding failed record entry is written to the error log.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-213">A corresponding failed record entry is written to the error log.</span></span>  
  
4. <span data-ttu-id="5aeb7-214">The next record is processed.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-214">The next record is processed.</span></span>  
  
   <span data-ttu-id="5aeb7-215">Because the record is marked as processed, no future attempt is made to synchronize the record until its value or schema changes.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-215">Because the record is marked as processed, no future attempt is made to synchronize the record until its value or schema changes.</span></span> <span data-ttu-id="5aeb7-216">(Note that writing identical values back into an entity instance also marks it as modified.)</span><span class="sxs-lookup"><span data-stu-id="5aeb7-216">(Note that writing identical values back into an entity instance also marks it as modified.)</span></span>  
  
   <span data-ttu-id="5aeb7-217">The entries in the error log are write-only.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-217">The entries in the error log are write-only.</span></span> <span data-ttu-id="5aeb7-218">Future successes or failures during synchronization of the same record do not result in the alteration of past entries for this record.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-218">Future successes or failures during synchronization of the same record do not result in the alteration of past entries for this record.</span></span> <span data-ttu-id="5aeb7-219">For example, a failure entry will remain in the error log even after the record has been successfully synchronized during some later synchronization cycle.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-219">For example, a failure entry will remain in the error log even after the record has been successfully synchronized during some later synchronization cycle.</span></span>  
  
> [!CAUTION]
>  <span data-ttu-id="5aeb7-220">This error processing logic is subject to change in future releases of this service.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-220">This error processing logic is subject to change in future releases of this service.</span></span>  
  
 <span data-ttu-id="5aeb7-221">These failure entries can be retrieved through the [Get the failure details for a given Profile](https://discovery.crmreplication.azure.net/swagger/ui/index) request.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-221">These failure entries can be retrieved through the [Get the failure details for a given Profile](https://discovery.crmreplication.azure.net/swagger/ui/index) request.</span></span> <span data-ttu-id="5aeb7-222">The response returns a URI to an Azure blob that contains the failure information.</span><span class="sxs-lookup"><span data-stu-id="5aeb7-222">The response returns a URI to an Azure blob that contains the failure information.</span></span>  <span data-ttu-id="5aeb7-223">Each line has the following comma-separated fields (newlines added for clarity):</span><span class="sxs-lookup"><span data-stu-id="5aeb7-223">Each line has the following comma-separated fields (newlines added for clarity):</span></span>  
  
```  
  
Entity: <entity-name>,   
RecordId: <”N/A” | guid>,   
NotificationTime: <datetime>,   
ChangeType: <sync-type>,  
FailureReason: <description>  
  
```  
  
 <span data-ttu-id="5aeb7-224">Ví dụ:</span><span class="sxs-lookup"><span data-stu-id="5aeb7-224">For example:</span></span>  
  
```  
  
Entity: lead,   
RecordId: N/A, NotificationTime: , ChangeType: Trigger Initial Export, FailureReason: There is already an object named 'hatest201_lead' in the database.  
Entity: account, RecordId: b2a19cdd-88df-e311-b8e5-6c3be5a8b200, NotificationTime: 8/31/2016 6:50:38 PM, ChangeType: New, FailureReason: Invalid object name 'dbo.hatest201_account'.  
```  
  
### <a name="see-also"></a><span data-ttu-id="5aeb7-225">Xem thêm</span><span class="sxs-lookup"><span data-stu-id="5aeb7-225">See also</span></span>  
 <span data-ttu-id="5aeb7-226">[Manage your data in Dynamics 365 for Customer Engagement apps](manage-data.md) </span><span class="sxs-lookup"><span data-stu-id="5aeb7-226">[Manage your data in Dynamics 365 for Customer Engagement apps](manage-data.md) </span></span>  
 [<span data-ttu-id="5aeb7-227">Nhập dữ liệu</span><span class="sxs-lookup"><span data-stu-id="5aeb7-227">Import data</span></span>](import-data.md)
