---
title: Define goal metric and rollup fields (Developer Guide for Dynamics 365 for Customer Engagement)| MicrosoftDocs
description: To specify the goal metric type, participating entities, and whether you track actuals, custom or in-progress data, use the goal metric entity (Metric) and the rollup field (RollupField) entity
ms.custom: ''
ms.date: 10/31/2017
ms.reviewer: ''
ms.service: crm-online
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
applies_to:
- Dynamics 365 for Customer Engagement (online)
helpviewer_keywords:
- goal metric entity
- goal management entities, creating goal metrics
- defining goal metrics and rollup fields, about
- goal management entities, tracking actual; in-progress; and custom data
- goal metrics, attributes to set
- goal management entities, defining goal metrics and rollup fields
- goal management entities, specifying rollup fields
- tracking actual; in-progress; and custom data, goal management entities
- goal management entities, goal metric types
- specifying rollup fields, attributes to set
- creating goal metrics, goal management entities
ms.assetid: 0398bc8b-99d4-486b-9de6-3c2289eed5e6
caps.latest.revision: 29
author: JimDaly
ms.author: jdaly
manager: amyla
search.audienceType:
- developer
search.app:
- D365CE
ms.openlocfilehash: 047b3541a66504fb6f2e68ec67ae2f8d53804339
ms.sourcegitcommit: 9f0efd59de16a6d9902fa372cb25fc0baf1c2838
ms.translationtype: HT
ms.contentlocale: vi-VN
ms.lasthandoff: 01/08/2019
ms.locfileid: "387407"
---
# <a name="define-goal-metric-and-rollup-fields"></a><span data-ttu-id="e0fdb-103">Define goal metric and rollup fields</span><span class="sxs-lookup"><span data-stu-id="e0fdb-103">Define goal metric and rollup fields</span></span>

[!INCLUDE[](../includes/cc_applies_to_update_9_0_0.md)]

<span data-ttu-id="e0fdb-104">To specify the goal metric type, participating entities, and whether you track actuals, custom or in-progress data, use the goal metric entity (`Metric`) and the rollup field (`RollupField`) entity.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-104">To specify the goal metric type, participating entities, and whether you track actuals, custom or in-progress data, use the goal metric entity (`Metric`) and the rollup field (`RollupField`) entity.</span></span> <span data-ttu-id="e0fdb-105">The goal metric and the rollup fields have a parental relationship in which all operations on the parent record are propagated to the child records.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-105">The goal metric and the rollup fields have a parental relationship in which all operations on the parent record are propagated to the child records.</span></span> <span data-ttu-id="e0fdb-106">For more information about parental relationship and cascading rules, see [Entity Relationship Behavior](entity-relationship-behavior.md).</span><span class="sxs-lookup"><span data-stu-id="e0fdb-106">For more information about parental relationship and cascading rules, see [Entity Relationship Behavior](entity-relationship-behavior.md).</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="e0fdb-107">All goals in the hierarchy must be based on the same goal metric and time period.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-107">All goals in the hierarchy must be based on the same goal metric and time period.</span></span> <span data-ttu-id="e0fdb-108">If you create a child goal that is based on a different goal metric, an exception is thrown.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-108">If you create a child goal that is based on a different goal metric, an exception is thrown.</span></span> <span data-ttu-id="e0fdb-109">If you specify a different time period for a child goal, the system will ignore the specified time period and use the parent goal time period.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-109">If you specify a different time period for a child goal, the system will ignore the specified time period and use the parent goal time period.</span></span> <span data-ttu-id="e0fdb-110">You can associate a goal with a new metric, if the goal does not have a parent goal or a child goal.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-110">You can associate a goal with a new metric, if the goal does not have a parent goal or a child goal.</span></span> <span data-ttu-id="e0fdb-111">Otherwise, an exception is thrown when you update the goal record.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-111">Otherwise, an exception is thrown when you update the goal record.</span></span>  

<a name="BKMK_CreateGoalMetric"></a>   
## <a name="create-goal-metric"></a><span data-ttu-id="e0fdb-112">Create Goal Metric</span><span class="sxs-lookup"><span data-stu-id="e0fdb-112">Create Goal Metric</span></span>  
 <span data-ttu-id="e0fdb-113">Có hai loại số liệu mục tiêu: Số tiền và Đếm.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-113">There are two goal metric types: Amount and Count.</span></span> <span data-ttu-id="e0fdb-114">The Amount metric type is expressed as a money value, an integer, or a decimal number.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-114">The Amount metric type is expressed as a money value, an integer, or a decimal number.</span></span> <span data-ttu-id="e0fdb-115">Loại số liệu Đếm là số nguyên.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-115">The Count metric type is an integer.</span></span> <span data-ttu-id="e0fdb-116">Ví dụ: bạn có thể sử dụng số liệu mục tiêu Số tiền (tiền) để theo dõi doanh thu từ tất cả cơ hội đang hoạt động hoặc đơn đặt hàng.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-116">For example, you can use the Amount (money) goal metric to track the revenues from all active opportunities or sales orders.</span></span> <span data-ttu-id="e0fdb-117">Loại số nguyên có thể được dùng để theo dõi cuộc gọi bán hàng do nhân viên bán hàng thực hiện.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-117">An integer type can be used to track sales calls made by a salesperson.</span></span> <span data-ttu-id="e0fdb-118">Số thập phân đại diện cho sản phẩm được bán theo cân nặng, chẳng hạn như hạt hoặc đường.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-118">A decimal number can represent a product sold by weight, such as grain or sugar.</span></span>  
  
 <span data-ttu-id="e0fdb-119">To specify the goal metric type and whether you are tracking data against target or stretch target, use the goal metric entity (`Metric`).</span><span class="sxs-lookup"><span data-stu-id="e0fdb-119">To specify the goal metric type and whether you are tracking data against target or stretch target, use the goal metric entity (`Metric`).</span></span> <span data-ttu-id="e0fdb-120">To select Amount or Count, use the `Metric.IsAmount` attribute.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-120">To select Amount or Count, use the `Metric.IsAmount` attribute.</span></span> <span data-ttu-id="e0fdb-121">Use the `Metric.AmountDataType` attribute to specify the Amount data type.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-121">Use the `Metric.AmountDataType` attribute to specify the Amount data type.</span></span> <span data-ttu-id="e0fdb-122">The possible values for this attribute are defined in the `metric_goaltype` global option set.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-122">The possible values for this attribute are defined in the `metric_goaltype` global option set.</span></span> <span data-ttu-id="e0fdb-123">To specify whether the goal tracks data against target or stretch target, use the `Metric.IsStretchTracked` attribute.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-123">To specify whether the goal tracks data against target or stretch target, use the `Metric.IsStretchTracked` attribute.</span></span> <span data-ttu-id="e0fdb-124">To associate a goal with a metric, use the `Goal.MetricId` attribute.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-124">To associate a goal with a metric, use the `Goal.MetricId` attribute.</span></span>  
  
 <span data-ttu-id="e0fdb-125">Each goal can track actual, in-progress, and custom data as shown in the following diagram.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-125">Each goal can track actual, in-progress, and custom data as shown in the following diagram.</span></span>  
  
 <span data-ttu-id="e0fdb-126">![Goal types](media/goal-types.png "Goal types")</span><span class="sxs-lookup"><span data-stu-id="e0fdb-126">![Goal types](media/goal-types.png "Goal types")</span></span>  
  
 <span data-ttu-id="e0fdb-127">To track actual, in-progress, and custom data, you use the goal entity attributes, referred to as rollup fields.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-127">To track actual, in-progress, and custom data, you use the goal entity attributes, referred to as rollup fields.</span></span> <span data-ttu-id="e0fdb-128">For example, if an opportunity is closed as “Won”, an amount of revenue generated from this opportunity can be rolled into the actual money amount rollup field.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-128">For example, if an opportunity is closed as “Won”, an amount of revenue generated from this opportunity can be rolled into the actual money amount rollup field.</span></span> <span data-ttu-id="e0fdb-129">Or, if an opportunity is “Open”, the opportunity’s estimated revenue can be added to the in-progress money amount rollup field.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-129">Or, if an opportunity is “Open”, the opportunity’s estimated revenue can be added to the in-progress money amount rollup field.</span></span> <span data-ttu-id="e0fdb-130">The following table lists the relationship between the goal metric type and the rollup fields available for each type.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-130">The following table lists the relationship between the goal metric type and the rollup fields available for each type.</span></span>  
  
|<span data-ttu-id="e0fdb-131">Goal metric type</span><span class="sxs-lookup"><span data-stu-id="e0fdb-131">Goal metric type</span></span>|<span data-ttu-id="e0fdb-132">Available rollup fields</span><span class="sxs-lookup"><span data-stu-id="e0fdb-132">Available rollup fields</span></span>|  
|----------------------|-----------------------------|  
|<span data-ttu-id="e0fdb-133">Amount (money)</span><span class="sxs-lookup"><span data-stu-id="e0fdb-133">Amount (money)</span></span>|`Goal.ActualMoney`<br /><br /> `Goal.InProgressMoney`<br /><br /> `Goal.CustomRollupFieldMoney`|  
|<span data-ttu-id="e0fdb-134">Amount (integer) or Count</span><span class="sxs-lookup"><span data-stu-id="e0fdb-134">Amount (integer) or Count</span></span>|`Goal.ActualInteger`<br /><br /> `Goal.InProgressInteger`<br /><br /> `Goal.CustomRollupFieldInteger`|  
|<span data-ttu-id="e0fdb-135">Amount (decimal)</span><span class="sxs-lookup"><span data-stu-id="e0fdb-135">Amount (decimal)</span></span>|`Goal.ActualDecimal`<br /><br /> `Goal.InProgressDecimal`<br /><br /> `Goal.CustomRollupFieldDecimal`|  
  
 <span data-ttu-id="e0fdb-136">Other examples of rollup data are `Lead.EstimatedAmount` and `OpportunityClose.ActualRevenue` that can be rolled into the `Goal.InProgressMoney` and the `Goal.ActualMoney` rollup fields.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-136">Other examples of rollup data are `Lead.EstimatedAmount` and `OpportunityClose.ActualRevenue` that can be rolled into the `Goal.InProgressMoney` and the `Goal.ActualMoney` rollup fields.</span></span> <span data-ttu-id="e0fdb-137">The custom rollup fields are extra fields that you can use for integer, decimal, and money values.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-137">The custom rollup fields are extra fields that you can use for integer, decimal, and money values.</span></span>  
  
<a name="BKMK_SpecifyFields"></a>   
## <a name="specify-rollup-fields"></a><span data-ttu-id="e0fdb-138">Specify Rollup Fields</span><span class="sxs-lookup"><span data-stu-id="e0fdb-138">Specify Rollup Fields</span></span>  
 <span data-ttu-id="e0fdb-139">To specify other important rollup information, use the rollup field entity.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-139">To specify other important rollup information, use the rollup field entity.</span></span>  
  
|<span data-ttu-id="e0fdb-140">Thuộc tính</span><span class="sxs-lookup"><span data-stu-id="e0fdb-140">Attribute</span></span>|<span data-ttu-id="e0fdb-141">Rollup information</span><span class="sxs-lookup"><span data-stu-id="e0fdb-141">Rollup information</span></span>|  
|---------------|------------------------|  
|`RollupField.GoalAttribute`|<span data-ttu-id="e0fdb-142">A goal rollup field, such as `Goal.ActualMoney`, `Goal.CustomRollupFieldMoney` or `Goal.InProgressMoney`.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-142">A goal rollup field, such as `Goal.ActualMoney`, `Goal.CustomRollupFieldMoney` or `Goal.InProgressMoney`.</span></span>|  
|`RollupField.SourceEntity`|<span data-ttu-id="e0fdb-143">A source entity from where data is being rolled up, such as lead, opportunity, or sales order.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-143">A source entity from where data is being rolled up, such as lead, opportunity, or sales order.</span></span>|  
|`RollupField.SourceAttribute`|<span data-ttu-id="e0fdb-144">An entity attribute from where data is being rolled up, such as `Opportunity.ActualValue` or `Lead.EstimatedValue`.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-144">An entity attribute from where data is being rolled up, such as `Opportunity.ActualValue` or `Lead.EstimatedValue`.</span></span> <span data-ttu-id="e0fdb-145">A source attribute and a goal rollup field must be of the same type, such as money or integer; otherwise, an exception is thrown when you create a rollup field record.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-145">A source attribute and a goal rollup field must be of the same type, such as money or integer; otherwise, an exception is thrown when you create a rollup field record.</span></span>|  
|`RollupField.DateAttribute`|<span data-ttu-id="e0fdb-146">The date that is validated against the goal time period, such as `Opportunity.ActualCloseDate` or `Lead.EstimatedCloseDate`.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-146">The date that is validated against the goal time period, such as `Opportunity.ActualCloseDate` or `Lead.EstimatedCloseDate`.</span></span> <span data-ttu-id="e0fdb-147">A record participates in the goal rollup, if the specified date falls between the start date and the end date for the goal.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-147">A record participates in the goal rollup, if the specified date falls between the start date and the end date for the goal.</span></span> <span data-ttu-id="e0fdb-148">For example, if an opportunity is closed between the start and end dates for the goal, revenue generated from this opportunity is added to the goal’s total revenue; otherwise, it is not included.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-148">For example, if an opportunity is closed between the start and end dates for the goal, revenue generated from this opportunity is added to the goal’s total revenue; otherwise, it is not included.</span></span>|  
|`RollupField.SourceState`|<span data-ttu-id="e0fdb-149">The state of the source record such as “Won” or” Lost” opportunity.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-149">The state of the source record such as “Won” or” Lost” opportunity.</span></span>|  
|`RollupField.SourceStatus`|<span data-ttu-id="e0fdb-150">The status reason for the state of the source record, such as “Won” for won opportunities, or “Canceled” or “Out-sold” for the lost opportunities.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-150">The status reason for the state of the source record, such as “Won” for won opportunities, or “Canceled” or “Out-sold” for the lost opportunities.</span></span>|  
|`RollupField.IsStateParentEntityAttribute`|<span data-ttu-id="e0fdb-151">Indicates whether state or status belong to the parent entity.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-151">Indicates whether state or status belong to the parent entity.</span></span> <span data-ttu-id="e0fdb-152">For example, for the opportunity product that does not have its own state, you can use state and status of the parent opportunity record.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-152">For example, for the opportunity product that does not have its own state, you can use state and status of the parent opportunity record.</span></span>|  
  
 <span data-ttu-id="e0fdb-153">For each goal metric, you can create up to three rollup field records.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-153">For each goal metric, you can create up to three rollup field records.</span></span> <span data-ttu-id="e0fdb-154">Each record can specify actual, in-progress, or custom amount or count.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-154">Each record can specify actual, in-progress, or custom amount or count.</span></span> <span data-ttu-id="e0fdb-155">You can use the same source entity or difference source entities for all rollup field records.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-155">You can use the same source entity or difference source entities for all rollup field records.</span></span> <span data-ttu-id="e0fdb-156">For example, in a goal metric that specifies the Money type, you can use an opportunity entity as a source entity and `Opportunity.ActualValue` as a source attribute.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-156">For example, in a goal metric that specifies the Money type, you can use an opportunity entity as a source entity and `Opportunity.ActualValue` as a source attribute.</span></span> <span data-ttu-id="e0fdb-157">This lets you track the actual money amounts in all opportunities that are closed as “Won”.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-157">This lets you track the actual money amounts in all opportunities that are closed as “Won”.</span></span> <span data-ttu-id="e0fdb-158">The `Opportunity.EstimatedValue` can be used to track the revenue that is expected after the opportunity is closed.</span><span class="sxs-lookup"><span data-stu-id="e0fdb-158">The `Opportunity.EstimatedValue` can be used to track the revenue that is expected after the opportunity is closed.</span></span>  
  
### <a name="see-also"></a><span data-ttu-id="e0fdb-159">Xem thêm</span><span class="sxs-lookup"><span data-stu-id="e0fdb-159">See also</span></span>  
 <span data-ttu-id="e0fdb-160">[Goal Management Entities](goal-management-entities.md) </span><span class="sxs-lookup"><span data-stu-id="e0fdb-160">[Goal Management Entities](goal-management-entities.md) </span></span>  
 [<span data-ttu-id="e0fdb-161">Add Complex Goal Criteria</span><span class="sxs-lookup"><span data-stu-id="e0fdb-161">Add Complex Goal Criteria</span></span>](add-complex-goal-criteria.md)
