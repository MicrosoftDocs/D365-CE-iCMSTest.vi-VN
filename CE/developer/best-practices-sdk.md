---
title: Best practices (Developer Guide for Dynamics 365 for Customer Engagement apps) | MicrosoftDocs
description: This topic describes best practices for developing with Dynamics 365 for Customer Engagement apps.
ms.custom: ''
ms.date: 09/16/2018
ms.reviewer: kvivek
ms.service: crm-online
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
applies_to:
- Dynamics 365 for Customer Engagement (online)
ms.assetid: 42dcebf5-a624-45b9-b719-20e5882d5ca2
caps.latest.revision: 89
author: JimDaly
ms.author: jdaly
manager: annbe
search.audienceType:
- developer
search.app:
- D365CE
ms.openlocfilehash: 32414f3be20d7826b9a4bc02fdb14ab5c3ccf0f1
ms.sourcegitcommit: 9f0efd59de16a6d9902fa372cb25fc0baf1c2838
ms.translationtype: HT
ms.contentlocale: vi-VN
ms.lasthandoff: 01/08/2019
ms.locfileid: "386406"
---
# <a name="best-practices-for-developing-with-dynamics-365-for-customer-engagement"></a><span data-ttu-id="aae51-103">Best practices for developing with Dynamics 365 for Customer Engagement</span><span class="sxs-lookup"><span data-stu-id="aae51-103">Best practices for developing with Dynamics 365 for Customer Engagement</span></span>

[!INCLUDE[](../includes/cc_applies_to_update_9_0_0.md)]

<span data-ttu-id="aae51-104">This topic describes best practices for customizing [!INCLUDE[pn_dynamics_crm_online](../includes/pn-dynamics-crm-online.md)] apps.</span><span class="sxs-lookup"><span data-stu-id="aae51-104">This topic describes best practices for customizing [!INCLUDE[pn_dynamics_crm_online](../includes/pn-dynamics-crm-online.md)] apps.</span></span>  

> [!IMPORTANT]
>  <span data-ttu-id="aae51-105">Review [Supported extensions for Dynamics 365 for Customer Engagement apps](supported-extensions.md) to learn about supported and unsupported techniques for customization.</span><span class="sxs-lookup"><span data-stu-id="aae51-105">Review [Supported extensions for Dynamics 365 for Customer Engagement apps](supported-extensions.md) to learn about supported and unsupported techniques for customization.</span></span>  

<a name="Performance"></a>   

## <a name="performance-best-practices"></a><span data-ttu-id="aae51-106">Performance best practices</span><span class="sxs-lookup"><span data-stu-id="aae51-106">Performance best practices</span></span>  

 <span data-ttu-id="aae51-107">The following best practices can help you write code that performs better.</span><span class="sxs-lookup"><span data-stu-id="aae51-107">The following best practices can help you write code that performs better.</span></span>  

### <a name="use-multiple-threads"></a><span data-ttu-id="aae51-108">Use multiple threads</span><span class="sxs-lookup"><span data-stu-id="aae51-108">Use multiple threads</span></span>  

 <span data-ttu-id="aae51-109">Add threading support to your application to break up the work across multiple CPUs.</span><span class="sxs-lookup"><span data-stu-id="aae51-109">Add threading support to your application to break up the work across multiple CPUs.</span></span> <span data-ttu-id="aae51-110">This suggestion assumes that you are running your code on a multiprocessor system.</span><span class="sxs-lookup"><span data-stu-id="aae51-110">This suggestion assumes that you are running your code on a multiprocessor system.</span></span> [!INCLUDE[proc_more_information](../includes/proc-more-information.md)] <span data-ttu-id="aae51-111">[NET Framework Advanced Development Guide article on Managed Threading](https://msdn.microsoft.com/library/3e8s7xdd.aspx).</span><span class="sxs-lookup"><span data-stu-id="aae51-111">[NET Framework Advanced Development Guide article on Managed Threading](https://msdn.microsoft.com/library/3e8s7xdd.aspx).</span></span>  

### <a name="allow-the-system-to-create-guids"></a><span data-ttu-id="aae51-112">Allow the system to create GUIDs</span><span class="sxs-lookup"><span data-stu-id="aae51-112">Allow the system to create GUIDs</span></span> 

 <span data-ttu-id="aae51-113">Allow the system to automatically assign the **GUID** (Id) for you instead of manually creating it yourself.</span><span class="sxs-lookup"><span data-stu-id="aae51-113">Allow the system to automatically assign the **GUID** (Id) for you instead of manually creating it yourself.</span></span> <span data-ttu-id="aae51-114">This suggestion allows [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps to take advantage of sequential GUIDs, which provide better SQL performance.</span><span class="sxs-lookup"><span data-stu-id="aae51-114">This suggestion allows [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps to take advantage of sequential GUIDs, which provide better SQL performance.</span></span> <span data-ttu-id="aae51-115">The following sample code shows how to call the <xref:Microsoft.Xrm.Sdk.IOrganizationService.Create*> method to obtain a system-assigned `GUID`.</span><span class="sxs-lookup"><span data-stu-id="aae51-115">The following sample code shows how to call the <xref:Microsoft.Xrm.Sdk.IOrganizationService.Create*> method to obtain a system-assigned `GUID`.</span></span>  

```csharp
// Instantiate an account object.
Account account = new Account { Name = "Fourth Coffee" };  
// Create an account record named Fourth Coffee and retrieve the GUID.
accountId = serviceProxy.Create(account);  
```
### <a name="use-early-bound-types"></a><span data-ttu-id="aae51-116">Use early-bound types</span><span class="sxs-lookup"><span data-stu-id="aae51-116">Use early-bound types</span></span>

<span data-ttu-id="aae51-117">Use the <xref:Microsoft.Xrm.Sdk.Entity> class when your code must work on entities and attributes that aren’t known at the time the code is written.</span><span class="sxs-lookup"><span data-stu-id="aae51-117">Use the <xref:Microsoft.Xrm.Sdk.Entity> class when your code must work on entities and attributes that aren’t known at the time the code is written.</span></span> <span data-ttu-id="aae51-118">In addition, if your custom code works with thousands of entity records, use of the <xref:Microsoft.Xrm.Sdk.Entity> class results in slightly better performance than the early-bound entity types.</span><span class="sxs-lookup"><span data-stu-id="aae51-118">In addition, if your custom code works with thousands of entity records, use of the <xref:Microsoft.Xrm.Sdk.Entity> class results in slightly better performance than the early-bound entity types.</span></span> <span data-ttu-id="aae51-119">However, this flexibility has a disadvantage because you cannot verify entity and attribute names at compile time.</span><span class="sxs-lookup"><span data-stu-id="aae51-119">However, this flexibility has a disadvantage because you cannot verify entity and attribute names at compile time.</span></span> <span data-ttu-id="aae51-120">If your entities are already defined at code time and slight performance degradation is acceptable, you should use the early-bound types that you can generate by using the [!INCLUDE[sdk_CodeGenUtility](../includes/sdk-codegenutility.md)] tool.</span><span class="sxs-lookup"><span data-stu-id="aae51-120">If your entities are already defined at code time and slight performance degradation is acceptable, you should use the early-bound types that you can generate by using the [!INCLUDE[sdk_CodeGenUtility](../includes/sdk-codegenutility.md)] tool.</span></span> 
[!INCLUDE[proc_more_information](../includes/proc-more-information.md)] <span data-ttu-id="aae51-121">[Use the Early Bound Entity Classes in Code](org-service/use-early-bound-entity-classes-code.md)</span><span class="sxs-lookup"><span data-stu-id="aae51-121">[Use the Early Bound Entity Classes in Code](org-service/use-early-bound-entity-classes-code.md)</span></span>  

### <a name="disable-plug-ins"></a><span data-ttu-id="aae51-122">Disable plug-ins</span><span class="sxs-lookup"><span data-stu-id="aae51-122">Disable plug-ins</span></span>

 <span data-ttu-id="aae51-123">If possible, disable registered plug-ins before you run your application.</span><span class="sxs-lookup"><span data-stu-id="aae51-123">If possible, disable registered plug-ins before you run your application.</span></span>

### <a name="write-plug-ins-that-execute-faster"></a><span data-ttu-id="aae51-124">Write plug-ins that execute faster</span><span class="sxs-lookup"><span data-stu-id="aae51-124">Write plug-ins that execute faster</span></span>

<span data-ttu-id="aae51-125">Always write a plug-in that takes the least time to perform its intended task.</span><span class="sxs-lookup"><span data-stu-id="aae51-125">Always write a plug-in that takes the least time to perform its intended task.</span></span> <span data-ttu-id="aae51-126">For example, the <xref:Microsoft.Xrm.Sdk.IOrganizationService.Execute*> method is frequently processed in [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)].</span><span class="sxs-lookup"><span data-stu-id="aae51-126">For example, the <xref:Microsoft.Xrm.Sdk.IOrganizationService.Execute*> method is frequently processed in [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)].</span></span> <span data-ttu-id="aae51-127">If you register a plug-in on that message, your plug-in can have a significant performance impact on the system because it executes every time that the `Execute` method is processed, which frequently occurs.</span><span class="sxs-lookup"><span data-stu-id="aae51-127">If you register a plug-in on that message, your plug-in can have a significant performance impact on the system because it executes every time that the `Execute` method is processed, which frequently occurs.</span></span>  

<span data-ttu-id="aae51-128">If you intend to register your plug-ins for synchronous execution, we recommend that you design them to complete their operation in less than 2 seconds.</span><span class="sxs-lookup"><span data-stu-id="aae51-128">If you intend to register your plug-ins for synchronous execution, we recommend that you design them to complete their operation in less than 2 seconds.</span></span> <span data-ttu-id="aae51-129">It’s best to minimize processing time in plug-ins to maintain interactivity of the client applications that are connected to the same organization service that executes the plug-in.</span><span class="sxs-lookup"><span data-stu-id="aae51-129">It’s best to minimize processing time in plug-ins to maintain interactivity of the client applications that are connected to the same organization service that executes the plug-in.</span></span>  

<a name="limitdata"></a>

### <a name="limit-the-data-you-retrieve"></a><span data-ttu-id="aae51-130">Limit the data you retrieve</span><span class="sxs-lookup"><span data-stu-id="aae51-130">Limit the data you retrieve</span></span>

<span data-ttu-id="aae51-131">When you use the methods that retrieve data from the server, retrieve the minimum amount of data that your application needs.</span><span class="sxs-lookup"><span data-stu-id="aae51-131">When you use the methods that retrieve data from the server, retrieve the minimum amount of data that your application needs.</span></span> <span data-ttu-id="aae51-132">You do this by specifying the column set, which is the set of entity attributes to retrieve.</span><span class="sxs-lookup"><span data-stu-id="aae51-132">You do this by specifying the column set, which is the set of entity attributes to retrieve.</span></span>  

<span data-ttu-id="aae51-133">For example, it is rarely a good idea to retrieve all the metadata with the `RetrieveAllEntities` message using the <xref:Microsoft.Xrm.Sdk.Messages.RetrieveAllEntitiesRequest> class, specifying the <xref:Microsoft.Xrm.Sdk.Metadata.EntityFilters.All>\` entity filter for the <xref:Microsoft.Xrm.Sdk.Messages.RetrieveAllEntitiesRequest.EntityFilters> property.</span><span class="sxs-lookup"><span data-stu-id="aae51-133">For example, it is rarely a good idea to retrieve all the metadata with the `RetrieveAllEntities` message using the <xref:Microsoft.Xrm.Sdk.Messages.RetrieveAllEntitiesRequest> class, specifying the <xref:Microsoft.Xrm.Sdk.Metadata.EntityFilters.All>\` entity filter for the <xref:Microsoft.Xrm.Sdk.Messages.RetrieveAllEntitiesRequest.EntityFilters> property.</span></span> <span data-ttu-id="aae51-134">Instead, you might achieve better performance if you restrict the entity filter, or use one of the following message request classes: <xref:Microsoft.Xrm.Sdk.Messages.RetrieveEntityRequest>, <xref:Microsoft.Xrm.Sdk.Messages.RetrieveOptionSetRequest>, <xref:Microsoft.Xrm.Sdk.Messages.RetrieveAttributeRequest>, <xref:Microsoft.Xrm.Sdk.Messages.RetrieveRelationshipRequest> or <xref:Microsoft.Xrm.Sdk.Messages.RetrieveMetadataChangesRequest>.</span><span class="sxs-lookup"><span data-stu-id="aae51-134">Instead, you might achieve better performance if you restrict the entity filter, or use one of the following message request classes: <xref:Microsoft.Xrm.Sdk.Messages.RetrieveEntityRequest>, <xref:Microsoft.Xrm.Sdk.Messages.RetrieveOptionSetRequest>, <xref:Microsoft.Xrm.Sdk.Messages.RetrieveAttributeRequest>, <xref:Microsoft.Xrm.Sdk.Messages.RetrieveRelationshipRequest> or <xref:Microsoft.Xrm.Sdk.Messages.RetrieveMetadataChangesRequest>.</span></span> <span data-ttu-id="aae51-135">The RetrieveMetadataChanges message allows for constructing a query to return just the metadata you need or the metadata that has changed.</span><span class="sxs-lookup"><span data-stu-id="aae51-135">The RetrieveMetadataChanges message allows for constructing a query to return just the metadata you need or the metadata that has changed.</span></span> 
[!INCLUDE[proc_more_information](../includes/proc-more-information.md)] <span data-ttu-id="aae51-136">[Retrieve and Detect Changes to Metadata](retrieve-detect-changes-metadata.md).</span><span class="sxs-lookup"><span data-stu-id="aae51-136">[Retrieve and Detect Changes to Metadata](retrieve-detect-changes-metadata.md).</span></span>  

### <a name="limit-the-number-of-entities-that-are-enabled-for-offline-use"></a><span data-ttu-id="aae51-137">Limit the number of entities that are enabled for offline use</span><span class="sxs-lookup"><span data-stu-id="aae51-137">Limit the number of entities that are enabled for offline use</span></span>

<span data-ttu-id="aae51-138">Xem xét cẩn thận nếu một thực thể phải có sẵn cho những người trong khi làm việc ngoại tuyến.</span><span class="sxs-lookup"><span data-stu-id="aae51-138">Carefully consider if an entity must be available for people while working offline.</span></span>  <span data-ttu-id="aae51-139">Mỗi thực thể mà bạn cho phép khả năng ngoại tuyến ảnh hưởng trực tiếp đến thời gian cần thiết cho mọi người để đồng bộ hóa dữ liệu khi họ trở lại trực tuyến.</span><span class="sxs-lookup"><span data-stu-id="aae51-139">Each entity that you enable for offline capability directly affects the time required for people to synchronize data when they come back online.</span></span> <span data-ttu-id="aae51-140">Điều này đặc biệt đúng cho những người có máy tính tốc độ không mạnh.</span><span class="sxs-lookup"><span data-stu-id="aae51-140">This is especially true for people with less powerful computers.</span></span>

### <a name="limit-operations-that-cascade-to-related-entities"></a><span data-ttu-id="aae51-141">Limit operations that cascade to related entities</span><span class="sxs-lookup"><span data-stu-id="aae51-141">Limit operations that cascade to related entities</span></span>

<span data-ttu-id="aae51-142">When you use the <xref:Microsoft.Xrm.Sdk.IOrganizationService.Update*> method or <xref:Microsoft.Xrm.Sdk.Messages.UpdateRequest> message, do not set the `OwnerId` attribute on a record unless the owner has actually changed.</span><span class="sxs-lookup"><span data-stu-id="aae51-142">When you use the <xref:Microsoft.Xrm.Sdk.IOrganizationService.Update*> method or <xref:Microsoft.Xrm.Sdk.Messages.UpdateRequest> message, do not set the `OwnerId` attribute on a record unless the owner has actually changed.</span></span> <span data-ttu-id="aae51-143">When you set this attribute, the changes often cascade to related entities, which increases the time that is required for the update operation.</span><span class="sxs-lookup"><span data-stu-id="aae51-143">When you set this attribute, the changes often cascade to related entities, which increases the time that is required for the update operation.</span></span> 
[!INCLUDE[proc_more_information](../includes/proc-more-information.md)] <span data-ttu-id="aae51-144">[Cascading behavior](entity-relationship-behavior.md#BKMK_CascadingBehavior)</span><span class="sxs-lookup"><span data-stu-id="aae51-144">[Cascading behavior](entity-relationship-behavior.md#BKMK_CascadingBehavior)</span></span>  

### <a name="adjust-proxy-settings-on-the-client-on-premises-only"></a><span data-ttu-id="aae51-145">Adjust proxy settings on the client (on-premises only)</span><span class="sxs-lookup"><span data-stu-id="aae51-145">Adjust proxy settings on the client (on-premises only)</span></span>

[!INCLUDE[cc_sdk_onpremises_note](../includes/cc-sdk-onpremises-note.md)] 

<span data-ttu-id="aae51-146">A proxy server sits between a client application, such as a web browser, and the actual target server.</span><span class="sxs-lookup"><span data-stu-id="aae51-146">A proxy server sits between a client application, such as a web browser, and the actual target server.</span></span> <span data-ttu-id="aae51-147">When a computer is in a LAN, it can use a proxy server to connect to the Internet.</span><span class="sxs-lookup"><span data-stu-id="aae51-147">When a computer is in a LAN, it can use a proxy server to connect to the Internet.</span></span> <span data-ttu-id="aae51-148">In this case, the proxy server is combined with, or is a part of, the gateway server and firewall server.</span><span class="sxs-lookup"><span data-stu-id="aae51-148">In this case, the proxy server is combined with, or is a part of, the gateway server and firewall server.</span></span> <span data-ttu-id="aae51-149">The proxy can cache web requests and serve multiple client requests by using its cached data.</span><span class="sxs-lookup"><span data-stu-id="aae51-149">The proxy can cache web requests and serve multiple client requests by using its cached data.</span></span> <span data-ttu-id="aae51-150">If the requested data is not present in the cache of the proxy server, it forwards the request to the actual server by using its own IP address.</span><span class="sxs-lookup"><span data-stu-id="aae51-150">If the requested data is not present in the cache of the proxy server, it forwards the request to the actual server by using its own IP address.</span></span> <span data-ttu-id="aae51-151">Here, the proxy server acts on behalf of the client computer.</span><span class="sxs-lookup"><span data-stu-id="aae51-151">Here, the proxy server acts on behalf of the client computer.</span></span>  

<span data-ttu-id="aae51-152">Although a proxy server can act as a cache server and can help load a webpage faster, it can sometimes decrease performance if it is used incorrectly.</span><span class="sxs-lookup"><span data-stu-id="aae51-152">Although a proxy server can act as a cache server and can help load a webpage faster, it can sometimes decrease performance if it is used incorrectly.</span></span>

<span data-ttu-id="aae51-153">Frequently, people avoid manual proxy configuration and use automatic proxy configuration.</span><span class="sxs-lookup"><span data-stu-id="aae51-153">Frequently, people avoid manual proxy configuration and use automatic proxy configuration.</span></span> <span data-ttu-id="aae51-154">This shortcut helps in load balancing the proxy servers, but depending on the complexity of the configuration script, a significant delay can be experienced when you use automatic proxy configuration.</span><span class="sxs-lookup"><span data-stu-id="aae51-154">This shortcut helps in load balancing the proxy servers, but depending on the complexity of the configuration script, a significant delay can be experienced when you use automatic proxy configuration.</span></span>  

<span data-ttu-id="aae51-155">When the [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps server is installed, you can bypass the proxy server to achieve better throughput.</span><span class="sxs-lookup"><span data-stu-id="aae51-155">When the [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps server is installed, you can bypass the proxy server to achieve better throughput.</span></span> 

<span data-ttu-id="aae51-156">The server offers a local web address that requires no proxy to be reached.</span><span class="sxs-lookup"><span data-stu-id="aae51-156">The server offers a local web address that requires no proxy to be reached.</span></span> <span data-ttu-id="aae51-157">You can select **Bypass proxy server for local addresses** and provide the fully qualified domain name of the [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps server in the exceptions list.</span><span class="sxs-lookup"><span data-stu-id="aae51-157">You can select **Bypass proxy server for local addresses** and provide the fully qualified domain name of the [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps server in the exceptions list.</span></span> <span data-ttu-id="aae51-158">This gives better throughput when records are created by using the SDK assemblies.</span><span class="sxs-lookup"><span data-stu-id="aae51-158">This gives better throughput when records are created by using the SDK assemblies.</span></span>  

<a name="caching"></a>

### <a name="improve-service-channel-allocation-performance"></a><span data-ttu-id="aae51-159">Improve service channel allocation performance</span><span class="sxs-lookup"><span data-stu-id="aae51-159">Improve service channel allocation performance</span></span>

<span data-ttu-id="aae51-160">You can establish a connection to the [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] web services and authenticate users by using the <xref:Microsoft.Xrm.Sdk.Client.OrganizationServiceProxy> and <xref:Microsoft.Xrm.Sdk.Client.DiscoveryServiceProxy> service proxy classes.</span><span class="sxs-lookup"><span data-stu-id="aae51-160">You can establish a connection to the [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] web services and authenticate users by using the <xref:Microsoft.Xrm.Sdk.Client.OrganizationServiceProxy> and <xref:Microsoft.Xrm.Sdk.Client.DiscoveryServiceProxy> service proxy classes.</span></span> <span data-ttu-id="aae51-161">However, improper use of these service proxy classes can sometimes reduce application performance.</span><span class="sxs-lookup"><span data-stu-id="aae51-161">However, improper use of these service proxy classes can sometimes reduce application performance.</span></span> <span data-ttu-id="aae51-162">Therefore, if you understand when and how to use the different client classes that are available in the SDK, you can often obtain better application performance.</span><span class="sxs-lookup"><span data-stu-id="aae51-162">Therefore, if you understand when and how to use the different client classes that are available in the SDK, you can often obtain better application performance.</span></span>  

<span data-ttu-id="aae51-163">When you establish a [!INCLUDE[pn_WCF_long](../includes/pn-wcf-long.md)] service channel by using a service endpoint, for example, by using the organization web service, your application must perform two time consuming operations: metadata download from the endpoint and user authentication.</span><span class="sxs-lookup"><span data-stu-id="aae51-163">When you establish a [!INCLUDE[pn_WCF_long](../includes/pn-wcf-long.md)] service channel by using a service endpoint, for example, by using the organization web service, your application must perform two time consuming operations: metadata download from the endpoint and user authentication.</span></span> <span data-ttu-id="aae51-164">You can improve performance if your application performs these operations a minimum number of times for each application session.</span><span class="sxs-lookup"><span data-stu-id="aae51-164">You can improve performance if your application performs these operations a minimum number of times for each application session.</span></span> 

<span data-ttu-id="aae51-165">The <xref:Microsoft.Xrm.Sdk.Client.OrganizationServiceProxy> constructor shown here performs both these operations any time a service proxy object is created.</span><span class="sxs-lookup"><span data-stu-id="aae51-165">The <xref:Microsoft.Xrm.Sdk.Client.OrganizationServiceProxy> constructor shown here performs both these operations any time a service proxy object is created.</span></span>  

```csharp
OrganizationServiceProxy (Uri uri, Uri homeRealmUri, ClientCredentials clientCredentials, 
    ClientCredentials deviceCredentials)  
```

<span data-ttu-id="aae51-166">You typically obtain better performance if your application uses this constructor to create an instance of the service proxy by using this constructor one time during the application session and cache the returned reference for use in different code paths within your application.</span><span class="sxs-lookup"><span data-stu-id="aae51-166">You typically obtain better performance if your application uses this constructor to create an instance of the service proxy by using this constructor one time during the application session and cache the returned reference for use in different code paths within your application.</span></span> <span data-ttu-id="aae51-167">Notice that the returned service reference is not thread safe so multi-threaded applications will need to allocate one instance per thread.</span><span class="sxs-lookup"><span data-stu-id="aae51-167">Notice that the returned service reference is not thread safe so multi-threaded applications will need to allocate one instance per thread.</span></span> <span data-ttu-id="aae51-168">Applications must also call `Dispose` on the service proxy object before they terminate in order to free service channel allocated resources.</span><span class="sxs-lookup"><span data-stu-id="aae51-168">Applications must also call `Dispose` on the service proxy object before they terminate in order to free service channel allocated resources.</span></span>  

<span data-ttu-id="aae51-169">The service proxy class performs the metadata download and user authentication by using the following class methods.</span><span class="sxs-lookup"><span data-stu-id="aae51-169">The service proxy class performs the metadata download and user authentication by using the following class methods.</span></span>

```csharp
IServiceManagement<IOrganizationService> orgServiceManagement = 
    ServiceConfigurationFactory.CreateManagement<IOrganizationService>(
    new Uri(organizationUrl));

AuthenticationCredentials authCredentials = orgServiceManagement.Authenticate(credentials);
```
<span data-ttu-id="aae51-170">The <xref:Microsoft.Xrm.Sdk.Client.ServiceConfigurationFactory>.<xref:Microsoft.Xrm.Sdk.Client.ServiceConfigurationFactory.CreateManagement*></span><span class="sxs-lookup"><span data-stu-id="aae51-170">The <xref:Microsoft.Xrm.Sdk.Client.ServiceConfigurationFactory>.<xref:Microsoft.Xrm.Sdk.Client.ServiceConfigurationFactory.CreateManagement*></span></span> <span data-ttu-id="aae51-171">method performs the metadata download while the <xref:Microsoft.Xrm.Sdk.Client.IServiceManagement`1.Authenticate(Microsoft.Xrm.Sdk.Client.AuthenticationCredentials)> method authenticates the user.</span><span class="sxs-lookup"><span data-stu-id="aae51-171">method performs the metadata download while the <xref:Microsoft.Xrm.Sdk.Client.IServiceManagement`1.Authenticate(Microsoft.Xrm.Sdk.Client.AuthenticationCredentials)> method authenticates the user.</span></span> <span data-ttu-id="aae51-172">The returned objects from these methods are thread safe and can be statically cached by your application.</span><span class="sxs-lookup"><span data-stu-id="aae51-172">The returned objects from these methods are thread safe and can be statically cached by your application.</span></span> <span data-ttu-id="aae51-173">You can then use these objects to construct a service proxy object that uses one of the other available constructors.</span><span class="sxs-lookup"><span data-stu-id="aae51-173">You can then use these objects to construct a service proxy object that uses one of the other available constructors.</span></span>  

```csharp  
OrganizationServiceProxy (orgServiceManagement, authCredentials.ClientCredentials)
OrganizationServiceProxy (orgServiceManagement, authCredentials.SecurityTokenResponse)  
```

<span data-ttu-id="aae51-174">By caching the service management and authenticated credential objects, your application can more efficiently construct the service proxy objects more than one time per application session.</span><span class="sxs-lookup"><span data-stu-id="aae51-174">By caching the service management and authenticated credential objects, your application can more efficiently construct the service proxy objects more than one time per application session.</span></span> <span data-ttu-id="aae51-175">If you enable early-bound types on <xref:Microsoft.Xrm.Sdk.Client.OrganizationServiceProxy> through one of the <xref:Microsoft.Xrm.Sdk.Client.OrganizationServiceProxy.EnableProxyTypes> methods, you must do the same on all service proxies that are created from the cached <xref:Microsoft.Xrm.Sdk.Client.IServiceManagement`1> object.</span><span class="sxs-lookup"><span data-stu-id="aae51-175">If you enable early-bound types on <xref:Microsoft.Xrm.Sdk.Client.OrganizationServiceProxy> through one of the <xref:Microsoft.Xrm.Sdk.Client.OrganizationServiceProxy.EnableProxyTypes> methods, you must do the same on all service proxies that are created from the cached <xref:Microsoft.Xrm.Sdk.Client.IServiceManagement`1> object.</span></span> <span data-ttu-id="aae51-176">If your application uses the metadata, we recommend that it caches the metadata that it retrieves and periodically calls the <xref:Microsoft.Xrm.Sdk.Messages.RetrieveTimestampRequest> message to determine whether it must refresh the cache.</span><span class="sxs-lookup"><span data-stu-id="aae51-176">If your application uses the metadata, we recommend that it caches the metadata that it retrieves and periodically calls the <xref:Microsoft.Xrm.Sdk.Messages.RetrieveTimestampRequest> message to determine whether it must refresh the cache.</span></span>  

<span data-ttu-id="aae51-177">In addition, monitor your [!INCLUDE[pn_WCF_short](../includes/pn-wcf-short.md)] security token (<xref:Microsoft.Xrm.Sdk.Client.SecurityTokenResponse.Token>) and refresh it before it expires so that you do not lose the token and have to start over with authentication.</span><span class="sxs-lookup"><span data-stu-id="aae51-177">In addition, monitor your [!INCLUDE[pn_WCF_short](../includes/pn-wcf-short.md)] security token (<xref:Microsoft.Xrm.Sdk.Client.SecurityTokenResponse.Token>) and refresh it before it expires so that you do not lose the token and have to start over with authentication.</span></span> <span data-ttu-id="aae51-178">To check the token, create a custom class that inherits from the <xref:Microsoft.Xrm.Sdk.Client.OrganizationServiceProxy> or <xref:Microsoft.Xrm.Sdk.Client.DiscoveryServiceProxy> class and that implements the business logic to check the token.</span><span class="sxs-lookup"><span data-stu-id="aae51-178">To check the token, create a custom class that inherits from the <xref:Microsoft.Xrm.Sdk.Client.OrganizationServiceProxy> or <xref:Microsoft.Xrm.Sdk.Client.DiscoveryServiceProxy> class and that implements the business logic to check the token.</span></span> <span data-ttu-id="aae51-179">Or wrap the proxy classes in a new class.</span><span class="sxs-lookup"><span data-stu-id="aae51-179">Or wrap the proxy classes in a new class.</span></span> <span data-ttu-id="aae51-180">Another technique is to explicitly check the token before each call to the web service.</span><span class="sxs-lookup"><span data-stu-id="aae51-180">Another technique is to explicitly check the token before each call to the web service.</span></span> <span data-ttu-id="aae51-181">Example code that demonstrates these techniques can be found in the `ManagedTokenDiscoveryServiceProxy`, `ManagedTokenOrganizationServiceProxy`, and `AutoRefreshSecurityToken` classes in the [Helper Code: ServerConnection Class](org-service/helper-code-serverconnection-class.md) topic.</span><span class="sxs-lookup"><span data-stu-id="aae51-181">Example code that demonstrates these techniques can be found in the `ManagedTokenDiscoveryServiceProxy`, `ManagedTokenOrganizationServiceProxy`, and `AutoRefreshSecurityToken` classes in the [Helper Code: ServerConnection Class](org-service/helper-code-serverconnection-class.md) topic.</span></span>  

<a name="CustomizationBestPractices"></a>

## <a name="customization-best-practices"></a><span data-ttu-id="aae51-182">Customization best practices</span><span class="sxs-lookup"><span data-stu-id="aae51-182">Customization best practices</span></span>
 <span data-ttu-id="aae51-183">The following best practices can help you customize and extend [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps.</span><span class="sxs-lookup"><span data-stu-id="aae51-183">The following best practices can help you customize and extend [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps.</span></span>  

### <a name="best-practices-for-dynamics-365-for-customer-engagement-apps"></a><span data-ttu-id="aae51-184">Best practices for Dynamics 365 for Customer Engagement apps</span><span class="sxs-lookup"><span data-stu-id="aae51-184">Best practices for Dynamics 365 for Customer Engagement apps</span></span>

<span data-ttu-id="aae51-185">The [Microsoft Dynamics 365 for Customer Engagement apps patterns & principles for solution builders](http://go.microsoft.com/fwlink/p/?LinkID=533946) white paper download provides guidance specifically about building solutions using [!INCLUDE[pn_CRM_Online](../includes/pn-crm-online.md)].</span><span class="sxs-lookup"><span data-stu-id="aae51-185">The [Microsoft Dynamics 365 for Customer Engagement apps patterns & principles for solution builders](http://go.microsoft.com/fwlink/p/?LinkID=533946) white paper download provides guidance specifically about building solutions using [!INCLUDE[pn_CRM_Online](../includes/pn-crm-online.md)].</span></span>  

### <a name="using-custom-entities-and-attributes"></a><span data-ttu-id="aae51-186">Using custom entities and attributes</span><span class="sxs-lookup"><span data-stu-id="aae51-186">Using custom entities and attributes</span></span>

<span data-ttu-id="aae51-187">Always use the entity name to refer to entities in code and queries.</span><span class="sxs-lookup"><span data-stu-id="aae51-187">Always use the entity name to refer to entities in code and queries.</span></span> <span data-ttu-id="aae51-188">Do not use the object type code (also referred to as entity type) code because the integer value varies for custom entities in different organizations.</span><span class="sxs-lookup"><span data-stu-id="aae51-188">Do not use the object type code (also referred to as entity type) code because the integer value varies for custom entities in different organizations.</span></span>

 <span data-ttu-id="aae51-189">Save space on your server by using these techniques:</span><span class="sxs-lookup"><span data-stu-id="aae51-189">Save space on your server by using these techniques:</span></span>

- <span data-ttu-id="aae51-190">Create custom attributes for existing entities instead of creating a new entity.</span><span class="sxs-lookup"><span data-stu-id="aae51-190">Create custom attributes for existing entities instead of creating a new entity.</span></span>
- <span data-ttu-id="aae51-191">Rename existing entities to make the entities more meaningful.</span><span class="sxs-lookup"><span data-stu-id="aae51-191">Rename existing entities to make the entities more meaningful.</span></span>

### <a name="when-should-you-customize-an-entity"></a><span data-ttu-id="aae51-192">When should you customize an entity?</span><span class="sxs-lookup"><span data-stu-id="aae51-192">When should you customize an entity?</span></span>

<span data-ttu-id="aae51-193">Customize a system entity, such as the opportunity entity, instead of replacing it with a new custom entity so that you can use the any built-in features in an existing entity.</span><span class="sxs-lookup"><span data-stu-id="aae51-193">Customize a system entity, such as the opportunity entity, instead of replacing it with a new custom entity so that you can use the any built-in features in an existing entity.</span></span>

### <a name="when-to-use-plug-ins-vs-workflow"></a><span data-ttu-id="aae51-194">When to use plug-ins vs. workflow?</span><span class="sxs-lookup"><span data-stu-id="aae51-194">When to use plug-ins vs. workflow?</span></span>

<span data-ttu-id="aae51-195">As a developer who is interested in extending or customizing [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps, you can choose from several methods to perform your tasks.</span><span class="sxs-lookup"><span data-stu-id="aae51-195">As a developer who is interested in extending or customizing [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps, you can choose from several methods to perform your tasks.</span></span> <span data-ttu-id="aae51-196">In addition to adding client-side JavaScript code to a form or adding custom ASP.NET pages, you can write a plug-in or create a custom workflow by using the web interface that calls a custom workflow activity.</span><span class="sxs-lookup"><span data-stu-id="aae51-196">In addition to adding client-side JavaScript code to a form or adding custom ASP.NET pages, you can write a plug-in or create a custom workflow by using the web interface that calls a custom workflow activity.</span></span> <span data-ttu-id="aae51-197">How do you decide when to use a plug-in and when to use a workflow?</span><span class="sxs-lookup"><span data-stu-id="aae51-197">How do you decide when to use a plug-in and when to use a workflow?</span></span> <span data-ttu-id="aae51-198">The technology that you use depends on the task that you have to perform and who will author the customization.</span><span class="sxs-lookup"><span data-stu-id="aae51-198">The technology that you use depends on the task that you have to perform and who will author the customization.</span></span>  

<span data-ttu-id="aae51-199">For example, you must use a synchronous plug-in real-time workflow if you want to execute custom code immediately before or after the core platform operation executes and before the result of the operation is returned from the platform.</span><span class="sxs-lookup"><span data-stu-id="aae51-199">For example, you must use a synchronous plug-in real-time workflow if you want to execute custom code immediately before or after the core platform operation executes and before the result of the operation is returned from the platform.</span></span> <span data-ttu-id="aae51-200">You cannot use an asynchronous workflow or asynchronous plug-in in this situation because they are queued to execute after the core operation finishes executing.</span><span class="sxs-lookup"><span data-stu-id="aae51-200">You cannot use an asynchronous workflow or asynchronous plug-in in this situation because they are queued to execute after the core operation finishes executing.</span></span> <span data-ttu-id="aae51-201">Therefore, you cannot predict when they will run.</span><span class="sxs-lookup"><span data-stu-id="aae51-201">Therefore, you cannot predict when they will run.</span></span> <span data-ttu-id="aae51-202">If you want to add custom functionality to [!INCLUDE[pn_CRM_Online](../includes/pn-crm-online.md)] apps, workflows, custom workflow activities, and plug-ins are supported, but custom XAML workflows are not.</span><span class="sxs-lookup"><span data-stu-id="aae51-202">If you want to add custom functionality to [!INCLUDE[pn_CRM_Online](../includes/pn-crm-online.md)] apps, workflows, custom workflow activities, and plug-ins are supported, but custom XAML workflows are not.</span></span>

<span data-ttu-id="aae51-203">Evaluate these technologies and select the one that best suits your business objectives after you consider the deployment, performance, and maintenance concerns of your plug-in or workflow solution.</span><span class="sxs-lookup"><span data-stu-id="aae51-203">Evaluate these technologies and select the one that best suits your business objectives after you consider the deployment, performance, and maintenance concerns of your plug-in or workflow solution.</span></span>  

<span data-ttu-id="aae51-204">The following table summarizes the characteristics of plug-ins and workflows.</span><span class="sxs-lookup"><span data-stu-id="aae51-204">The following table summarizes the characteristics of plug-ins and workflows.</span></span>  


|<span data-ttu-id="aae51-205">Tiêu chí</span><span class="sxs-lookup"><span data-stu-id="aae51-205">Criteria</span></span>|<span data-ttu-id="aae51-206">Plug-in</span><span class="sxs-lookup"><span data-stu-id="aae51-206">Plug-in</span></span>|<span data-ttu-id="aae51-207">Quy trình</span><span class="sxs-lookup"><span data-stu-id="aae51-207">Workflow</span></span>|
|--|--|--|
|<span data-ttu-id="aae51-208">Execution before or after the core platform operation (Create, Update, Delete, and so on)</span><span class="sxs-lookup"><span data-stu-id="aae51-208">Execution before or after the core platform operation (Create, Update, Delete, and so on)</span></span>|<span data-ttu-id="aae51-209">Executes immediately before or after the core operation (synchronous).</span><span class="sxs-lookup"><span data-stu-id="aae51-209">Executes immediately before or after the core operation (synchronous).</span></span><br /><br /> <span data-ttu-id="aae51-210">Can also be queued to execute after the core operation (asynchronous).</span><span class="sxs-lookup"><span data-stu-id="aae51-210">Can also be queued to execute after the core operation (asynchronous).</span></span>|<span data-ttu-id="aae51-211">Asynchronous workflows are queued to execute after the core operation.</span><span class="sxs-lookup"><span data-stu-id="aae51-211">Asynchronous workflows are queued to execute after the core operation.</span></span><br /><br /> <span data-ttu-id="aae51-212">Real-time workflows have similar characteristics to plug-ins.</span><span class="sxs-lookup"><span data-stu-id="aae51-212">Real-time workflows have similar characteristics to plug-ins.</span></span>|
|<span data-ttu-id="aae51-213">Performance impact on the server</span><span class="sxs-lookup"><span data-stu-id="aae51-213">Performance impact on the server</span></span>| <span data-ttu-id="aae51-214">Synchronous plug-ins can increase the platform response time because they are part of the main platform processing.</span><span class="sxs-lookup"><span data-stu-id="aae51-214">Synchronous plug-ins can increase the platform response time because they are part of the main platform processing.</span></span><br /><br /> <span data-ttu-id="aae51-215">Asynchronous plug-ins have less impact on server response time because the code is run in a different process.</span><span class="sxs-lookup"><span data-stu-id="aae51-215">Asynchronous plug-ins have less impact on server response time because the code is run in a different process.</span></span> |<span data-ttu-id="aae51-216">Asynchronous workflows have less impact on server response time because the code is run in a different process.</span><span class="sxs-lookup"><span data-stu-id="aae51-216">Asynchronous workflows have less impact on server response time because the code is run in a different process.</span></span><br /><br /> <span data-ttu-id="aae51-217">Real-time workflows have similar performance characteristics to sandboxed plug-ins.</span><span class="sxs-lookup"><span data-stu-id="aae51-217">Real-time workflows have similar performance characteristics to sandboxed plug-ins.</span></span>  |
| <span data-ttu-id="aae51-218">Security restrictions</span><span class="sxs-lookup"><span data-stu-id="aae51-218">Security restrictions</span></span>|<span data-ttu-id="aae51-219">To register a plug-in with the platform requires a System Administrator or System Customizer security role and membership in the Deployment Administrator group.</span><span class="sxs-lookup"><span data-stu-id="aae51-219">To register a plug-in with the platform requires a System Administrator or System Customizer security role and membership in the Deployment Administrator group.</span></span>|<span data-ttu-id="aae51-220">Users can interactively create workflows in the web application.</span><span class="sxs-lookup"><span data-stu-id="aae51-220">Users can interactively create workflows in the web application.</span></span><br /><br /> <span data-ttu-id="aae51-221">However, to register a custom workflow activity, the deploying user must have the same security roles as those required for registering plug-ins.</span><span class="sxs-lookup"><span data-stu-id="aae51-221">However, to register a custom workflow activity, the deploying user must have the same security roles as those required for registering plug-ins.</span></span>|
|[!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] <span data-ttu-id="aae51-222">apps version (SKU) support</span><span class="sxs-lookup"><span data-stu-id="aae51-222">apps version (SKU) support</span></span> | <span data-ttu-id="aae51-223">Supported in [!INCLUDE[pn_CRM_Online](../includes/pn-crm-online.md)] apps when registered in the sandbox.</span><span class="sxs-lookup"><span data-stu-id="aae51-223">Supported in [!INCLUDE[pn_CRM_Online](../includes/pn-crm-online.md)] apps when registered in the sandbox.</span></span> <span data-ttu-id="aae51-224">May be supported in partner-hosted installations at the discretion of the partner.</span><span class="sxs-lookup"><span data-stu-id="aae51-224">May be supported in partner-hosted installations at the discretion of the partner.</span></span>|<span data-ttu-id="aae51-225">Workflows are supported by all [!INCLUDE[pn_crm_shortest](../includes/pn-crm-shortest.md)] apps deployment.</span><span class="sxs-lookup"><span data-stu-id="aae51-225">Workflows are supported by all [!INCLUDE[pn_crm_shortest](../includes/pn-crm-shortest.md)] apps deployment.</span></span> <span data-ttu-id="aae51-226">Custom workflow activities are  supported in the sandbox of [!INCLUDE[pn_CRM_Online](../includes/pn-crm-online.md)] apps, and in or outside the sandbox for on-premises/IFD deployments.</span><span class="sxs-lookup"><span data-stu-id="aae51-226">Custom workflow activities are  supported in the sandbox of [!INCLUDE[pn_CRM_Online](../includes/pn-crm-online.md)] apps, and in or outside the sandbox for on-premises/IFD deployments.</span></span> |
|<span data-ttu-id="aae51-227">Length of processing time</span><span class="sxs-lookup"><span data-stu-id="aae51-227">Length of processing time</span></span> |<span data-ttu-id="aae51-228">A plug-in registered for synchronous or asynchronous execution is restricted to complete its execution in a two-minute time limit.</span><span class="sxs-lookup"><span data-stu-id="aae51-228">A plug-in registered for synchronous or asynchronous execution is restricted to complete its execution in a two-minute time limit.</span></span> |  <span data-ttu-id="aae51-229">Works well for either short or long processes.</span><span class="sxs-lookup"><span data-stu-id="aae51-229">Works well for either short or long processes.</span></span> <span data-ttu-id="aae51-230">However, each activity in a workflow cannot take longer than two minutes to complete.</span><span class="sxs-lookup"><span data-stu-id="aae51-230">However, each activity in a workflow cannot take longer than two minutes to complete.</span></span>  |
| <span data-ttu-id="aae51-231">Works when the [!INCLUDE[pn_crm_for_outlook_short](../includes/pn-crm-for-outlook-short.md)] client is offline</span><span class="sxs-lookup"><span data-stu-id="aae51-231">Works when the [!INCLUDE[pn_crm_for_outlook_short](../includes/pn-crm-for-outlook-short.md)] client is offline</span></span> |<span data-ttu-id="aae51-232">Both online and offline are supported.</span><span class="sxs-lookup"><span data-stu-id="aae51-232">Both online and offline are supported.</span></span> |<span data-ttu-id="aae51-233">Workflows do not execute when offline.</span><span class="sxs-lookup"><span data-stu-id="aae51-233">Workflows do not execute when offline.</span></span> |
|<span data-ttu-id="aae51-234">Process and data persistence</span><span class="sxs-lookup"><span data-stu-id="aae51-234">Process and data persistence</span></span>|  <span data-ttu-id="aae51-235">Plug-ins execute until they are completed.</span><span class="sxs-lookup"><span data-stu-id="aae51-235">Plug-ins execute until they are completed.</span></span> <span data-ttu-id="aae51-236">Plug-ins must be written to be stateless where no in-memory data is persisted.</span><span class="sxs-lookup"><span data-stu-id="aae51-236">Plug-ins must be written to be stateless where no in-memory data is persisted.</span></span>| <span data-ttu-id="aae51-237">Asynchronous workflows can be paused, postponed, canceled, and resumed through SDK calls or by the user through the web application.</span><span class="sxs-lookup"><span data-stu-id="aae51-237">Asynchronous workflows can be paused, postponed, canceled, and resumed through SDK calls or by the user through the web application.</span></span> <span data-ttu-id="aae51-238">The state of the workflow is automatically saved before it is paused or postponed.</span><span class="sxs-lookup"><span data-stu-id="aae51-238">The state of the workflow is automatically saved before it is paused or postponed.</span></span><br /><br /> <span data-ttu-id="aae51-239">Real-time workflows cannot have any wait states.</span><span class="sxs-lookup"><span data-stu-id="aae51-239">Real-time workflows cannot have any wait states.</span></span> <span data-ttu-id="aae51-240">They must execute to completion just like plug-ins.</span><span class="sxs-lookup"><span data-stu-id="aae51-240">They must execute to completion just like plug-ins.</span></span> |
|<span data-ttu-id="aae51-241">Impersonation</span><span class="sxs-lookup"><span data-stu-id="aae51-241">Impersonation</span></span> | <span data-ttu-id="aae51-242">Plug-ins can perform data operations on behalf of another system user.</span><span class="sxs-lookup"><span data-stu-id="aae51-242">Plug-ins can perform data operations on behalf of another system user.</span></span>  | <span data-ttu-id="aae51-243">Asynchronous workflows cannot use impersonation, while real-time workflows can.</span><span class="sxs-lookup"><span data-stu-id="aae51-243">Asynchronous workflows cannot use impersonation, while real-time workflows can.</span></span> <span data-ttu-id="aae51-244">Real-time workflows can execute either as the owner of the workflow or as the calling user.</span><span class="sxs-lookup"><span data-stu-id="aae51-244">Real-time workflows can execute either as the owner of the workflow or as the calling user.</span></span>|
| <span data-ttu-id="aae51-245">Authoring</span><span class="sxs-lookup"><span data-stu-id="aae51-245">Authoring</span></span>|  <span data-ttu-id="aae51-246">Software engineers or programmers can author plug-ins.</span><span class="sxs-lookup"><span data-stu-id="aae51-246">Software engineers or programmers can author plug-ins.</span></span>  |<span data-ttu-id="aae51-247">Anyone, including an end user, business analyst, or administrator can author workflows if they have the proper permissions.</span><span class="sxs-lookup"><span data-stu-id="aae51-247">Anyone, including an end user, business analyst, or administrator can author workflows if they have the proper permissions.</span></span>|

<span data-ttu-id="aae51-248">There is no significant performance impact on the server between an asynchronous plug-in and a workflow.</span><span class="sxs-lookup"><span data-stu-id="aae51-248">There is no significant performance impact on the server between an asynchronous plug-in and a workflow.</span></span>

### <a name="what-type-of-workflow-is-better"></a><span data-ttu-id="aae51-249">What type of workflow is better?</span><span class="sxs-lookup"><span data-stu-id="aae51-249">What type of workflow is better?</span></span>

<span data-ttu-id="aae51-250">From a performance perspective, is it better to create a single long workflow or is it better to have multiple child workflows and call them in one parent workflow?</span><span class="sxs-lookup"><span data-stu-id="aae51-250">From a performance perspective, is it better to create a single long workflow or is it better to have multiple child workflows and call them in one parent workflow?</span></span> <span data-ttu-id="aae51-251">The child workflow approach achieves lower throughput, but it is more manageable if you frequently change your workflow definition.</span><span class="sxs-lookup"><span data-stu-id="aae51-251">The child workflow approach achieves lower throughput, but it is more manageable if you frequently change your workflow definition.</span></span> <span data-ttu-id="aae51-252">Compilation overhead is not a major concern because the workflow is compiled only during publishing.</span><span class="sxs-lookup"><span data-stu-id="aae51-252">Compilation overhead is not a major concern because the workflow is compiled only during publishing.</span></span> <span data-ttu-id="aae51-253">However, [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps incurs overhead when it starts each workflow instance.</span><span class="sxs-lookup"><span data-stu-id="aae51-253">However, [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps incurs overhead when it starts each workflow instance.</span></span> <span data-ttu-id="aae51-254">The overhead occurs when all entities that are used in the workflow are retrieved and the child workflow is started in a two-step process that includes a 'Workflow Expansion Task' and the actual workflow instance.</span><span class="sxs-lookup"><span data-stu-id="aae51-254">The overhead occurs when all entities that are used in the workflow are retrieved and the child workflow is started in a two-step process that includes a 'Workflow Expansion Task' and the actual workflow instance.</span></span> <span data-ttu-id="aae51-255">Therefore, for maximum throughput, use a single long workflow.</span><span class="sxs-lookup"><span data-stu-id="aae51-255">Therefore, for maximum throughput, use a single long workflow.</span></span>  

### <a name="how-should-you-mark-your-custom-workflow-activity-as-completed"></a><span data-ttu-id="aae51-256">How should you mark your custom workflow activity as completed?</span><span class="sxs-lookup"><span data-stu-id="aae51-256">How should you mark your custom workflow activity as completed?</span></span>

<span data-ttu-id="aae51-257">The return value from the `Execute` method is used by the workflow runtime to mark the activity as “completed.”</span><span class="sxs-lookup"><span data-stu-id="aae51-257">The return value from the `Execute` method is used by the workflow runtime to mark the activity as “completed.”</span></span> <span data-ttu-id="aae51-258">You should use `return base.Execute(executionContext)` unless the activity bypasses base class functionality.</span><span class="sxs-lookup"><span data-stu-id="aae51-258">You should use `return base.Execute(executionContext)` unless the activity bypasses base class functionality.</span></span> <span data-ttu-id="aae51-259">Avoid returning `ActivityExecutionStatus.Closed`.</span><span class="sxs-lookup"><span data-stu-id="aae51-259">Avoid returning `ActivityExecutionStatus.Closed`.</span></span> 
[!INCLUDE[proc_more_information](../includes/proc-more-information.md)] <span data-ttu-id="aae51-260">[ActivityExecutionStatus Enumeration](https://msdn.microsoft.com/library/system.workflow.componentmodel.activityexecutionstatus.aspx)</span><span class="sxs-lookup"><span data-stu-id="aae51-260">[ActivityExecutionStatus Enumeration](https://msdn.microsoft.com/library/system.workflow.componentmodel.activityexecutionstatus.aspx)</span></span>  

<a name="how-to-report-exceptions-custom-workflow-activities"></a> 
### <a name="how-should-you-report-exceptions-in-custom-workflow-activities"></a><span data-ttu-id="aae51-261">How should you report exceptions in custom workflow activities?</span><span class="sxs-lookup"><span data-stu-id="aae51-261">How should you report exceptions in custom workflow activities?</span></span>

<span data-ttu-id="aae51-262">You should throw an <xref:Microsoft.Xrm.Sdk.InvalidPluginExecutionException> in your code.</span><span class="sxs-lookup"><span data-stu-id="aae51-262">You should throw an <xref:Microsoft.Xrm.Sdk.InvalidPluginExecutionException> in your code.</span></span> <span data-ttu-id="aae51-263">This error will be shown in the workflow instance form.</span><span class="sxs-lookup"><span data-stu-id="aae51-263">This error will be shown in the workflow instance form.</span></span>

### <a name="can-you-define-custom-entities-that-are-specific-to-business-units"></a><span data-ttu-id="aae51-264">Can you define custom entities that are specific to business units?</span><span class="sxs-lookup"><span data-stu-id="aae51-264">Can you define custom entities that are specific to business units?</span></span>

<span data-ttu-id="aae51-265">Custom entities have privileges for each security role but not for each business unit.</span><span class="sxs-lookup"><span data-stu-id="aae51-265">Custom entities have privileges for each security role but not for each business unit.</span></span> <span data-ttu-id="aae51-266">To define custom entities that are visible only to specified business units, you must create different security roles for each business unit and grant privileges to the custom entity in the appropriate role.</span><span class="sxs-lookup"><span data-stu-id="aae51-266">To define custom entities that are visible only to specified business units, you must create different security roles for each business unit and grant privileges to the custom entity in the appropriate role.</span></span>

<a name="Security"></a>

## <a name="security-best-practices"></a><span data-ttu-id="aae51-267">Security best practices</span><span class="sxs-lookup"><span data-stu-id="aae51-267">Security best practices</span></span>

<span data-ttu-id="aae51-268">Follow these guidelines to help protect your business data.</span><span class="sxs-lookup"><span data-stu-id="aae51-268">Follow these guidelines to help protect your business data.</span></span>

### <a name="general"></a><span data-ttu-id="aae51-269">Chung</span><span class="sxs-lookup"><span data-stu-id="aae51-269">General</span></span>
<span data-ttu-id="aae51-270">Best practices for securing your implementation of [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps include the following:</span><span class="sxs-lookup"><span data-stu-id="aae51-270">Best practices for securing your implementation of [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps include the following:</span></span>

- <span data-ttu-id="aae51-271">Establish an approved security data plan for your organization's [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps implementation.</span><span class="sxs-lookup"><span data-stu-id="aae51-271">Establish an approved security data plan for your organization's [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps implementation.</span></span>  
- <span data-ttu-id="aae51-272">Assign the least privileges required when you set up your application pool.</span><span class="sxs-lookup"><span data-stu-id="aae51-272">Assign the least privileges required when you set up your application pool.</span></span>  
- <span data-ttu-id="aae51-273">Require that all users use strong passwords for their accounts.</span><span class="sxs-lookup"><span data-stu-id="aae51-273">Require that all users use strong passwords for their accounts.</span></span>

<!-- This is an on-prem topic, not yet migrated. Put in a different link for a placeholder
[!INCLUDE[proc_more_information](../includes/proc-more-information.md)] [Security Considerations for Dynamics 365 for Customer Engagement](https://technet.microsoft.com/en-us/library/hh699825.aspx)  
-->
[!INCLUDE[proc_more_information](../includes/proc-more-information.md)] <span data-ttu-id="aae51-274">[Security Concepts for Dynamics 365 for Customer Engagement apps](../admin/security-concepts.md)</span><span class="sxs-lookup"><span data-stu-id="aae51-274">[Security Concepts for Dynamics 365 for Customer Engagement apps](../admin/security-concepts.md)</span></span>  

### <a name="roles-privileges-and-access-rights"></a><span data-ttu-id="aae51-275">Roles, privileges, and access rights</span><span class="sxs-lookup"><span data-stu-id="aae51-275">Roles, privileges, and access rights</span></span>

<span data-ttu-id="aae51-276">Best practices for use of the [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps security model include the following:</span><span class="sxs-lookup"><span data-stu-id="aae51-276">Best practices for use of the [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps security model include the following:</span></span>

- <span data-ttu-id="aae51-277">Strictly limit the number of people assigned the System Administrator role.</span><span class="sxs-lookup"><span data-stu-id="aae51-277">Strictly limit the number of people assigned the System Administrator role.</span></span> <span data-ttu-id="aae51-278">Never remove this role.</span><span class="sxs-lookup"><span data-stu-id="aae51-278">Never remove this role.</span></span>  
- <span data-ttu-id="aae51-279">Create roles according to the security best practice of least privilege, providing access to the minimum amount of business data required for the task.</span><span class="sxs-lookup"><span data-stu-id="aae51-279">Create roles according to the security best practice of least privilege, providing access to the minimum amount of business data required for the task.</span></span> <span data-ttu-id="aae51-280">Assign users the appropriate role for their job.</span><span class="sxs-lookup"><span data-stu-id="aae51-280">Assign users the appropriate role for their job.</span></span>
- <span data-ttu-id="aae51-281">Create a new role with those specific privileges and add the user to the new role if a user needs additional access levels or rights.</span><span class="sxs-lookup"><span data-stu-id="aae51-281">Create a new role with those specific privileges and add the user to the new role if a user needs additional access levels or rights.</span></span> <span data-ttu-id="aae51-282">A user's rights are the union of all the roles to which he or she has been assigned.</span><span class="sxs-lookup"><span data-stu-id="aae51-282">A user's rights are the union of all the roles to which he or she has been assigned.</span></span> <span data-ttu-id="aae51-283">Do not grant the original role privileges that are needed by only one or several members.</span><span class="sxs-lookup"><span data-stu-id="aae51-283">Do not grant the original role privileges that are needed by only one or several members.</span></span>  
- <span data-ttu-id="aae51-284">Use sharing, when appropriate, to give specific users specific rights on individual objects, instead of broader privileges on all objects of a given type.</span><span class="sxs-lookup"><span data-stu-id="aae51-284">Use sharing, when appropriate, to give specific users specific rights on individual objects, instead of broader privileges on all objects of a given type.</span></span>
- <span data-ttu-id="aae51-285">Use teams to create cross-functional groups so that specific objects can be shared with the team.</span><span class="sxs-lookup"><span data-stu-id="aae51-285">Use teams to create cross-functional groups so that specific objects can be shared with the team.</span></span>  
- <span data-ttu-id="aae51-286">Train users who have sharing access rights to share the minimum information needed.</span><span class="sxs-lookup"><span data-stu-id="aae51-286">Train users who have sharing access rights to share the minimum information needed.</span></span>  

### <a name="avoid-elevation-of-privilege"></a><span data-ttu-id="aae51-287">Avoid elevation of privilege</span><span class="sxs-lookup"><span data-stu-id="aae51-287">Avoid elevation of privilege</span></span>

<span data-ttu-id="aae51-288">Elevation of privilege attacks occur when a user can assume the privileges of a trusted account, such as an owner or administrator.</span><span class="sxs-lookup"><span data-stu-id="aae51-288">Elevation of privilege attacks occur when a user can assume the privileges of a trusted account, such as an owner or administrator.</span></span> <span data-ttu-id="aae51-289">Always run under least-privileged user accounts and assign only needed permissions.</span><span class="sxs-lookup"><span data-stu-id="aae51-289">Always run under least-privileged user accounts and assign only needed permissions.</span></span> <span data-ttu-id="aae51-290">Avoid using administrative or owner accounts for executing code.</span><span class="sxs-lookup"><span data-stu-id="aae51-290">Avoid using administrative or owner accounts for executing code.</span></span> <span data-ttu-id="aae51-291">This limits the amount of damage that can occur if an attack succeeds.</span><span class="sxs-lookup"><span data-stu-id="aae51-291">This limits the amount of damage that can occur if an attack succeeds.</span></span> <span data-ttu-id="aae51-292">When performing tasks that require additional permissions, use procedure signing or impersonation only for the duration of the task.</span><span class="sxs-lookup"><span data-stu-id="aae51-292">When performing tasks that require additional permissions, use procedure signing or impersonation only for the duration of the task.</span></span>  

### <a name="server-side-development"></a><span data-ttu-id="aae51-293">Server-side development</span><span class="sxs-lookup"><span data-stu-id="aae51-293">Server-side development</span></span>

<span data-ttu-id="aae51-294">Best practices for developing server-side code for [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps include the following:</span><span class="sxs-lookup"><span data-stu-id="aae51-294">Best practices for developing server-side code for [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps include the following:</span></span>

- <span data-ttu-id="aae51-295">Do not modify the [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps database by any means other than using the SDK because this bypasses the [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps security model.</span><span class="sxs-lookup"><span data-stu-id="aae51-295">Do not modify the [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps database by any means other than using the SDK because this bypasses the [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps security model.</span></span>
- <span data-ttu-id="aae51-296">Plug-ins are running in an administrator's context – you should know that this code may access information that the logged-on user does not have access to.</span><span class="sxs-lookup"><span data-stu-id="aae51-296">Plug-ins are running in an administrator's context – you should know that this code may access information that the logged-on user does not have access to.</span></span>
- <span data-ttu-id="aae51-297">For workflow assemblies, and plug-ins, avoid writing code that takes a long time to execute.</span><span class="sxs-lookup"><span data-stu-id="aae51-297">For workflow assemblies, and plug-ins, avoid writing code that takes a long time to execute.</span></span> <span data-ttu-id="aae51-298">It is important that plug-in code that is registered to execute synchronously returns as quickly as possible.</span><span class="sxs-lookup"><span data-stu-id="aae51-298">It is important that plug-in code that is registered to execute synchronously returns as quickly as possible.</span></span>
- <span data-ttu-id="aae51-299">If you are replicating [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps data in your own data store, you are responsible for the security of the data.</span><span class="sxs-lookup"><span data-stu-id="aae51-299">If you are replicating [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps data in your own data store, you are responsible for the security of the data.</span></span> <span data-ttu-id="aae51-300">If you use a plug-in to transmit the data, make sure that you register the plug-in to execute after the core platform operation.</span><span class="sxs-lookup"><span data-stu-id="aae51-300">If you use a plug-in to transmit the data, make sure that you register the plug-in to execute after the core platform operation.</span></span> <span data-ttu-id="aae51-301">Security privilege checks for the logged-on user occur during the core platform operation.</span><span class="sxs-lookup"><span data-stu-id="aae51-301">Security privilege checks for the logged-on user occur during the core platform operation.</span></span>
- <span data-ttu-id="aae51-302">Data that comes out of [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps might not be safe for rendering.</span><span class="sxs-lookup"><span data-stu-id="aae51-302">Data that comes out of [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps might not be safe for rendering.</span></span> <span data-ttu-id="aae51-303">Data may have been injected with HTML tags that are not secure.</span><span class="sxs-lookup"><span data-stu-id="aae51-303">Data may have been injected with HTML tags that are not secure.</span></span>
- <span data-ttu-id="aae51-304">Adhere to the requirement of not accessing [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps databases directly through [!INCLUDE[pn_SQL_Server_short](../includes/pn-sql-server-short.md)] Enterprise Manager.</span><span class="sxs-lookup"><span data-stu-id="aae51-304">Adhere to the requirement of not accessing [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps databases directly through [!INCLUDE[pn_SQL_Server_short](../includes/pn-sql-server-short.md)] Enterprise Manager.</span></span> <span data-ttu-id="aae51-305">Bypassing the SDK can open you up to SQL injection threats.</span><span class="sxs-lookup"><span data-stu-id="aae51-305">Bypassing the SDK can open you up to SQL injection threats.</span></span>
- <span data-ttu-id="aae51-306">For Internet facing deployments, remember that your solution is only as secure as the weakest link.</span><span class="sxs-lookup"><span data-stu-id="aae51-306">For Internet facing deployments, remember that your solution is only as secure as the weakest link.</span></span> <span data-ttu-id="aae51-307">After your application is exposed to the Internet, it is open to security threats.</span><span class="sxs-lookup"><span data-stu-id="aae51-307">After your application is exposed to the Internet, it is open to security threats.</span></span>  
- <span data-ttu-id="aae51-308">Use only languages that produce managed code for the best security from buffer overruns, exceptions, and so on.</span><span class="sxs-lookup"><span data-stu-id="aae51-308">Use only languages that produce managed code for the best security from buffer overruns, exceptions, and so on.</span></span>

<span data-ttu-id="aae51-309">For more information about security, see the following topics:</span><span class="sxs-lookup"><span data-stu-id="aae51-309">For more information about security, see the following topics:</span></span>

- [<span data-ttu-id="aae51-310">Security in Visual Studio</span><span class="sxs-lookup"><span data-stu-id="aae51-310">Security in Visual Studio</span></span>](https://msdn.microsoft.com/library/4cftbc6c.aspx)
- [<span data-ttu-id="aae51-311">Secure Coding Guidelines for the .NET Framework</span><span class="sxs-lookup"><span data-stu-id="aae51-311">Secure Coding Guidelines for the .NET Framework</span></span>](https://msdn.microsoft.com/library/8a3x2b7f.aspx)
- [<span data-ttu-id="aae51-312">Securing ASP.NET Web Sites</span><span class="sxs-lookup"><span data-stu-id="aae51-312">Securing ASP.NET Web Sites</span></span>](https://msdn.microsoft.com/library/91f66yxt.aspx)

### <a name="client-side-development"></a><span data-ttu-id="aae51-313">Client-side development</span><span class="sxs-lookup"><span data-stu-id="aae51-313">Client-side development</span></span>

<span data-ttu-id="aae51-314">Best practices for developing customizations for the [!INCLUDE[pn_crm_shortest](../includes/pn-crm-shortest.md)] apps web application and [!INCLUDE[pn_crm_for_outlook_full](../includes/pn-crm-for-outlook-full.md)] include the following:</span><span class="sxs-lookup"><span data-stu-id="aae51-314">Best practices for developing customizations for the [!INCLUDE[pn_crm_shortest](../includes/pn-crm-shortest.md)] apps web application and [!INCLUDE[pn_crm_for_outlook_full](../includes/pn-crm-for-outlook-full.md)] include the following:</span></span>

- <span data-ttu-id="aae51-315">Use web resources instead of pages that require server-side processing whenever possible.</span><span class="sxs-lookup"><span data-stu-id="aae51-315">Use web resources instead of pages that require server-side processing whenever possible.</span></span> <span data-ttu-id="aae51-316">If your requirements can only be achieved by using server-side processing, adhere to the requirement that your custom webpages are installed in a separate website from [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps.</span><span class="sxs-lookup"><span data-stu-id="aae51-316">If your requirements can only be achieved by using server-side processing, adhere to the requirement that your custom webpages are installed in a separate website from [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps.</span></span> <span data-ttu-id="aae51-317">Set the trust level for your site appropriately, depending on your confidence level in the security of your code.</span><span class="sxs-lookup"><span data-stu-id="aae51-317">Set the trust level for your site appropriately, depending on your confidence level in the security of your code.</span></span> <span data-ttu-id="aae51-318">This reduces the threat from cross-site scripting and other threats.</span><span class="sxs-lookup"><span data-stu-id="aae51-318">This reduces the threat from cross-site scripting and other threats.</span></span>  
- <span data-ttu-id="aae51-319">For improved security, make sure that your separate website runs on a different account from [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps.</span><span class="sxs-lookup"><span data-stu-id="aae51-319">For improved security, make sure that your separate website runs on a different account from [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps.</span></span> <span data-ttu-id="aae51-320">This account should have the minimum access possible and one that does not have direct access to the Microsoft databases.</span><span class="sxs-lookup"><span data-stu-id="aae51-320">This account should have the minimum access possible and one that does not have direct access to the Microsoft databases.</span></span> <span data-ttu-id="aae51-321">You can use a complex password that doesn’t expire because no person signs in to this account – only in to your application.</span><span class="sxs-lookup"><span data-stu-id="aae51-321">You can use a complex password that doesn’t expire because no person signs in to this account – only in to your application.</span></span>
- <span data-ttu-id="aae51-322">Avoid use of [!INCLUDE[pn_ms_ActiveX_short](../includes/pn-ms-activex-short.md)] controls because they have known security problems.</span><span class="sxs-lookup"><span data-stu-id="aae51-322">Avoid use of [!INCLUDE[pn_ms_ActiveX_short](../includes/pn-ms-activex-short.md)] controls because they have known security problems.</span></span>
- <span data-ttu-id="aae51-323">Be aware of the limitations of client scripting.</span><span class="sxs-lookup"><span data-stu-id="aae51-323">Be aware of the limitations of client scripting.</span></span> [!INCLUDE[proc_more_information](../includes/proc-more-information.md)] <span data-ttu-id="aae51-324">[Best practices: Client scripting in Customer Engagement](clientapi/client-scripting-best-practices.md)</span><span class="sxs-lookup"><span data-stu-id="aae51-324">[Best practices: Client scripting in Customer Engagement](clientapi/client-scripting-best-practices.md)</span></span>
- <span data-ttu-id="aae51-325">Use plug-ins to apply business logic regardless of how the data changes are made.</span><span class="sxs-lookup"><span data-stu-id="aae51-325">Use plug-ins to apply business logic regardless of how the data changes are made.</span></span>
- <span data-ttu-id="aae51-326">Always use a confirmation dialog box when you delete records or apply sensitive changes, such as adding a new user to a security role.</span><span class="sxs-lookup"><span data-stu-id="aae51-326">Always use a confirmation dialog box when you delete records or apply sensitive changes, such as adding a new user to a security role.</span></span> <span data-ttu-id="aae51-327">You can use  [openConfirmDialog](clientapi/reference/Xrm-Navigation/openConfirmDialog.md) to display a dialog.</span><span class="sxs-lookup"><span data-stu-id="aae51-327">You can use  [openConfirmDialog](clientapi/reference/Xrm-Navigation/openConfirmDialog.md) to display a dialog.</span></span> <span data-ttu-id="aae51-328">This helps prevent techniques such as click-jacking or UI redressing where a malicious developer may embed your page in a seemingly innocuous page to trick a user into performing actions that may compromise security or perform unwanted actions on data.</span><span class="sxs-lookup"><span data-stu-id="aae51-328">This helps prevent techniques such as click-jacking or UI redressing where a malicious developer may embed your page in a seemingly innocuous page to trick a user into performing actions that may compromise security or perform unwanted actions on data.</span></span>  

### <a name="security-best-practices-for-your-website-include-the-following"></a><span data-ttu-id="aae51-329">Security best practices for your website include the following:</span><span class="sxs-lookup"><span data-stu-id="aae51-329">Security best practices for your website include the following:</span></span>

- <span data-ttu-id="aae51-330">Don’t use anonymous access.</span><span class="sxs-lookup"><span data-stu-id="aae51-330">Don’t use anonymous access.</span></span>  
- <span data-ttu-id="aae51-331">Use integrated Windows authentication, NTLM, or Basic authentication over Transport Layer Security (TLS) or Secure Sockets Layer (SSL).</span><span class="sxs-lookup"><span data-stu-id="aae51-331">Use integrated Windows authentication, NTLM, or Basic authentication over Transport Layer Security (TLS) or Secure Sockets Layer (SSL).</span></span>  
- <span data-ttu-id="aae51-332">Use [!INCLUDE[pn_ssl_short](../includes/pn-ssl-short.md)] to avoid sending unencrypted data over the network if your website is on a different computer than [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps.</span><span class="sxs-lookup"><span data-stu-id="aae51-332">Use [!INCLUDE[pn_ssl_short](../includes/pn-ssl-short.md)] to avoid sending unencrypted data over the network if your website is on a different computer than [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps.</span></span>  

  <span data-ttu-id="aae51-333">For more information, see the following:</span><span class="sxs-lookup"><span data-stu-id="aae51-333">For more information, see the following:</span></span>  

- [<span data-ttu-id="aae51-334">Overview of Web Application Security Threats</span><span class="sxs-lookup"><span data-stu-id="aae51-334">Overview of Web Application Security Threats</span></span>](https://msdn.microsoft.com/library/f13d73y6.aspx)  
- [<span data-ttu-id="aae51-335">Download: Microsoft Anti-Cross Site Scripting Library V4.2</span><span class="sxs-lookup"><span data-stu-id="aae51-335">Download: Microsoft Anti-Cross Site Scripting Library V4.2</span></span>](http://www.microsoft.com/download/details.aspx?id=28589)  
- [<span data-ttu-id="aae51-336">ASP.NET Web Application Security</span><span class="sxs-lookup"><span data-stu-id="aae51-336">ASP.NET Web Application Security</span></span>](https://msdn.microsoft.com/library/330a99hc.aspx)  
- <span data-ttu-id="aae51-337">[Introduction to Web Application Security](https://msdn.microsoft.com/library/aa711426\(VS.71\).aspx)</span><span class="sxs-lookup"><span data-stu-id="aae51-337">[Introduction to Web Application Security](https://msdn.microsoft.com/library/aa711426\(VS.71\).aspx)</span></span>  

<a name="ISV"></a>

## <a name="isv-extensibility-best-practices"></a><span data-ttu-id="aae51-338">ISV extensibility best practices</span><span class="sxs-lookup"><span data-stu-id="aae51-338">ISV extensibility best practices</span></span>

<span data-ttu-id="aae51-339">One of the key tenets of ISV extensibility is that you should not assume that your ISV solution is the only one installed.</span><span class="sxs-lookup"><span data-stu-id="aae51-339">One of the key tenets of ISV extensibility is that you should not assume that your ISV solution is the only one installed.</span></span> <span data-ttu-id="aae51-340">The following is a list of best practices to follow.</span><span class="sxs-lookup"><span data-stu-id="aae51-340">The following is a list of best practices to follow.</span></span>  

### <a name="best-practices-for-using-the-dynamics-365-for-customer-engagement-web-services"></a><span data-ttu-id="aae51-341">Best practices for using the Dynamics 365 for Customer Engagement web services</span><span class="sxs-lookup"><span data-stu-id="aae51-341">Best practices for using the Dynamics 365 for Customer Engagement web services</span></span>

<span data-ttu-id="aae51-342">You should put the [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] web service URLs into a configuration file, for example, into an app.config file, so that your code is isolated from changes to the URL.</span><span class="sxs-lookup"><span data-stu-id="aae51-342">You should put the [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] web service URLs into a configuration file, for example, into an app.config file, so that your code is isolated from changes to the URL.</span></span> <span data-ttu-id="aae51-343">For example, there are different URLs for the [!INCLUDE[pn_CRM_Online](../includes/pn-crm-online.md)] apps data centers throughout the world.</span><span class="sxs-lookup"><span data-stu-id="aae51-343">For example, there are different URLs for the [!INCLUDE[pn_CRM_Online](../includes/pn-crm-online.md)] apps data centers throughout the world.</span></span>  

### <a name="where-should-you-put-plug-ins-and-custom-workflow-activities"></a><span data-ttu-id="aae51-344">Where should you put plug-ins and custom workflow activities?</span><span class="sxs-lookup"><span data-stu-id="aae51-344">Where should you put plug-ins and custom workflow activities?</span></span>

<span data-ttu-id="aae51-345">For on-disk plug-ins or custom workflow activities, place the assemblies in the `<installdir>\Server\bin\assembly` folder.</span><span class="sxs-lookup"><span data-stu-id="aae51-345">For on-disk plug-ins or custom workflow activities, place the assemblies in the `<installdir>\Server\bin\assembly` folder.</span></span>

### <a name="where-should-you-put-your-custom-web-applications-or-webpages"></a><span data-ttu-id="aae51-346">Where should you put your custom web applications or webpages?</span><span class="sxs-lookup"><span data-stu-id="aae51-346">Where should you put your custom web applications or webpages?</span></span>

<span data-ttu-id="aae51-347">Refer to the topic [Implement Single Sign-on from an ASPX Web Page or IFRAME](implement-single-sign-aspx-webpage-iframe.md).</span><span class="sxs-lookup"><span data-stu-id="aae51-347">Refer to the topic [Implement Single Sign-on from an ASPX Web Page or IFRAME](implement-single-sign-aspx-webpage-iframe.md).</span></span>  

### <a name="how-do-you-execute-a-plug-in-when-the-web-applications-grid-view-is-updated"></a><span data-ttu-id="aae51-348">How do you execute a plug-in when the web application’s grid view is updated?</span><span class="sxs-lookup"><span data-stu-id="aae51-348">How do you execute a plug-in when the web application’s grid view is updated?</span></span>

<span data-ttu-id="aae51-349">Register the plug-in on the <xref:Microsoft.Xrm.Sdk.Messages.RetrieveMultipleRequest> message request and do not specify any entity type during the registration.</span><span class="sxs-lookup"><span data-stu-id="aae51-349">Register the plug-in on the <xref:Microsoft.Xrm.Sdk.Messages.RetrieveMultipleRequest> message request and do not specify any entity type during the registration.</span></span>  

### <a name="when-should-you-create-a-new-website"></a><span data-ttu-id="aae51-350">When should you create a new website?</span><span class="sxs-lookup"><span data-stu-id="aae51-350">When should you create a new website?</span></span>

<span data-ttu-id="aae51-351">Create a new website for your code when any of the following applies:</span><span class="sxs-lookup"><span data-stu-id="aae51-351">Create a new website for your code when any of the following applies:</span></span>

- <span data-ttu-id="aae51-352">Your application must be bound to a domain, protocol, or port that is different from the [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] application; or must run in a different application pool.</span><span class="sxs-lookup"><span data-stu-id="aae51-352">Your application must be bound to a domain, protocol, or port that is different from the [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] application; or must run in a different application pool.</span></span>  
- <span data-ttu-id="aae51-353">Your application can exist and be accessed on its own.</span><span class="sxs-lookup"><span data-stu-id="aae51-353">Your application can exist and be accessed on its own.</span></span> <span data-ttu-id="aae51-354">For example, a portal that interacts with [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps as the server (by using web services) should be hosted as a new website.</span><span class="sxs-lookup"><span data-stu-id="aae51-354">For example, a portal that interacts with [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps as the server (by using web services) should be hosted as a new website.</span></span>
- <span data-ttu-id="aae51-355">Your application always uses [!INCLUDE[pn_Active_Directory](../includes/pn-active-directory.md)] or integrated Windows authentication (not IFD) and cross-domain scripting is not an issue.</span><span class="sxs-lookup"><span data-stu-id="aae51-355">Your application always uses [!INCLUDE[pn_Active_Directory](../includes/pn-active-directory.md)] or integrated Windows authentication (not IFD) and cross-domain scripting is not an issue.</span></span> <span data-ttu-id="aae51-356">For example, your application interacts with a back end by using web services and interacts with [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps form.</span><span class="sxs-lookup"><span data-stu-id="aae51-356">For example, your application interacts with a back end by using web services and interacts with [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps form.</span></span> <span data-ttu-id="aae51-357">A page hosted in an IFRAME that is enclosed in [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] application that does not interact with the [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps form falls into this category.</span><span class="sxs-lookup"><span data-stu-id="aae51-357">A page hosted in an IFRAME that is enclosed in [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] application that does not interact with the [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps form falls into this category.</span></span>  

### <a name="see-also"></a><span data-ttu-id="aae51-358">Xem thêm</span><span class="sxs-lookup"><span data-stu-id="aae51-358">See also</span></span>  
 <span data-ttu-id="aae51-359">[Write Code for Dynamics 365 for Customer Engagement (Web Services)](extend-dynamics-365-server.md) </span><span class="sxs-lookup"><span data-stu-id="aae51-359">[Write Code for Dynamics 365 for Customer Engagement (Web Services)](extend-dynamics-365-server.md) </span></span>  
 <span data-ttu-id="aae51-360">[Write Code for Dynamics 365 for Customer Engagement apps Forms](clientapi/client-scripting.md) </span><span class="sxs-lookup"><span data-stu-id="aae51-360">[Write Code for Dynamics 365 for Customer Engagement apps Forms](clientapi/client-scripting.md) </span></span>  
 <span data-ttu-id="aae51-361">[Plug-ins for Extending Dynamics 365 for Customer Engagement apps](write-plugin-extend-business-processes.md) </span><span class="sxs-lookup"><span data-stu-id="aae51-361">[Plug-ins for Extending Dynamics 365 for Customer Engagement apps](write-plugin-extend-business-processes.md) </span></span>  
 [<span data-ttu-id="aae51-362">Custom Workflow Activities (Workflow Assemblies)</span><span class="sxs-lookup"><span data-stu-id="aae51-362">Custom Workflow Activities (Workflow Assemblies)</span></span>](custom-workflow-activities-workflow-assemblies.md)
