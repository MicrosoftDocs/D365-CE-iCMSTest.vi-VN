---
title: Analyze plug-in performance (Developer Guide for Dynamics 365 for Customer Engagement apps)| MicrosoftDocs
description: The Plug-in Profiler is a tool that profiles the execution of plug-ins and custom workflow activities for an enhanced debugging experience in Visual Studio.
ms.custom: ''
ms.date: 10/31/2017
ms.reviewer: ''
ms.service: crm-online
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
applies_to:
- Dynamics 365 for Customer Engagement (online)
ms.assetid: 17e6f8ae-c9ac-48ef-b547-3df380b9c0f7
caps.latest.revision: 43
author: JimDaly
ms.author: jdaly
manager: amyla
search.audienceType:
- developer
search.app:
- D365CE
ms.openlocfilehash: be3bd44c0b087c713c9d096f711ff2ac73df16db
ms.sourcegitcommit: 9f0efd59de16a6d9902fa372cb25fc0baf1c2838
ms.translationtype: HT
ms.contentlocale: vi-VN
ms.lasthandoff: 01/08/2019
ms.locfileid: "387053"
---
# <a name="analyze-plug-in-performance"></a><span data-ttu-id="286ff-103">Analyze plug-in performance</span><span class="sxs-lookup"><span data-stu-id="286ff-103">Analyze plug-in performance</span></span>

[!INCLUDE[](../includes/cc_applies_to_update_9_0_0.md)]

<span data-ttu-id="286ff-104">The *Plug-in Profiler* is a tool that profiles the execution of plug-ins and custom workflow activities for an enhanced debugging experience in [!INCLUDE[pn_Visual_Studio](../includes/pn-visual-studio.md)].</span><span class="sxs-lookup"><span data-stu-id="286ff-104">The *Plug-in Profiler* is a tool that profiles the execution of plug-ins and custom workflow activities for an enhanced debugging experience in [!INCLUDE[pn_Visual_Studio](../includes/pn-visual-studio.md)].</span></span> <span data-ttu-id="286ff-105">This tool, which can be run from the Command Prompt window or from within the Plug-in Registration tool, makes developing custom code against [!INCLUDE[pn_dynamics_crm_online](../includes/pn-dynamics-crm-online.md)] apps quicker and easier.</span><span class="sxs-lookup"><span data-stu-id="286ff-105">This tool, which can be run from the Command Prompt window or from within the Plug-in Registration tool, makes developing custom code against [!INCLUDE[pn_dynamics_crm_online](../includes/pn-dynamics-crm-online.md)] apps quicker and easier.</span></span> <span data-ttu-id="286ff-106">In addition, users can profile the execution of failing code and send the results to the developer of the code or independent software vendor (ISV) for analysis.</span><span class="sxs-lookup"><span data-stu-id="286ff-106">In addition, users can profile the execution of failing code and send the results to the developer of the code or independent software vendor (ISV) for analysis.</span></span> <span data-ttu-id="286ff-107">The developer can replay the plug-in or custom workflow activity execution and debug the code remotely even when disconnected from the [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps server.</span><span class="sxs-lookup"><span data-stu-id="286ff-107">The developer can replay the plug-in or custom workflow activity execution and debug the code remotely even when disconnected from the [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps server.</span></span>

<span data-ttu-id="286ff-108">The tool can be used in either the debug or replay mode.</span><span class="sxs-lookup"><span data-stu-id="286ff-108">The tool can be used in either the debug or replay mode.</span></span> <span data-ttu-id="286ff-109">Each of these modes is described in the following sections.</span><span class="sxs-lookup"><span data-stu-id="286ff-109">Each of these modes is described in the following sections.</span></span>

<a name="debug"></a>

## <a name="debug-a-plug-in-using-the-plug-in-profiler"></a><span data-ttu-id="286ff-110">Debug a plug-in using the plug-in profiler</span><span class="sxs-lookup"><span data-stu-id="286ff-110">Debug a plug-in using the plug-in profiler</span></span>

1. <span data-ttu-id="286ff-111">Run the Plug-in Registration tool.</span><span class="sxs-lookup"><span data-stu-id="286ff-111">Run the Plug-in Registration tool.</span></span> [!INCLUDE [proc-download-plugin-registration-tool](../includes/proc-download-plugin-registration-tool.md)]
2. <span data-ttu-id="286ff-112">Click **CREATE NEW CONNECTION** to connect to a [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps server and organization.</span><span class="sxs-lookup"><span data-stu-id="286ff-112">Click **CREATE NEW CONNECTION** to connect to a [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps server and organization.</span></span> <span data-ttu-id="286ff-113">For more information on connecting to a server and organization, refer to the SDK topic: [Walkthrough: Register a Plug-in using the Plug-in Registration Tool](walkthrough-register-plugin-using-plugin-registration-tool.md).</span><span class="sxs-lookup"><span data-stu-id="286ff-113">For more information on connecting to a server and organization, refer to the SDK topic: [Walkthrough: Register a Plug-in using the Plug-in Registration Tool](walkthrough-register-plugin-using-plugin-registration-tool.md).</span></span>
3. <span data-ttu-id="286ff-114">Register a plug-in and step on the [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps server.</span><span class="sxs-lookup"><span data-stu-id="286ff-114">Register a plug-in and step on the [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps server.</span></span> <span data-ttu-id="286ff-115">Keep a copy of the debug compiled plug-in assembly on the computer where you are running the tool.</span><span class="sxs-lookup"><span data-stu-id="286ff-115">Keep a copy of the debug compiled plug-in assembly on the computer where you are running the tool.</span></span>
4. <span data-ttu-id="286ff-116">In the toolbar for the target organization, select **Install Profiler**.</span><span class="sxs-lookup"><span data-stu-id="286ff-116">In the toolbar for the target organization, select **Install Profiler**.</span></span> <span data-ttu-id="286ff-117">You will now see a **Plug-in Profiler** node in the list.</span><span class="sxs-lookup"><span data-stu-id="286ff-117">You will now see a **Plug-in Profiler** node in the list.</span></span>
5. <span data-ttu-id="286ff-118">Select a plug-in step and click **Start Profiling** in the toolbar to begin profiling.</span><span class="sxs-lookup"><span data-stu-id="286ff-118">Select a plug-in step and click **Start Profiling** in the toolbar to begin profiling.</span></span> <span data-ttu-id="286ff-119">You can choose how the profiler executes in the displayed **Profiler Settings** dialog.</span><span class="sxs-lookup"><span data-stu-id="286ff-119">You can choose how the profiler executes in the displayed **Profiler Settings** dialog.</span></span>
6. <span data-ttu-id="286ff-120">Perform the operation in [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps that causes the plug-in to run.</span><span class="sxs-lookup"><span data-stu-id="286ff-120">Perform the operation in [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps that causes the plug-in to run.</span></span> <span data-ttu-id="286ff-121">For example, if the step is configured for an update to an account, then update an account.</span><span class="sxs-lookup"><span data-stu-id="286ff-121">For example, if the step is configured for an update to an account, then update an account.</span></span>
7. <span data-ttu-id="286ff-122">If you have selected the **Exception** option in the **Profiler Settings** dialog, after the plug-in throws an exception and the **Business Process Error** dialog is displayed, click **Download Log File** and save this file.</span><span class="sxs-lookup"><span data-stu-id="286ff-122">If you have selected the **Exception** option in the **Profiler Settings** dialog, after the plug-in throws an exception and the **Business Process Error** dialog is displayed, click **Download Log File** and save this file.</span></span> <span data-ttu-id="286ff-123">Alternately, if the plug-in does not throw an exception, click **Stop Profiling**.</span><span class="sxs-lookup"><span data-stu-id="286ff-123">Alternately, if the plug-in does not throw an exception, click **Stop Profiling**.</span></span>
8. <span data-ttu-id="286ff-124">In the Plug-in Registration tool, click **Debug**.</span><span class="sxs-lookup"><span data-stu-id="286ff-124">In the Plug-in Registration tool, click **Debug**.</span></span>
9. <span data-ttu-id="286ff-125">In the **Debug an Existing Plug-in** dialog box, provide the requested information in the **Setup** tab. Enter the location of the previously saved log file in the **Profile** field.</span><span class="sxs-lookup"><span data-stu-id="286ff-125">In the **Debug an Existing Plug-in** dialog box, provide the requested information in the **Setup** tab. Enter the location of the previously saved log file in the **Profile** field.</span></span> <span data-ttu-id="286ff-126">Enter or select the location of the plug-in assembly and the class name of the plug-in that was executed.</span><span class="sxs-lookup"><span data-stu-id="286ff-126">Enter or select the location of the plug-in assembly and the class name of the plug-in that was executed.</span></span>
10. <span data-ttu-id="286ff-127">Launch [!INCLUDE[pn_Visual_Studio](../includes/pn-visual-studio.md)] and attach the debugger to the PluginRegistration.exe process.</span><span class="sxs-lookup"><span data-stu-id="286ff-127">Launch [!INCLUDE[pn_Visual_Studio](../includes/pn-visual-studio.md)] and attach the debugger to the PluginRegistration.exe process.</span></span>
11. <span data-ttu-id="286ff-128">Set a breakpoint in the plug-in code.</span><span class="sxs-lookup"><span data-stu-id="286ff-128">Set a breakpoint in the plug-in code.</span></span>
12. <span data-ttu-id="286ff-129">Click **Start Execution** in the **Debug an Existing Plug-in** dialog box.</span><span class="sxs-lookup"><span data-stu-id="286ff-129">Click **Start Execution** in the **Debug an Existing Plug-in** dialog box.</span></span>
13. <span data-ttu-id="286ff-130">After a slight delay, the plug-in will execute using the same execution context that was passed to it by the [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps server and the debugger will stop execution on the breakpoint that you previously set.</span><span class="sxs-lookup"><span data-stu-id="286ff-130">After a slight delay, the plug-in will execute using the same execution context that was passed to it by the [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps server and the debugger will stop execution on the breakpoint that you previously set.</span></span>
14. <span data-ttu-id="286ff-131">Continue debugging the plug-in as you would normally do.</span><span class="sxs-lookup"><span data-stu-id="286ff-131">Continue debugging the plug-in as you would normally do.</span></span> <span data-ttu-id="286ff-132">Any traces that the plug-in outputs are shown in the **Debug an Existing Plug-in** dialog box.</span><span class="sxs-lookup"><span data-stu-id="286ff-132">Any traces that the plug-in outputs are shown in the **Debug an Existing Plug-in** dialog box.</span></span>

<span data-ttu-id="286ff-133">At this point you can alter the plug-in code, build it, re-attach the debugger to the PluginRegistration.exe process, and click **Start Execution** to continue with your debugging session.</span><span class="sxs-lookup"><span data-stu-id="286ff-133">At this point you can alter the plug-in code, build it, re-attach the debugger to the PluginRegistration.exe process, and click **Start Execution** to continue with your debugging session.</span></span> <span data-ttu-id="286ff-134">While performing these operations, you do not need to close the **Debug an Existing Plug-in** form.</span><span class="sxs-lookup"><span data-stu-id="286ff-134">While performing these operations, you do not need to close the **Debug an Existing Plug-in** form.</span></span>

<span data-ttu-id="286ff-135">You do not need to re-deploy the plug-in to the [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps server until after you have fixed the code problem.</span><span class="sxs-lookup"><span data-stu-id="286ff-135">You do not need to re-deploy the plug-in to the [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps server until after you have fixed the code problem.</span></span> <span data-ttu-id="286ff-136">This debugging scenario works even if you have an optimized version of the plug-in on the server and a debug version of the plug-in on the computer where you are debugging.</span><span class="sxs-lookup"><span data-stu-id="286ff-136">This debugging scenario works even if you have an optimized version of the plug-in on the server and a debug version of the plug-in on the computer where you are debugging.</span></span>

<a name="replay"></a>

## <a name="replay-plug-in-execution"></a><span data-ttu-id="286ff-137">Replay plug-in execution</span><span class="sxs-lookup"><span data-stu-id="286ff-137">Replay plug-in execution</span></span>

 <span data-ttu-id="286ff-138">Replaying plug-in execution does not require a connection to a [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps server and organization.</span><span class="sxs-lookup"><span data-stu-id="286ff-138">Replaying plug-in execution does not require a connection to a [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps server and organization.</span></span> <span data-ttu-id="286ff-139">The advantage of this method is that you can obtain the plug-in execution profile from a customer and debug the plug-in remotely.</span><span class="sxs-lookup"><span data-stu-id="286ff-139">The advantage of this method is that you can obtain the plug-in execution profile from a customer and debug the plug-in remotely.</span></span> <span data-ttu-id="286ff-140">A restriction of the replay feature is that you cannot change the sequence of calls your plug-in code makes in the debugger while you are debugging.</span><span class="sxs-lookup"><span data-stu-id="286ff-140">A restriction of the replay feature is that you cannot change the sequence of calls your plug-in code makes in the debugger while you are debugging.</span></span>

 <span data-ttu-id="286ff-141">The replay feature provides the plug-in with a snapshot of the call data and event execution context from the [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps server.</span><span class="sxs-lookup"><span data-stu-id="286ff-141">The replay feature provides the plug-in with a snapshot of the call data and event execution context from the [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps server.</span></span> <span data-ttu-id="286ff-142">You are getting the same events, GUIDs, and so on from calls to the Organization service but no data is being modified on the server as you debug the plug-in.</span><span class="sxs-lookup"><span data-stu-id="286ff-142">You are getting the same events, GUIDs, and so on from calls to the Organization service but no data is being modified on the server as you debug the plug-in.</span></span> <span data-ttu-id="286ff-143">During the debugging procedure in the previous section, the plug-in actually connects to the server and makes calls in real time.</span><span class="sxs-lookup"><span data-stu-id="286ff-143">During the debugging procedure in the previous section, the plug-in actually connects to the server and makes calls in real time.</span></span>

<span data-ttu-id="286ff-144">*Replay plug-in execution*</span><span class="sxs-lookup"><span data-stu-id="286ff-144">*Replay plug-in execution*</span></span>

1. <span data-ttu-id="286ff-145">Launch [!INCLUDE[pn_Visual_Studio](../includes/pn-visual-studio.md)] and attach the debugger to the PluginRegistration.exe process.</span><span class="sxs-lookup"><span data-stu-id="286ff-145">Launch [!INCLUDE[pn_Visual_Studio](../includes/pn-visual-studio.md)] and attach the debugger to the PluginRegistration.exe process.</span></span>  
2. <span data-ttu-id="286ff-146">Click **REPLAY PLUG-IN EXECUTION**.</span><span class="sxs-lookup"><span data-stu-id="286ff-146">Click **REPLAY PLUG-IN EXECUTION**.</span></span>
3. <span data-ttu-id="286ff-147">Enter the log and plug-in assembly locations in the dialog box.</span><span class="sxs-lookup"><span data-stu-id="286ff-147">Enter the log and plug-in assembly locations in the dialog box.</span></span>
4. <span data-ttu-id="286ff-148">Click **Start Execution**.</span><span class="sxs-lookup"><span data-stu-id="286ff-148">Click **Start Execution**.</span></span>
5. <span data-ttu-id="286ff-149">Debug the plug-in as you would normally.</span><span class="sxs-lookup"><span data-stu-id="286ff-149">Debug the plug-in as you would normally.</span></span>

<a name="run"></a>

## <a name="run-the-plug-in-profiler-standalone"></a><span data-ttu-id="286ff-150">Run the plug-in profiler standalone</span><span class="sxs-lookup"><span data-stu-id="286ff-150">Run the plug-in profiler standalone</span></span>

 <span data-ttu-id="286ff-151">The profiler can be executed from a Command Prompt window independent of the Plug-in Registration tool.</span><span class="sxs-lookup"><span data-stu-id="286ff-151">The profiler can be executed from a Command Prompt window independent of the Plug-in Registration tool.</span></span> <span data-ttu-id="286ff-152">This is useful to obtain the plug-in profile log from a customer's [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps server to debug a failed plug-in.</span><span class="sxs-lookup"><span data-stu-id="286ff-152">This is useful to obtain the plug-in profile log from a customer's [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] apps server to debug a failed plug-in.</span></span> <span data-ttu-id="286ff-153">A developer can then use that log to replay the plug-in's execution in the Plug-in Registration tool and debug the plug-in using[!INCLUDE[pn_Visual_Studio](../includes/pn-visual-studio.md)].</span><span class="sxs-lookup"><span data-stu-id="286ff-153">A developer can then use that log to replay the plug-in's execution in the Plug-in Registration tool and debug the plug-in using[!INCLUDE[pn_Visual_Studio](../includes/pn-visual-studio.md)].</span></span>

### <a name="procedure-run-the-plug-in-profiler-from-a-command-prompt"></a><span data-ttu-id="286ff-154">Procedure: Run the plug-in profiler from a command prompt</span><span class="sxs-lookup"><span data-stu-id="286ff-154">Procedure: Run the plug-in profiler from a command prompt</span></span>

1. <span data-ttu-id="286ff-155">Open a Command Prompt window and set the working directory to the folder where you downloaded the Plug-in registration tool `PluginRegistration.exe`.</span><span class="sxs-lookup"><span data-stu-id="286ff-155">Open a Command Prompt window and set the working directory to the folder where you downloaded the Plug-in registration tool `PluginRegistration.exe`.</span></span>
1. <span data-ttu-id="286ff-156">Type the command: `PluginProfiler.Debugger.exe /?`.</span><span class="sxs-lookup"><span data-stu-id="286ff-156">Type the command: `PluginProfiler.Debugger.exe /?`.</span></span>  
1. <span data-ttu-id="286ff-157">Review the supported parameter list and re-run the PluginProfiler.Debugger.exe program with the appropriate parameters.</span><span class="sxs-lookup"><span data-stu-id="286ff-157">Review the supported parameter list and re-run the PluginProfiler.Debugger.exe program with the appropriate parameters.</span></span>  

### <a name="see-also"></a><span data-ttu-id="286ff-158">Xem thêm</span><span class="sxs-lookup"><span data-stu-id="286ff-158">See also</span></span>

[<span data-ttu-id="286ff-159">Developer Tools</span><span class="sxs-lookup"><span data-stu-id="286ff-159">Developer Tools</span></span>](developer-tools.md)<br />
[<span data-ttu-id="286ff-160">Solution Tools for Team Development</span><span class="sxs-lookup"><span data-stu-id="286ff-160">Solution Tools for Team Development</span></span>](solution-tools-team-development.md)<br />
[<span data-ttu-id="286ff-161">Plug-in Development</span><span class="sxs-lookup"><span data-stu-id="286ff-161">Plug-in Development</span></span>](plugin-development.md)<br />
[<span data-ttu-id="286ff-162">Register and Deploy Plug-ins</span><span class="sxs-lookup"><span data-stu-id="286ff-162">Register and Deploy Plug-ins</span></span>](register-deploy-plugins.md)<br />
[<span data-ttu-id="286ff-163">Debug a Plug-in</span><span class="sxs-lookup"><span data-stu-id="286ff-163">Debug a Plug-in</span></span>](debug-plugin.md)<br />
