---
title: 'Sample: Convert date and time behavior (Developer Guide for Dynamics 365 for Customer Engagement) | MicrosoftDocs'
description: The sample demonstrates how to use the ConvertDateAndTimeBehaviorRequest message to convert the UTC value to DateOnly value of the date and time attribute in Dynamics 365 for Customer Engagement that exist in the system before you changed the behavior of the attribute from UserLocal to DateOnly.
ms.custom: ''
ms.date: 10/31/2017
ms.reviewer: ''
ms.service: crm-online
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: samples
applies_to:
- Dynamics 365 for Customer Engagement (online)
ms.assetid: cd9d4906-9f98-4c7e-9e0a-9b40ed4dc7f2
caps.latest.revision: 18
author: KumarVivek
ms.author: kvivek
manager: amyla
search.audienceType:
- developer
search.app:
- D365CE
ms.openlocfilehash: 5aab7ecabac019370c82dd7fff1801a9331a9ab8
ms.sourcegitcommit: 9f0efd59de16a6d9902fa372cb25fc0baf1c2838
ms.translationtype: HT
ms.contentlocale: vi-VN
ms.lasthandoff: 01/08/2019
ms.locfileid: "388675"
---
# <a name="sample-convert-date-and-time-behavior"></a><span data-ttu-id="f1d87-103">Sample: Convert date and time behavior</span><span class="sxs-lookup"><span data-stu-id="f1d87-103">Sample: Convert date and time behavior</span></span>

[!INCLUDE[](../../includes/cc_applies_to_update_9_0_0.md)]

<span data-ttu-id="f1d87-104">This sample demonstrates how to use the <xref:Microsoft.Xrm.Sdk.Messages.ConvertDateAndTimeBehaviorRequest> message to convert the UTC value to DateOnly value of the date and time attribute in [!INCLUDE[pn_crm_shortest](../../includes/pn-crm-shortest.md)] Customer Engagement apps that exist in the system before you changed the behavior of the attribute from `UserLocal` to `DateOnly`.</span><span class="sxs-lookup"><span data-stu-id="f1d87-104">This sample demonstrates how to use the <xref:Microsoft.Xrm.Sdk.Messages.ConvertDateAndTimeBehaviorRequest> message to convert the UTC value to DateOnly value of the date and time attribute in [!INCLUDE[pn_crm_shortest](../../includes/pn-crm-shortest.md)] Customer Engagement apps that exist in the system before you changed the behavior of the attribute from `UserLocal` to `DateOnly`.</span></span> [!INCLUDE[proc_more_information](../../includes/proc-more-information.md)] <span data-ttu-id="f1d87-105">[Chuyển đổi đặc tính của các giá trị ngày và giờ hiện có trong cơ sở dữ liệu](../behavior-format-date-time-attribute.md#convert-behavior-of-existing-date-and-time-values-in-the-database).</span><span class="sxs-lookup"><span data-stu-id="f1d87-105">[Convert behavior of existing date and time values in the database](../behavior-format-date-time-attribute.md#convert-behavior-of-existing-date-and-time-values-in-the-database).</span></span>  

 <span data-ttu-id="f1d87-106">This sample is for [!INCLUDE[pn_crm_online_2015_update_1](../../includes/pn-crm-online-2015-update-1.md)] and [!INCLUDE[pn_dynamics_crm](../../includes/pn-dynamics-crm.md)] (on-premises).</span><span class="sxs-lookup"><span data-stu-id="f1d87-106">This sample is for [!INCLUDE[pn_crm_online_2015_update_1](../../includes/pn-crm-online-2015-update-1.md)] and [!INCLUDE[pn_dynamics_crm](../../includes/pn-dynamics-crm.md)] (on-premises).</span></span> <span data-ttu-id="f1d87-107">This is available to download from [Convert date and time behavior](http://go.microsoft.com/fwlink/p/?LinkId=534240).</span><span class="sxs-lookup"><span data-stu-id="f1d87-107">This is available to download from [Convert date and time behavior](http://go.microsoft.com/fwlink/p/?LinkId=534240).</span></span>  

## <a name="prerequisites"></a><span data-ttu-id="f1d87-108">Điều kiện tiên quyết</span><span class="sxs-lookup"><span data-stu-id="f1d87-108">Prerequisites</span></span>  

1. <span data-ttu-id="f1d87-109">Have access to a [!INCLUDE[pn_crm_online_2015_update_1](../../includes/pn-crm-online-2015-update-1.md)] or [!INCLUDE[pn_dynamics_crm_online](../../includes/pn-dynamics-crm-online.md)] organization.</span><span class="sxs-lookup"><span data-stu-id="f1d87-109">Have access to a [!INCLUDE[pn_crm_online_2015_update_1](../../includes/pn-crm-online-2015-update-1.md)] or [!INCLUDE[pn_dynamics_crm_online](../../includes/pn-dynamics-crm-online.md)] organization.</span></span>  

2. <span data-ttu-id="f1d87-110">Have the System Administrator role in your Dynamics 365 for Customer Engagement apps organization to be able to use the <xref:Microsoft.Xrm.Sdk.Messages.ConvertDateAndTimeBehaviorRequest> message that is demonstrated in this sample.</span><span class="sxs-lookup"><span data-stu-id="f1d87-110">Have the System Administrator role in your Dynamics 365 for Customer Engagement apps organization to be able to use the <xref:Microsoft.Xrm.Sdk.Messages.ConvertDateAndTimeBehaviorRequest> message that is demonstrated in this sample.</span></span> <span data-ttu-id="f1d87-111">Otherwise, this sample will fail.</span><span class="sxs-lookup"><span data-stu-id="f1d87-111">Otherwise, this sample will fail.</span></span>  

3. <span data-ttu-id="f1d87-112">[Download](http://go.microsoft.com/fwlink/p/?LinkId=534240) the DateTimeAttributeBehavior[!INCLUDE[pn_Visual_Studio_short](../../includes/pn-visual-studio-short.md)] project.</span><span class="sxs-lookup"><span data-stu-id="f1d87-112">[Download](http://go.microsoft.com/fwlink/p/?LinkId=534240) the DateTimeAttributeBehavior[!INCLUDE[pn_Visual_Studio_short](../../includes/pn-visual-studio-short.md)] project.</span></span>  

4. <span data-ttu-id="f1d87-113">Open the DateTimeAttributeBehavior Visual Studio project and install Microsoft.CrmSdk.CoreAssemblies version 7.1.0-preview NuGet Package.</span><span class="sxs-lookup"><span data-stu-id="f1d87-113">Open the DateTimeAttributeBehavior Visual Studio project and install Microsoft.CrmSdk.CoreAssemblies version 7.1.0-preview NuGet Package.</span></span> <span data-ttu-id="f1d87-114">See [Install NuGet packages](../sample-insert-update-record-upsert.md#install-nuget-packages) later for instructions.</span><span class="sxs-lookup"><span data-stu-id="f1d87-114">See [Install NuGet packages](../sample-insert-update-record-upsert.md#install-nuget-packages) later for instructions.</span></span>  

    <span data-ttu-id="f1d87-115">After you install the NuGet packages, see [Run the sample](../sample-insert-update-record-upsert.md#run-the-sample) for instructions on how to run the sample and what to expect.</span><span class="sxs-lookup"><span data-stu-id="f1d87-115">After you install the NuGet packages, see [Run the sample](../sample-insert-update-record-upsert.md#run-the-sample) for instructions on how to run the sample and what to expect.</span></span>  

<a name="BKMK_WhatThisSampleDoes"></a>   
## <a name="what-this-sample-does"></a><span data-ttu-id="f1d87-116">What this sample does</span><span class="sxs-lookup"><span data-stu-id="f1d87-116">What this sample does</span></span>  

1. <span data-ttu-id="f1d87-117">The `ConvertDateandTimeBehavior` class `Run` method checks if you are running the appropriate version of [!INCLUDE[pn_crm_shortest](../../includes/pn-crm-shortest.md)] for the sample.</span><span class="sxs-lookup"><span data-stu-id="f1d87-117">The `ConvertDateandTimeBehavior` class `Run` method checks if you are running the appropriate version of [!INCLUDE[pn_crm_shortest](../../includes/pn-crm-shortest.md)] for the sample.</span></span>  

2. <span data-ttu-id="f1d87-118">The `CreateRequiredRecords` method creates the required records for the sample:</span><span class="sxs-lookup"><span data-stu-id="f1d87-118">The `CreateRequiredRecords` method creates the required records for the sample:</span></span>  

   1.  <span data-ttu-id="f1d87-119">Creates a sample date and time attribute for the Account entity with the `UserLocal` behavior.</span><span class="sxs-lookup"><span data-stu-id="f1d87-119">Creates a sample date and time attribute for the Account entity with the `UserLocal` behavior.</span></span>  

   2.  <span data-ttu-id="f1d87-120">Creates a sample account record with March 31, 2015 11:00 PM UTC value in the new date and time attribute.</span><span class="sxs-lookup"><span data-stu-id="f1d87-120">Creates a sample account record with March 31, 2015 11:00 PM UTC value in the new date and time attribute.</span></span>  

   3.  <span data-ttu-id="f1d87-121">Changes the behavior of the date and time attribute to `DateOnly`.</span><span class="sxs-lookup"><span data-stu-id="f1d87-121">Changes the behavior of the date and time attribute to `DateOnly`.</span></span>  

   4.  <span data-ttu-id="f1d87-122">Creates another sample account record with March 31, 2015 11:00 PM UTC value in the new date and time attribute.</span><span class="sxs-lookup"><span data-stu-id="f1d87-122">Creates another sample account record with March 31, 2015 11:00 PM UTC value in the new date and time attribute.</span></span> <span data-ttu-id="f1d87-123">Because the attribute is now `DateOnly`, the time part is ignored and stored in the system as March 31, 2015 00:00:00.</span><span class="sxs-lookup"><span data-stu-id="f1d87-123">Because the attribute is now `DateOnly`, the time part is ignored and stored in the system as March 31, 2015 00:00:00.</span></span>  

   5.  <span data-ttu-id="f1d87-124">Retrieves the value in the date and time attribute in both the account records.</span><span class="sxs-lookup"><span data-stu-id="f1d87-124">Retrieves the value in the date and time attribute in both the account records.</span></span> <span data-ttu-id="f1d87-125">Because the behavior is changed, both the values are displayed as March 31, 2015 00:00:00.</span><span class="sxs-lookup"><span data-stu-id="f1d87-125">Because the behavior is changed, both the values are displayed as March 31, 2015 00:00:00.</span></span> <span data-ttu-id="f1d87-126">However, the value in the first account record continues to be in the UTC (March 31, 2015 11:00 PM) in the database.</span><span class="sxs-lookup"><span data-stu-id="f1d87-126">However, the value in the first account record continues to be in the UTC (March 31, 2015 11:00 PM) in the database.</span></span>  

3. <span data-ttu-id="f1d87-127">Runs the <xref:Microsoft.Xrm.Sdk.Messages.ConvertDateAndTimeBehaviorRequest> SDK message to create an async job for converting the UTC values in the date and time attribute to a `DateOnly` value.</span><span class="sxs-lookup"><span data-stu-id="f1d87-127">Runs the <xref:Microsoft.Xrm.Sdk.Messages.ConvertDateAndTimeBehaviorRequest> SDK message to create an async job for converting the UTC values in the date and time attribute to a `DateOnly` value.</span></span> <span data-ttu-id="f1d87-128">The conversion rule in the SDK message converts the value as per the India Standard Time (IST) time zone code in Dynamics 365 for Customer Engagement (190).</span><span class="sxs-lookup"><span data-stu-id="f1d87-128">The conversion rule in the SDK message converts the value as per the India Standard Time (IST) time zone code in Dynamics 365 for Customer Engagement (190).</span></span>  

   [!code-csharp[DateTimeAttributeBehavior#ConvertDateandTimeBehavior1](../../snippets/csharp/CRMV8/datetimeattributebehavior/cs/convertdateandtimebehavior1.cs#convertdateandtimebehavior1)]  

4. <span data-ttu-id="f1d87-129">Retrieves the value in the date and time attribute in both the account records after the conversion.</span><span class="sxs-lookup"><span data-stu-id="f1d87-129">Retrieves the value in the date and time attribute in both the account records after the conversion.</span></span> <span data-ttu-id="f1d87-130">The UTC value in the first account record gets converted to April 1, instead of March 31 because the conversion happened as per the India Standard Time (IST) time zone.</span><span class="sxs-lookup"><span data-stu-id="f1d87-130">The UTC value in the first account record gets converted to April 1, instead of March 31 because the conversion happened as per the India Standard Time (IST) time zone.</span></span> <span data-ttu-id="f1d87-131">The value in the second account record is not affected because it was already a `DateOnly` value.</span><span class="sxs-lookup"><span data-stu-id="f1d87-131">The value in the second account record is not affected because it was already a `DateOnly` value.</span></span>  

5. <span data-ttu-id="f1d87-132">Finally, the `DeleteRequiredRecords` method prompts you to delete the entity records and the custom date and time attribute created during the sample run:</span><span class="sxs-lookup"><span data-stu-id="f1d87-132">Finally, the `DeleteRequiredRecords` method prompts you to delete the entity records and the custom date and time attribute created during the sample run:</span></span>  

   1.  <span data-ttu-id="f1d87-133">Type `y`, and press ENTER to delete the entity records and custom attribute from your organization.</span><span class="sxs-lookup"><span data-stu-id="f1d87-133">Type `y`, and press ENTER to delete the entity records and custom attribute from your organization.</span></span>  

   2.  <span data-ttu-id="f1d87-134">Type `n`, and press ENTER to leave the entity records and custom attribute in your organization.</span><span class="sxs-lookup"><span data-stu-id="f1d87-134">Type `n`, and press ENTER to leave the entity records and custom attribute in your organization.</span></span> <span data-ttu-id="f1d87-135">You will have to manually delete them later if you want to return to the original state.</span><span class="sxs-lookup"><span data-stu-id="f1d87-135">You will have to manually delete them later if you want to return to the original state.</span></span>  

<a name="BKMK_installNuget"></a>   
## <a name="install-nuget-packages"></a><span data-ttu-id="f1d87-136">Install NuGet packages</span><span class="sxs-lookup"><span data-stu-id="f1d87-136">Install NuGet packages</span></span>  
 <span data-ttu-id="f1d87-137">Use the following steps to install the required assemblies for this sample:</span><span class="sxs-lookup"><span data-stu-id="f1d87-137">Use the following steps to install the required assemblies for this sample:</span></span>  

1.  <span data-ttu-id="f1d87-138">Download this sample and extract the files.</span><span class="sxs-lookup"><span data-stu-id="f1d87-138">Download this sample and extract the files.</span></span>  

2.  <span data-ttu-id="f1d87-139">Navigate to the C# folder and open the DateTimeAttributeBehavior.sln file using Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="f1d87-139">Navigate to the C# folder and open the DateTimeAttributeBehavior.sln file using Visual Studio.</span></span>  

3.  <span data-ttu-id="f1d87-140">In Visual Studio, right-click the DateTimeAttributeBehavior project and chose **Manage NuGet Packages**.</span><span class="sxs-lookup"><span data-stu-id="f1d87-140">In Visual Studio, right-click the DateTimeAttributeBehavior project and chose **Manage NuGet Packages**.</span></span>  

4.  <span data-ttu-id="f1d87-141">For the preview release, make sure to select **Include Prerelease** rather than **Stable Only** in the search criteria.</span><span class="sxs-lookup"><span data-stu-id="f1d87-141">For the preview release, make sure to select **Include Prerelease** rather than **Stable Only** in the search criteria.</span></span> <span data-ttu-id="f1d87-142">Then search for “Microsoft Dynamics CRM 2015 SDK core assemblies”.</span><span class="sxs-lookup"><span data-stu-id="f1d87-142">Then search for “Microsoft Dynamics CRM 2015 SDK core assemblies”.</span></span> <span data-ttu-id="f1d87-143">Make sure you select the 7.1.0-preview version.</span><span class="sxs-lookup"><span data-stu-id="f1d87-143">Make sure you select the 7.1.0-preview version.</span></span>  

5.  <span data-ttu-id="f1d87-144">Bấm vào **cài đặt**.</span><span class="sxs-lookup"><span data-stu-id="f1d87-144">Click **Install**.</span></span> <span data-ttu-id="f1d87-145">You’ll need to accept the license terms to complete installing this package.</span><span class="sxs-lookup"><span data-stu-id="f1d87-145">You’ll need to accept the license terms to complete installing this package.</span></span>  

<a name="BKMK_runSample"></a>   
## <a name="run-the-sample"></a><span data-ttu-id="f1d87-146">Run the sample</span><span class="sxs-lookup"><span data-stu-id="f1d87-146">Run the sample</span></span>  

1. <span data-ttu-id="f1d87-147">In Visual Studio, with the solution open and the necessary [!INCLUDE[tn_nuget](../../includes/tn-nuget.md)] packages installed, press F5.</span><span class="sxs-lookup"><span data-stu-id="f1d87-147">In Visual Studio, with the solution open and the necessary [!INCLUDE[tn_nuget](../../includes/tn-nuget.md)] packages installed, press F5.</span></span>  

2. <span data-ttu-id="f1d87-148">If you have not previously run one of the [!INCLUDE[pn_dynamics_crm](../../includes/pn-dynamics-crm.md)] managed code samples before, you’ll need to enter information to run the code, otherwise enter the number for one of the [!INCLUDE[pn_crm_shortest](../../includes/pn-crm-shortest.md)] servers you have previously set up.</span><span class="sxs-lookup"><span data-stu-id="f1d87-148">If you have not previously run one of the [!INCLUDE[pn_dynamics_crm](../../includes/pn-dynamics-crm.md)] managed code samples before, you’ll need to enter information to run the code, otherwise enter the number for one of the [!INCLUDE[pn_crm_shortest](../../includes/pn-crm-shortest.md)] servers you have previously set up.</span></span>  


   |                                 <span data-ttu-id="f1d87-149">Prompt</span><span class="sxs-lookup"><span data-stu-id="f1d87-149">Prompt</span></span>                                  |                                                                                              <span data-ttu-id="f1d87-150">Mô tả</span><span class="sxs-lookup"><span data-stu-id="f1d87-150">Description</span></span>                                                                                               |
   |-------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   |      <span data-ttu-id="f1d87-151">Enter a Dynamics 365 for Customer Engagement server name and port [crm.dynamics.com]</span><span class="sxs-lookup"><span data-stu-id="f1d87-151">Enter a Dynamics 365 for Customer Engagement server name and port [crm.dynamics.com]</span></span>       | <span data-ttu-id="f1d87-152">Type the name of your Dynamics 365 for Customer Engagement server.</span><span class="sxs-lookup"><span data-stu-id="f1d87-152">Type the name of your Dynamics 365 for Customer Engagement server.</span></span> <span data-ttu-id="f1d87-153">The default is [!INCLUDE[pn_CRM_Online](../../includes/pn-crm-online.md)] (crm.dynamics.com) in North America.</span><span class="sxs-lookup"><span data-stu-id="f1d87-153">The default is [!INCLUDE[pn_CRM_Online](../../includes/pn-crm-online.md)] (crm.dynamics.com) in North America.</span></span><br /><br /> <span data-ttu-id="f1d87-154">Ví dụ: </span><span class="sxs-lookup"><span data-stu-id="f1d87-154">Example:</span></span> <br /><span data-ttu-id="f1d87-155">crm5.dynamics.com</span><span class="sxs-lookup"><span data-stu-id="f1d87-155">crm5.dynamics.com</span></span> |
   | <span data-ttu-id="f1d87-156">Is this organization provisioned in Microsoft online services (y/n) [n]</span><span class="sxs-lookup"><span data-stu-id="f1d87-156">Is this organization provisioned in Microsoft online services (y/n) [n]</span></span> |                                                   <span data-ttu-id="f1d87-157">Type **y** if this is a Microsoft online services provisioned organization.</span><span class="sxs-lookup"><span data-stu-id="f1d87-157">Type **y** if this is a Microsoft online services provisioned organization.</span></span> <span data-ttu-id="f1d87-158">Otherwise, type **n**.</span><span class="sxs-lookup"><span data-stu-id="f1d87-158">Otherwise, type **n**.</span></span>                                                   |
   |                          <span data-ttu-id="f1d87-159">Enter domain\username</span><span class="sxs-lookup"><span data-stu-id="f1d87-159">Enter domain\username</span></span>                          |                                                                                      <span data-ttu-id="f1d87-160">Type your Microsoft account.</span><span class="sxs-lookup"><span data-stu-id="f1d87-160">Type your Microsoft account.</span></span>                                                                                      |
   |                             <span data-ttu-id="f1d87-161">Enter password</span><span class="sxs-lookup"><span data-stu-id="f1d87-161">Enter password</span></span>                              |                        <span data-ttu-id="f1d87-162">Type your password.</span><span class="sxs-lookup"><span data-stu-id="f1d87-162">Type your password.</span></span> <span data-ttu-id="f1d87-163">The characters will show as “\*” in the window.</span><span class="sxs-lookup"><span data-stu-id="f1d87-163">The characters will show as “\*” in the window.</span></span> <span data-ttu-id="f1d87-164">Your password is securely saved in the Microsoft Credential Manager for later reuse.</span><span class="sxs-lookup"><span data-stu-id="f1d87-164">Your password is securely saved in the Microsoft Credential Manager for later reuse.</span></span>                        |
   |                <span data-ttu-id="f1d87-165">Specify an organization number (1-n) [1]</span><span class="sxs-lookup"><span data-stu-id="f1d87-165">Specify an organization number (1-n) [1]</span></span>                 |                        <span data-ttu-id="f1d87-166">From the list of organizations shown that you belong to, type the corresponding number.</span><span class="sxs-lookup"><span data-stu-id="f1d87-166">From the list of organizations shown that you belong to, type the corresponding number.</span></span> <span data-ttu-id="f1d87-167">The default is 1, indicating the first organization in the list.</span><span class="sxs-lookup"><span data-stu-id="f1d87-167">The default is 1, indicating the first organization in the list.</span></span>                        |


3. <span data-ttu-id="f1d87-168">The sample will perform the operations described in [What this sample does](../sample-insert-update-record-upsert.md#what-this-sample-does) and may prompt you with additional options.</span><span class="sxs-lookup"><span data-stu-id="f1d87-168">The sample will perform the operations described in [What this sample does](../sample-insert-update-record-upsert.md#what-this-sample-does) and may prompt you with additional options.</span></span>  

4. <span data-ttu-id="f1d87-169">When the sample is complete, press ENTER to close the console window.</span><span class="sxs-lookup"><span data-stu-id="f1d87-169">When the sample is complete, press ENTER to close the console window.</span></span>  

### <a name="see-also"></a><span data-ttu-id="f1d87-170">Xem thêm</span><span class="sxs-lookup"><span data-stu-id="f1d87-170">See also</span></span>  
 <span data-ttu-id="f1d87-171">[Behavior and format of the date and time attribute](../behavior-format-date-time-attribute.md) </span><span class="sxs-lookup"><span data-stu-id="f1d87-171">[Behavior and format of the date and time attribute](../behavior-format-date-time-attribute.md) </span></span>  
 <xref:Microsoft.Xrm.Sdk.Messages.ConvertDateAndTimeBehaviorRequest>   
 [<span data-ttu-id="f1d87-172">Customize entity attribute metadata</span><span class="sxs-lookup"><span data-stu-id="f1d87-172">Customize entity attribute metadata</span></span>](../customize-entity-attribute-metadata.md)
