---
title: Work with Dynamics 365 for Customer Engagement event data in your Azure Event Hub solution (Developer Guide for Dynamics 365 for Customer Engagement apps) | MicrosoftDocs
description: The topic describes working with event data in your Azure Event Hub solution.
ms.custom: ''
ms.date: 10/31/2017
ms.reviewer: ''
ms.service: crm-online
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
applies_to:
- Dynamics 365 for Customer Engagement (online)
ms.assetid: 53e5add8-25e0-458f-b82f-aac60c43fcab
caps.latest.revision: 12
author: JimDaly
ms.author: jdaly
search.audienceType:
- developer
search.app:
- D365CE
ms.openlocfilehash: 6e74a9862806b2109cd8718a2f3bf85f87438e7a
ms.sourcegitcommit: 9f0efd59de16a6d9902fa372cb25fc0baf1c2838
ms.translationtype: HT
ms.contentlocale: vi-VN
ms.lasthandoff: 01/08/2019
ms.locfileid: "385926"
---
# <a name="work-with-customer-engagement-event-data-in-your-azure-event-hub-solution"></a><span data-ttu-id="39df3-103">Work with Customer Engagement event data in your Azure Event Hub solution</span><span class="sxs-lookup"><span data-stu-id="39df3-103">Work with Customer Engagement event data in your Azure Event Hub solution</span></span>

[!INCLUDE[](../includes/cc_applies_to_update_9_0_0.md)]

[!INCLUDE[pn_microsoft_azure_event_hubs](../includes/pn-microsoft-azure-event-hubs.md)] <span data-ttu-id="39df3-104">is a highly scalable publish-subscribe service that can ingest millions of events per second and stream them into multiple applications.</span><span class="sxs-lookup"><span data-stu-id="39df3-104">is a highly scalable publish-subscribe service that can ingest millions of events per second and stream them into multiple applications.</span></span> <span data-ttu-id="39df3-105">The [!INCLUDE[pn_crm_shortest](../includes/pn-crm-shortest.md)]-[!INCLUDE[pn_azure_shortest](../includes/pn-azure-shortest.md)] interface enables your [!INCLUDE[pn_crm_shortest](../includes/pn-crm-shortest.md)] Customer Engagement event data to be published to the [!INCLUDE[windows_azure_service_bus](../includes/windows-azure-service-bus.md)] and made available to your event hub solution subscribers.</span><span class="sxs-lookup"><span data-stu-id="39df3-105">The [!INCLUDE[pn_crm_shortest](../includes/pn-crm-shortest.md)]-[!INCLUDE[pn_azure_shortest](../includes/pn-azure-shortest.md)] interface enables your [!INCLUDE[pn_crm_shortest](../includes/pn-crm-shortest.md)] Customer Engagement event data to be published to the [!INCLUDE[windows_azure_service_bus](../includes/windows-azure-service-bus.md)] and made available to your event hub solution subscribers.</span></span> <span data-ttu-id="39df3-106">The following information describes the general  tasks that must be completed to send [!INCLUDE[pn_crm_shortest](../includes/pn-crm-shortest.md)] event data to an event hub solution.</span><span class="sxs-lookup"><span data-stu-id="39df3-106">The following information describes the general  tasks that must be completed to send [!INCLUDE[pn_crm_shortest](../includes/pn-crm-shortest.md)] event data to an event hub solution.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="39df3-107">An [!INCLUDE[pn_azure_shortest](../includes/pn-azure-shortest.md)] subscription and event hub license is required for access to event hubs.</span><span class="sxs-lookup"><span data-stu-id="39df3-107">An [!INCLUDE[pn_azure_shortest](../includes/pn-azure-shortest.md)] subscription and event hub license is required for access to event hubs.</span></span> [!INCLUDE[cc_feature_included_with_update_8_1_0_admins](../includes/cc-feature-included-with-update-8-1-0-admins.md)]  
  
## <a name="1-create-an-event-hub"></a><span data-ttu-id="39df3-108">1. Create an event hub</span><span class="sxs-lookup"><span data-stu-id="39df3-108">1. Create an event hub</span></span>  
 <span data-ttu-id="39df3-109">You can create an event hub in [!INCLUDE[pn_Windows_Azure](../includes/pn-windows-azure.md)] either through API programming  or interactively by using the [Azure classic portal](https://manage.windowsazure.com).</span><span class="sxs-lookup"><span data-stu-id="39df3-109">You can create an event hub in [!INCLUDE[pn_Windows_Azure](../includes/pn-windows-azure.md)] either through API programming  or interactively by using the [Azure classic portal](https://manage.windowsazure.com).</span></span> <span data-ttu-id="39df3-110">Either way, after creating your event hub you must obtain a copy of the event hub connection string and provide that string when registering the [!INCLUDE[pn_crm_shortest](../includes/pn-crm-shortest.md)] service endpoint detailed in the next section.</span><span class="sxs-lookup"><span data-stu-id="39df3-110">Either way, after creating your event hub you must obtain a copy of the event hub connection string and provide that string when registering the [!INCLUDE[pn_crm_shortest](../includes/pn-crm-shortest.md)] service endpoint detailed in the next section.</span></span>  
  
 [!INCLUDE[sdk_for_more_info_about](../includes/sdk-for-more-info-about.md)] <span data-ttu-id="39df3-111">creating event hubs see the [Event Hubs documentation](https://azure.microsoft.com/en-us/documentation/services/event-hubs/).</span><span class="sxs-lookup"><span data-stu-id="39df3-111">creating event hubs see the [Event Hubs documentation](https://azure.microsoft.com/en-us/documentation/services/event-hubs/).</span></span>  
  
## <a name="2-register-an-endpoint"></a><span data-ttu-id="39df3-112">2. Register an endpoint</span><span class="sxs-lookup"><span data-stu-id="39df3-112">2. Register an endpoint</span></span>  
 <span data-ttu-id="39df3-113">Registering a service endpoint for an event hub is similar to registering for any other supported contract type such as queues or topics.</span><span class="sxs-lookup"><span data-stu-id="39df3-113">Registering a service endpoint for an event hub is similar to registering for any other supported contract type such as queues or topics.</span></span> <span data-ttu-id="39df3-114">You use the Plug-in Registration Tool, provided in the SDK download, to register the service endpoint.</span><span class="sxs-lookup"><span data-stu-id="39df3-114">You use the Plug-in Registration Tool, provided in the SDK download, to register the service endpoint.</span></span>  <span data-ttu-id="39df3-115">When filling out the registration form specify a contract type of **Event Hub**.</span><span class="sxs-lookup"><span data-stu-id="39df3-115">When filling out the registration form specify a contract type of **Event Hub**.</span></span> <span data-ttu-id="39df3-116">For the message body format, you can choose **XML** or **JSON**.</span><span class="sxs-lookup"><span data-stu-id="39df3-116">For the message body format, you can choose **XML** or **JSON**.</span></span> <span data-ttu-id="39df3-117">In addition, only SAS authorization is permitted and you must provide the connection string obtained when you created the event hub.</span><span class="sxs-lookup"><span data-stu-id="39df3-117">In addition, only SAS authorization is permitted and you must provide the connection string obtained when you created the event hub.</span></span> [!INCLUDE[proc_more_information](../includes/proc-more-information.md)] <span data-ttu-id="39df3-118">[Walkthrough: Configure Microsoft Azure (SAS) for integration with Dynamics 365 for Customer Engagement apps](walkthrough-configure-azure-sas-integration.md).</span><span class="sxs-lookup"><span data-stu-id="39df3-118">[Walkthrough: Configure Microsoft Azure (SAS) for integration with Dynamics 365 for Customer Engagement apps](walkthrough-configure-azure-sas-integration.md).</span></span>  
  
## <a name="3-register-code"></a><span data-ttu-id="39df3-119">3. Register code</span><span class="sxs-lookup"><span data-stu-id="39df3-119">3. Register code</span></span>  
 [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] <span data-ttu-id="39df3-120">needs to know the exact operation (entity/message combination) that, when processed, would cause the Azure-aware plug-in to execute.</span><span class="sxs-lookup"><span data-stu-id="39df3-120">needs to know the exact operation (entity/message combination) that, when processed, would cause the Azure-aware plug-in to execute.</span></span> <span data-ttu-id="39df3-121">Since you are creating an event hub, this operation would be related to the processing of [!INCLUDE[pn_crm_shortest](../includes/pn-crm-shortest.md)] event data in particular.</span><span class="sxs-lookup"><span data-stu-id="39df3-121">Since you are creating an event hub, this operation would be related to the processing of [!INCLUDE[pn_crm_shortest](../includes/pn-crm-shortest.md)] event data in particular.</span></span> <span data-ttu-id="39df3-122">You must register a step for the Azure-aware plug-in in the [!INCLUDE[pn_crm_shortest](../includes/pn-crm-shortest.md)] event execution pipeline.</span><span class="sxs-lookup"><span data-stu-id="39df3-122">You must register a step for the Azure-aware plug-in in the [!INCLUDE[pn_crm_shortest](../includes/pn-crm-shortest.md)] event execution pipeline.</span></span>  <span data-ttu-id="39df3-123">For more information see  [Walkthrough: Register an Azure-aware plug-in using the Plug-in Registration Tool](walkthrough-register-azure-aware-plug-in-using-plug-in-registration-tool.md).</span><span class="sxs-lookup"><span data-stu-id="39df3-123">For more information see  [Walkthrough: Register an Azure-aware plug-in using the Plug-in Registration Tool](walkthrough-register-azure-aware-plug-in-using-plug-in-registration-tool.md).</span></span>  
  
 <span data-ttu-id="39df3-124">If you are using an Azure-aware custom workflow activity instead of a plug-in, you would register the activity's assembly using the Plug-in Registration Tool and incorporate that activity into a workflow.</span><span class="sxs-lookup"><span data-stu-id="39df3-124">If you are using an Azure-aware custom workflow activity instead of a plug-in, you would register the activity's assembly using the Plug-in Registration Tool and incorporate that activity into a workflow.</span></span> [!INCLUDE[proc_more_information](../includes/proc-more-information.md)] <span data-ttu-id="39df3-125">[Sample: Azure aware custom workflow activity](sample-azure-aware-custom-workflow-activity.md).</span><span class="sxs-lookup"><span data-stu-id="39df3-125">[Sample: Azure aware custom workflow activity](sample-azure-aware-custom-workflow-activity.md).</span></span>  
  
## <a name="4-start-listening"></a><span data-ttu-id="39df3-126">4. Start listening</span><span class="sxs-lookup"><span data-stu-id="39df3-126">4. Start listening</span></span>  
 <span data-ttu-id="39df3-127">Start your Azure service hub solution application listening on the service endpoint.</span><span class="sxs-lookup"><span data-stu-id="39df3-127">Start your Azure service hub solution application listening on the service endpoint.</span></span>  
  
## <a name="5-trigger"></a><span data-ttu-id="39df3-128">5. Trigger</span><span class="sxs-lookup"><span data-stu-id="39df3-128">5. Trigger</span></span>  
 <span data-ttu-id="39df3-129">Perform an operation in [!INCLUDE[pn_crm_shortest](../includes/pn-crm-shortest.md)] that would cause the plug-in or workflow containing the custom workflow activity to execute.</span><span class="sxs-lookup"><span data-stu-id="39df3-129">Perform an operation in [!INCLUDE[pn_crm_shortest](../includes/pn-crm-shortest.md)] that would cause the plug-in or workflow containing the custom workflow activity to execute.</span></span> <span data-ttu-id="39df3-130">This is the same operation (entity/message combination) that you registered the plug-in step for in the previous section of this topic.</span><span class="sxs-lookup"><span data-stu-id="39df3-130">This is the same operation (entity/message combination) that you registered the plug-in step for in the previous section of this topic.</span></span> <span data-ttu-id="39df3-131">You can perform the intended operation by using the web application or through application code accessing the [!INCLUDE[pn_crm_shortest](../includes/pn-crm-shortest.md)] web services.</span><span class="sxs-lookup"><span data-stu-id="39df3-131">You can perform the intended operation by using the web application or through application code accessing the [!INCLUDE[pn_crm_shortest](../includes/pn-crm-shortest.md)] web services.</span></span>  
  
## <a name="6-verification"></a><span data-ttu-id="39df3-132">6. Verification</span><span class="sxs-lookup"><span data-stu-id="39df3-132">6. Verification</span></span>  
 <span data-ttu-id="39df3-133">You can check the related system job in the [!INCLUDE[pn_crm_shortest](../includes/pn-crm-shortest.md)] web application and look for a status of **Succeeded**.</span><span class="sxs-lookup"><span data-stu-id="39df3-133">You can check the related system job in the [!INCLUDE[pn_crm_shortest](../includes/pn-crm-shortest.md)] web application and look for a status of **Succeeded**.</span></span> <span data-ttu-id="39df3-134">If you find a status of **Failed**, use the status information to identify the possible cause of the failure.</span><span class="sxs-lookup"><span data-stu-id="39df3-134">If you find a status of **Failed**, use the status information to identify the possible cause of the failure.</span></span> <span data-ttu-id="39df3-135">You can then recheck the configurations of both systems or debug application code to locate and fix the problem, depending on the nature of the failure.</span><span class="sxs-lookup"><span data-stu-id="39df3-135">You can then recheck the configurations of both systems or debug application code to locate and fix the problem, depending on the nature of the failure.</span></span>  
  
### <a name="see-also"></a><span data-ttu-id="39df3-136">Xem thêm</span><span class="sxs-lookup"><span data-stu-id="39df3-136">See also</span></span>  
 <span data-ttu-id="39df3-137">[Azure integration with Dynamics 365 for Customer Engagement apps](azure-integration.md) </span><span class="sxs-lookup"><span data-stu-id="39df3-137">[Azure integration with Dynamics 365 for Customer Engagement apps](azure-integration.md) </span></span>  
 [<span data-ttu-id="39df3-138">Azure extensions for Dynamics 365 for Customer Engagement apps</span><span class="sxs-lookup"><span data-stu-id="39df3-138">Azure extensions for Dynamics 365 for Customer Engagement apps</span></span>](azure-extensions.md)
