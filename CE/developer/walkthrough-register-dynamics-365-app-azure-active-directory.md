---
title: 'Walkthrough: Register a Dynamics 365 for Customer Engagement app with Azure Active Directory (Developer Guide for Dynamics 365 for Customer Engagement apps)| MicrosoftDocs'
description: This walkthrough describes how to register an application with Azure Active Directory so that it can connect to the Dynamics 365 for Customer Engagement Online instance, authenticate using OAuth, and access the web services
ms.custom: ''
ms.date: 08/05/2018
ms.reviewer: ''
ms.service: crm-online
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
applies_to:
- Dynamics 365 for Customer Engagement (online)
ms.assetid: 8fb9f7e2-8002-427e-bc66-a7c0d6e32ac8
caps.latest.revision: 10
author: KumarVivek
ms.author: kvivek
search.audienceType:
- developer
search.app:
- D365CE
ms.openlocfilehash: 1ebc38e4927cbc92621bbcf3c2ab12cad3dd449c
ms.sourcegitcommit: 9f0efd59de16a6d9902fa372cb25fc0baf1c2838
ms.translationtype: HT
ms.contentlocale: vi-VN
ms.lasthandoff: 01/08/2019
ms.locfileid: "387783"
---
# <a name="walkthrough-register-a-dynamics-365-for-customer-engagement-app-with-azure-active-directory"></a><span data-ttu-id="3078e-103">Walkthrough: Register a Dynamics 365 for Customer Engagement app with Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="3078e-103">Walkthrough: Register a Dynamics 365 for Customer Engagement app with Azure Active Directory</span></span>

[!INCLUDE[](../includes/cc_applies_to_update_9_0_0.md)]

<span data-ttu-id="3078e-104">This walkthrough describes how to register an application with [!INCLUDE[pn_microsoft_azure_active_directory](../includes/pn-microsoft-azure-active-directory.md)], which enables a user with [!INCLUDE[pn_CRM_Online](../includes/pn-crm-online.md)] user account to connect to their [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] Online Customer Engagement instance from external client applications using OAuth authentication.</span><span class="sxs-lookup"><span data-stu-id="3078e-104">This walkthrough describes how to register an application with [!INCLUDE[pn_microsoft_azure_active_directory](../includes/pn-microsoft-azure-active-directory.md)], which enables a user with [!INCLUDE[pn_CRM_Online](../includes/pn-crm-online.md)] user account to connect to their [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] Online Customer Engagement instance from external client applications using OAuth authentication.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="3078e-105">Dynamics 365 for Customer Engagement also provides you with Server-to-Server (S2S) authentication option to connect to [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] Online Customer Engagement instance from external applications and services using the special *application user* account.</span><span class="sxs-lookup"><span data-stu-id="3078e-105">Dynamics 365 for Customer Engagement also provides you with Server-to-Server (S2S) authentication option to connect to [!INCLUDE[pn_dynamics_crm](../includes/pn-dynamics-crm.md)] Online Customer Engagement instance from external applications and services using the special *application user* account.</span></span> <span data-ttu-id="3078e-106">S2S authentication is the common way that apps registered on Microsoft AppSource use to access the Dynamics 365 for Customer Engagement data of their subscribers.</span><span class="sxs-lookup"><span data-stu-id="3078e-106">S2S authentication is the common way that apps registered on Microsoft AppSource use to access the Dynamics 365 for Customer Engagement data of their subscribers.</span></span> <span data-ttu-id="3078e-107">More information: [Build web applications using Server-to-Server (S2S) authentication](build-web-applications-server-server-s2s-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="3078e-107">More information: [Build web applications using Server-to-Server (S2S) authentication](build-web-applications-server-server-s2s-authentication.md).</span></span>

<span data-ttu-id="3078e-108">App registration in Azure Active Directory is typically done by ISVs who want to develop external client applications to read and write data in Customer Engagement.</span><span class="sxs-lookup"><span data-stu-id="3078e-108">App registration in Azure Active Directory is typically done by ISVs who want to develop external client applications to read and write data in Customer Engagement.</span></span> <span data-ttu-id="3078e-109">Registering an app in Azure Active Directory provides you with **Application ID** and **Redirect URI** values that ISVs can use in their client application's authentication code.</span><span class="sxs-lookup"><span data-stu-id="3078e-109">Registering an app in Azure Active Directory provides you with **Application ID** and **Redirect URI** values that ISVs can use in their client application's authentication code.</span></span> <span data-ttu-id="3078e-110">When end users use the ISV's application for the *first time* to connect to their Customer Engagement instance by providing their Customer Engagement credentials, a consent form is presented to the end user.</span><span class="sxs-lookup"><span data-stu-id="3078e-110">When end users use the ISV's application for the *first time* to connect to their Customer Engagement instance by providing their Customer Engagement credentials, a consent form is presented to the end user.</span></span> <span data-ttu-id="3078e-111">After consenting to use their Customer Engagement account with the ISV's application, end users can connect to Customer Engagement instance from external application.</span><span class="sxs-lookup"><span data-stu-id="3078e-111">After consenting to use their Customer Engagement account with the ISV's application, end users can connect to Customer Engagement instance from external application.</span></span> <span data-ttu-id="3078e-112">The consent form is not displayed again to other users after the first user who has already consented to use the ISV's app.</span><span class="sxs-lookup"><span data-stu-id="3078e-112">The consent form is not displayed again to other users after the first user who has already consented to use the ISV's app.</span></span> <span data-ttu-id="3078e-113">Apps registered in Azure Active Directory are multi-tenant, which implies that other Customer Engagement users from other tenant can connect to their instance using the ISV's app.</span><span class="sxs-lookup"><span data-stu-id="3078e-113">Apps registered in Azure Active Directory are multi-tenant, which implies that other Customer Engagement users from other tenant can connect to their instance using the ISV's app.</span></span> 

<span data-ttu-id="3078e-114">App registration can also be done by an application developer or individual user who is building a client application to connect to and read/write data in Customer Engagement.</span><span class="sxs-lookup"><span data-stu-id="3078e-114">App registration can also be done by an application developer or individual user who is building a client application to connect to and read/write data in Customer Engagement.</span></span> <span data-ttu-id="3078e-115">Use the **Application ID** and **Redirect URI** values from your registered app in your client application's authentication code to be able to connect to Customer Engagement instance from your client application, and perform the required operations.</span><span class="sxs-lookup"><span data-stu-id="3078e-115">Use the **Application ID** and **Redirect URI** values from your registered app in your client application's authentication code to be able to connect to Customer Engagement instance from your client application, and perform the required operations.</span></span> <span data-ttu-id="3078e-116">Note that if the app is registered in the same tenant as your Customer Engagement instance, you won't be presented with a consent form when connecting from your client application to your Customer Engagement instance.</span><span class="sxs-lookup"><span data-stu-id="3078e-116">Note that if the app is registered in the same tenant as your Customer Engagement instance, you won't be presented with a consent form when connecting from your client application to your Customer Engagement instance.</span></span>



## <a name="prerequisites"></a><span data-ttu-id="3078e-117">Điều kiện tiên quyết</span><span class="sxs-lookup"><span data-stu-id="3078e-117">Prerequisites</span></span>  
<!--- **For an on-premises or Internet-facing deployment (IFD)**:  
  
    -   The server must be configured to use claims authentication and have OAuth authentication enabled.  
  
    -   A Microsoft [!INCLUDE[pn_Windows_Azure](../includes/pn-windows-azure.md)] subscription for application registration. A trial account will also work.  
  
- **For a [!INCLUDE[pn_CRM_Online](../includes/pn-crm-online.md)] deployment**:-->  
  
- <span data-ttu-id="3078e-118">The user who is registering the application must have a [!INCLUDE[pn_CRM_Online](../includes/pn-crm-online.md)] user account with System Administrator security role and the global administrator role for the [!INCLUDE[pn_MS_Office_365](../includes/pn-ms-office-365.md)] subscription.</span><span class="sxs-lookup"><span data-stu-id="3078e-118">The user who is registering the application must have a [!INCLUDE[pn_CRM_Online](../includes/pn-crm-online.md)] user account with System Administrator security role and the global administrator role for the [!INCLUDE[pn_MS_Office_365](../includes/pn-ms-office-365.md)] subscription.</span></span>  
  
- <span data-ttu-id="3078e-119">An [!INCLUDE[pn_Windows_Azure](../includes/pn-windows-azure.md)] subscription for application registration.</span><span class="sxs-lookup"><span data-stu-id="3078e-119">An [!INCLUDE[pn_Windows_Azure](../includes/pn-windows-azure.md)] subscription for application registration.</span></span> <span data-ttu-id="3078e-120">A trial account will also work.</span><span class="sxs-lookup"><span data-stu-id="3078e-120">A trial account will also work.</span></span>  
  
  <!--For either deployment type, you must know the redirect URL for your application. Instructions for finding that URL are provided in the section named [Obtain the redirect URI](walkthrough-register-app-active-directory.md#bkmk_redirect).-->  
    
<a name="bkmk_online"></a>   
## <a name="how-to-register-an-application-with-microsoft-azure-active-directory"></a><span data-ttu-id="3078e-121">How to: Register an application with Microsoft Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="3078e-121">How to: Register an application with Microsoft Azure Active Directory</span></span>  
  
1. <span data-ttu-id="3078e-122">[Sign in](http://manage.windowsazure.com) to the [!INCLUDE[pn_Windows_Azure](../includes/pn-windows-azure.md)] management portal by using an account with administrator permission.</span><span class="sxs-lookup"><span data-stu-id="3078e-122">[Sign in](http://manage.windowsazure.com) to the [!INCLUDE[pn_Windows_Azure](../includes/pn-windows-azure.md)] management portal by using an account with administrator permission.</span></span> <span data-ttu-id="3078e-123">You must use an account in the same [!INCLUDE[pn_Office_365](../includes/pn-office-365.md)] subscription (tenant) as you intend to register the app with.</span><span class="sxs-lookup"><span data-stu-id="3078e-123">You must use an account in the same [!INCLUDE[pn_Office_365](../includes/pn-office-365.md)] subscription (tenant) as you intend to register the app with.</span></span><br><br> <span data-ttu-id="3078e-124">You can also access the [!INCLUDE[pn_Windows_Azure](../includes/pn-windows-azure.md)] management portal through the [!INCLUDE[pn_Office_365](../includes/pn-office-365.md)] [Admin center](https://portal.office.com/adminportal) by expanding the **Admin centers** item in the left navigation pane, and selecting **Azure AD**.</span><span class="sxs-lookup"><span data-stu-id="3078e-124">You can also access the [!INCLUDE[pn_Windows_Azure](../includes/pn-windows-azure.md)] management portal through the [!INCLUDE[pn_Office_365](../includes/pn-office-365.md)] [Admin center](https://portal.office.com/adminportal) by expanding the **Admin centers** item in the left navigation pane, and selecting **Azure AD**.</span></span>  
  
   > [!NOTE]
   > <span data-ttu-id="3078e-125">If you don’t have an [!INCLUDE[pn_azure_shortest](../includes/pn-azure-shortest.md)] tenant (account) or you do have one but your [!INCLUDE[pn_Office_365](../includes/pn-office-365.md)] subscription with [!INCLUDE[pn_CRM_Online](../includes/pn-crm-online.md)] is not available in your [!INCLUDE[pn_azure_shortest](../includes/pn-azure-shortest.md)] subscription, following the instructions in the topic [Set up Azure Active Directory access for your Developer Site](https://msdn.microsoft.com/office/office365/HowTo/setup-development-environment) to associate the two accounts.</span><span class="sxs-lookup"><span data-stu-id="3078e-125">If you don’t have an [!INCLUDE[pn_azure_shortest](../includes/pn-azure-shortest.md)] tenant (account) or you do have one but your [!INCLUDE[pn_Office_365](../includes/pn-office-365.md)] subscription with [!INCLUDE[pn_CRM_Online](../includes/pn-crm-online.md)] is not available in your [!INCLUDE[pn_azure_shortest](../includes/pn-azure-shortest.md)] subscription, following the instructions in the topic [Set up Azure Active Directory access for your Developer Site](https://msdn.microsoft.com/office/office365/HowTo/setup-development-environment) to associate the two accounts.</span></span><br><br> <span data-ttu-id="3078e-126">If you don’t have an account, you can sign up for one by using a credit card.</span><span class="sxs-lookup"><span data-stu-id="3078e-126">If you don’t have an account, you can sign up for one by using a credit card.</span></span> <span data-ttu-id="3078e-127">However, the account is free for application registration and your credit card won’t be charged if you only follow the procedures called out in this topic to register one or more apps.</span><span class="sxs-lookup"><span data-stu-id="3078e-127">However, the account is free for application registration and your credit card won’t be charged if you only follow the procedures called out in this topic to register one or more apps.</span></span> [!INCLUDE[proc_more_information](../includes/proc-more-information.md)] <span data-ttu-id="3078e-128">[Active Directory Pricing Details](http://azure.microsoft.com/pricing/details/active-directory/)</span><span class="sxs-lookup"><span data-stu-id="3078e-128">[Active Directory Pricing Details](http://azure.microsoft.com/pricing/details/active-directory/)</span></span>  
  
2. <span data-ttu-id="3078e-129">In the Azure management portal, follow the steps as described in the [Adding an application](https://docs.microsoft.com/en-us/azure/active-directory/develop/active-directory-integrating-applications#adding-an-application) section in the Azure Active Directory developers guide to create an app.</span><span class="sxs-lookup"><span data-stu-id="3078e-129">In the Azure management portal, follow the steps as described in the [Adding an application](https://docs.microsoft.com/en-us/azure/active-directory/develop/active-directory-integrating-applications#adding-an-application) section in the Azure Active Directory developers guide to create an app.</span></span> 
  
3. <span data-ttu-id="3078e-130">On creating an app in Azure Active Directory, a unique **Application ID** (previously called **Client ID**) is generated for your application, and the newly registered app appears on the registered apps page.</span><span class="sxs-lookup"><span data-stu-id="3078e-130">On creating an app in Azure Active Directory, a unique **Application ID** (previously called **Client ID**) is generated for your application, and the newly registered app appears on the registered apps page.</span></span> <span data-ttu-id="3078e-131">Click the app to open the app information page.</span><span class="sxs-lookup"><span data-stu-id="3078e-131">Click the app to open the app information page.</span></span>

4. <span data-ttu-id="3078e-132">On the app information page, hover over **Application ID** (previously called **Client ID**) value, and select the **Click to copy** icon to copy the value as you’ll need to specify this in your application’s authentication code or app.config file where appropriate.</span><span class="sxs-lookup"><span data-stu-id="3078e-132">On the app information page, hover over **Application ID** (previously called **Client ID**) value, and select the **Click to copy** icon to copy the value as you’ll need to specify this in your application’s authentication code or app.config file where appropriate.</span></span>

    <span data-ttu-id="3078e-133">![Copy application ID](media/Azure-copy-app-id.png "Copy application ID")</span><span class="sxs-lookup"><span data-stu-id="3078e-133">![Copy application ID](media/Azure-copy-app-id.png "Copy application ID")</span></span>
  
5. <span data-ttu-id="3078e-134">Select **Settings** in the app info page, and use the **Redirect URIs** option on the **Settings** page to copy the redirect URI value for your app.</span><span class="sxs-lookup"><span data-stu-id="3078e-134">Select **Settings** in the app info page, and use the **Redirect URIs** option on the **Settings** page to copy the redirect URI value for your app.</span></span> <span data-ttu-id="3078e-135">You can also change and add additional URIs if required.</span><span class="sxs-lookup"><span data-stu-id="3078e-135">You can also change and add additional URIs if required.</span></span> <span data-ttu-id="3078e-136">For an app of **Web app / API** application type, you will see **Reply URLs** option instead of the **Redirect URIs** option.</span><span class="sxs-lookup"><span data-stu-id="3078e-136">For an app of **Web app / API** application type, you will see **Reply URLs** option instead of the **Redirect URIs** option.</span></span>

6. <span data-ttu-id="3078e-137">On the **Settings** page, select **Required permissions** > **Add** to add permissions for the registered app.</span><span class="sxs-lookup"><span data-stu-id="3078e-137">On the **Settings** page, select **Required permissions** > **Add** to add permissions for the registered app.</span></span>

    <span data-ttu-id="3078e-138">![Add app permission](media/Azure-add-app-permission.png "Add app permission")</span><span class="sxs-lookup"><span data-stu-id="3078e-138">![Add app permission](media/Azure-add-app-permission.png "Add app permission")</span></span>
  
7. <span data-ttu-id="3078e-139">On the **Add API access** page:</span><span class="sxs-lookup"><span data-stu-id="3078e-139">On the **Add API access** page:</span></span>
    - <span data-ttu-id="3078e-140">Select **Select an API** > **Dynamics CRM Online**, and then click **Select**.</span><span class="sxs-lookup"><span data-stu-id="3078e-140">Select **Select an API** > **Dynamics CRM Online**, and then click **Select**.</span></span>

      <span data-ttu-id="3078e-141">![Add app permission](media/Azure-add-api-access.png "Add app permission")</span><span class="sxs-lookup"><span data-stu-id="3078e-141">![Add app permission](media/Azure-add-api-access.png "Add app permission")</span></span>  
   
    - <span data-ttu-id="3078e-142">Select **Select permissions** > **Access CRM Online as organization users**, and then click **Select**.</span><span class="sxs-lookup"><span data-stu-id="3078e-142">Select **Select permissions** > **Access CRM Online as organization users**, and then click **Select**.</span></span>
  
      <span data-ttu-id="3078e-143">![Add delegated permission](media/azure-add-permission.PNG "Add delegated permission")</span><span class="sxs-lookup"><span data-stu-id="3078e-143">![Add delegated permission](media/azure-add-permission.PNG "Add delegated permission")</span></span>  

    - <span data-ttu-id="3078e-144">Select **Done** to add the delegated permission to the registered app.</span><span class="sxs-lookup"><span data-stu-id="3078e-144">Select **Done** to add the delegated permission to the registered app.</span></span>

<span data-ttu-id="3078e-145">This completes the registration of your application in Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="3078e-145">This completes the registration of your application in Azure Active Directory.</span></span>
       
  
<!--### Register an application with AD FS  
  
-   If you’re federating users between an [!INCLUDE[pn_ifd_short](../includes/pn-ifd-short.md)] server and [!INCLUDE[pn_CRM_Online](../includes/pn-crm-online.md)], and you want to use the app with either server, you must register the application with both [!INCLUDE[pn_CRM_Online](../includes/pn-crm-online.md)] and [!INCLUDE[pn_Active_Dir_Fed_Svcs_AD_FS](../includes/pn-active-dir-fed-svcs-ad-fs.md)] on the [!INCLUDE[pn_ifd_short](../includes/pn-ifd-short.md)] server. Follow the steps provided in this topic. Your [!INCLUDE[pn_ifd_short](../includes/pn-ifd-short.md)] server must be running [!INCLUDE[pn_windows_server_2012_r2](../includes/pn-windows-server-2012-r2.md)].-->  
  
### <a name="see-also"></a><span data-ttu-id="3078e-146">Xem thêm</span><span class="sxs-lookup"><span data-stu-id="3078e-146">See also</span></span>  
 <span data-ttu-id="3078e-147">[Application registration in Azure Active Directory](https://docs.microsoft.com/azure/active-directory/develop/active-directory-integrating-applications)  </span><span class="sxs-lookup"><span data-stu-id="3078e-147">[Application registration in Azure Active Directory](https://docs.microsoft.com/azure/active-directory/develop/active-directory-integrating-applications)  </span></span>  
 [<span data-ttu-id="3078e-148">Authenticate Users with Dynamics 365 for Customer Engagement Web Services</span><span class="sxs-lookup"><span data-stu-id="3078e-148">Authenticate Users with Dynamics 365 for Customer Engagement Web Services</span></span>](authenticate-users.md)
