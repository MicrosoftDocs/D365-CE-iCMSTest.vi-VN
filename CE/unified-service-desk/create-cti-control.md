---
title: Create a CTI Control | MicrosoftDocs
description: The topic explains on how to create a CTI control.
ms.custom:
- dyn365-USD
ms.date: 08/23/2017
ms.reviewer: ''
ms.service: dynamics-365-customerservice
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
applies_to:
- Dynamics 365 for Customer Engagement apps
- Dynamics 365 for Customer Engagement (on-premises) apps
- Dynamics CRM 2013
- Dynamics CRM 2015
- Dynamics CRM 2016
ms.assetid: c9e49c30-dc33-454e-b067-c90ecca6d659
author: kabala123
ms.author: kabala
manager: shujoshi
search.audienceType:
- customizer
- developer
search.app:
- D365CE
- D365USD
ms.openlocfilehash: d0884c890eb29e0f38eb52b746937d628bde572c
ms.sourcegitcommit: 9f0efd59de16a6d9902fa372cb25fc0baf1c2838
ms.translationtype: HT
ms.contentlocale: vi-VN
ms.lasthandoff: 01/08/2019
ms.locfileid: "386496"
---
# <a name="create-a-cti-control"></a><span data-ttu-id="053cd-103">Create a CTI Control</span><span class="sxs-lookup"><span data-stu-id="053cd-103">Create a CTI Control</span></span>
<span data-ttu-id="053cd-104">To manage agent states and call states, [!INCLUDE[pn_computer_telephony_integration_cti](../includes/pn-computer-telephony-integration-cti.md)] scenarios require the following user interface (UI) controls:</span><span class="sxs-lookup"><span data-stu-id="053cd-104">To manage agent states and call states, [!INCLUDE[pn_computer_telephony_integration_cti](../includes/pn-computer-telephony-integration-cti.md)] scenarios require the following user interface (UI) controls:</span></span>  

- <span data-ttu-id="053cd-105">**Agent state management control**: Displays the current state of the agent within a [!INCLUDE[pn_user_inteface_integration_uii](../includes/pn-user-interface-integration-uii.md)] desktop (such as [!INCLUDE[pn_unified_service_desk](../includes/pn-unified-service-desk.md)].</span><span class="sxs-lookup"><span data-stu-id="053cd-105">**Agent state management control**: Displays the current state of the agent within a [!INCLUDE[pn_user_inteface_integration_uii](../includes/pn-user-interface-integration-uii.md)] desktop (such as [!INCLUDE[pn_unified_service_desk](../includes/pn-unified-service-desk.md)].</span></span> <span data-ttu-id="053cd-106">This control doesn’t need to be tied to the [!INCLUDE[pn_cti_acronym](../includes/pn-cti-acronym.md)] system, but it allows you to map [!INCLUDE[pn_cti_acronym](../includes/pn-cti-acronym.md)] agent states with the current agent state, which is the visual state of the agent desktop.</span><span class="sxs-lookup"><span data-stu-id="053cd-106">This control doesn’t need to be tied to the [!INCLUDE[pn_cti_acronym](../includes/pn-cti-acronym.md)] system, but it allows you to map [!INCLUDE[pn_cti_acronym](../includes/pn-cti-acronym.md)] agent states with the current agent state, which is the visual state of the agent desktop.</span></span>  

- <span data-ttu-id="053cd-107">**Call control**: Provides buttons that the agent can use to make a call, answer a call, put a call on hold, transfer a call to another agent, or hang up.</span><span class="sxs-lookup"><span data-stu-id="053cd-107">**Call control**: Provides buttons that the agent can use to make a call, answer a call, put a call on hold, transfer a call to another agent, or hang up.</span></span>  

  <span data-ttu-id="053cd-108">Both of these controls are normal [!INCLUDE[pn_uii_acronym](../includes/pn-uii-acronym.md)] hosted controls that inherit from either the [HostedControl](https://docs.microsoft.com/dotnet/api/microsoft.uii.csr.hostedcontrol) or [HostedWpfControl](https://docs.microsoft.com/dotnet/api/microsoft.uii.csr.aif.hostedapplication.hostedwpfcontrol) class.</span><span class="sxs-lookup"><span data-stu-id="053cd-108">Both of these controls are normal [!INCLUDE[pn_uii_acronym](../includes/pn-uii-acronym.md)] hosted controls that inherit from either the [HostedControl](https://docs.microsoft.com/dotnet/api/microsoft.uii.csr.hostedcontrol) or [HostedWpfControl](https://docs.microsoft.com/dotnet/api/microsoft.uii.csr.aif.hostedapplication.hostedwpfcontrol) class.</span></span> <span data-ttu-id="053cd-109">You can also choose to merge both the controls into a single [!INCLUDE[pn_uii_acronym](../includes/pn-uii-acronym.md)] hosted control.</span><span class="sxs-lookup"><span data-stu-id="053cd-109">You can also choose to merge both the controls into a single [!INCLUDE[pn_uii_acronym](../includes/pn-uii-acronym.md)] hosted control.</span></span> [!INCLUDE[proc_more_information](../includes/proc-more-information.md)] <span data-ttu-id="053cd-110">[Use UII hosted controls with Unified Service Desk](../unified-service-desk/use-uii-hosted-controls-unified-service-desk.md)</span><span class="sxs-lookup"><span data-stu-id="053cd-110">[Use UII hosted controls with Unified Service Desk](../unified-service-desk/use-uii-hosted-controls-unified-service-desk.md)</span></span>  

## <a name="interfaces-for-implementing-a-cti-control"></a><span data-ttu-id="053cd-111">Interfaces for implementing a CTI Control</span><span class="sxs-lookup"><span data-stu-id="053cd-111">Interfaces for implementing a CTI Control</span></span>  
 <span data-ttu-id="053cd-112">Use the following interfaces to implement the user interface of a CTI Control.</span><span class="sxs-lookup"><span data-stu-id="053cd-112">Use the following interfaces to implement the user interface of a CTI Control.</span></span>  

### <a name="ictiagentstatecontrol"></a><span data-ttu-id="053cd-113">ICtiAgentStateControl</span><span class="sxs-lookup"><span data-stu-id="053cd-113">ICtiAgentStateControl</span></span>  
 <span data-ttu-id="053cd-114">The [ICtiAgentStateControl](https://docs.microsoft.com/dotnet/api/microsoft.uii.desktop.cti.core.ictiagentstatecontrol) interface is a specialized interface for describing a hosted control that is used for processing and/or displaying agent state information.</span><span class="sxs-lookup"><span data-stu-id="053cd-114">The [ICtiAgentStateControl](https://docs.microsoft.com/dotnet/api/microsoft.uii.desktop.cti.core.ictiagentstatecontrol) interface is a specialized interface for describing a hosted control that is used for processing and/or displaying agent state information.</span></span> <span data-ttu-id="053cd-115">This interface contains the [Boolean)](https://docs.microsoft.com/dotnet/api/microsoft.uii.desktop.cti.core.ictiagentstatecontrol.setagentstate\(system.guid,system.string,system.string,system.boolean\)) method that’s used to set the state of an agent.</span><span class="sxs-lookup"><span data-stu-id="053cd-115">This interface contains the [Boolean)](https://docs.microsoft.com/dotnet/api/microsoft.uii.desktop.cti.core.ictiagentstatecontrol.setagentstate\(system.guid,system.string,system.string,system.boolean\)) method that’s used to set the state of an agent.</span></span>  

### <a name="idesktopuseractionsconsumer"></a><span data-ttu-id="053cd-116">IDesktopUserActionsConsumer</span><span class="sxs-lookup"><span data-stu-id="053cd-116">IDesktopUserActionsConsumer</span></span>  
 <span data-ttu-id="053cd-117">The [IDesktopUserActionsConsumer](https://docs.microsoft.com/dotnet/api/microsoft.uii.desktop.core.idesktopuseractionsconsumer) interface is not specific to [!INCLUDE[pn_cti_acronym](../includes/pn-cti-acronym.md)], but it is typically used by the CTI Controls to provide access to desktop operations.</span><span class="sxs-lookup"><span data-stu-id="053cd-117">The [IDesktopUserActionsConsumer](https://docs.microsoft.com/dotnet/api/microsoft.uii.desktop.core.idesktopuseractionsconsumer) interface is not specific to [!INCLUDE[pn_cti_acronym](../includes/pn-cti-acronym.md)], but it is typically used by the CTI Controls to provide access to desktop operations.</span></span> <span data-ttu-id="053cd-118">It has two members:</span><span class="sxs-lookup"><span data-stu-id="053cd-118">It has two members:</span></span>  

- <span data-ttu-id="053cd-119">[DesktopLoadingComplete](https://docs.microsoft.com/dotnet/api/microsoft.uii.desktop.core.idesktopuseractionsconsumer.desktoploadingcomplete): Raised when the desktop has completed loading.</span><span class="sxs-lookup"><span data-stu-id="053cd-119">[DesktopLoadingComplete](https://docs.microsoft.com/dotnet/api/microsoft.uii.desktop.core.idesktopuseractionsconsumer.desktoploadingcomplete): Raised when the desktop has completed loading.</span></span> <span data-ttu-id="053cd-120">This is raised in a separate thread from the main desktop UI thread.</span><span class="sxs-lookup"><span data-stu-id="053cd-120">This is raised in a separate thread from the main desktop UI thread.</span></span>  

- <span data-ttu-id="053cd-121">[IDesktopUserActions)](https://docs.microsoft.com/dotnet/api/microsoft.uii.desktop.core.idesktopuseractionsconsumer.setdesktopuseractionsaccess\(microsoft.uii.desktop.core.idesktopuseractions\)): Used by the desktop loader to set a pointer to itself in the hosted control that implemented the [ICtiEnabledControlConsumer](https://docs.microsoft.com/dotnet/api/microsoft.uii.desktop.cti.core.ictienabledcontrolconsumer) interface.</span><span class="sxs-lookup"><span data-stu-id="053cd-121">[IDesktopUserActions)](https://docs.microsoft.com/dotnet/api/microsoft.uii.desktop.core.idesktopuseractionsconsumer.setdesktopuseractionsaccess\(microsoft.uii.desktop.core.idesktopuseractions\)): Used by the desktop loader to set a pointer to itself in the hosted control that implemented the [ICtiEnabledControlConsumer](https://docs.microsoft.com/dotnet/api/microsoft.uii.desktop.cti.core.ictienabledcontrolconsumer) interface.</span></span> <span data-ttu-id="053cd-122">It is the pointer to the desktop interface (shell).</span><span class="sxs-lookup"><span data-stu-id="053cd-122">It is the pointer to the desktop interface (shell).</span></span>  

  <span data-ttu-id="053cd-123">By implementing this interface, you get access to all user actions, as shown in the following example.</span><span class="sxs-lookup"><span data-stu-id="053cd-123">By implementing this interface, you get access to all user actions, as shown in the following example.</span></span>  

```  
bool AppExistsInUI(string applicationName);  
bool CloseDynamicApplication(string applicationName);  
bool CloseSession();  
bool CloseSession(Session sessionToClose);  
bool CreateDynamicApplication(string applicationName);  
WorkflowData GetCurrentWorkflowState();  
bool SetFocusOnApplication(string applicationName);  
string UserDefinedCommand(string command, string request);  

```  

### <a name="ictienabledcontrolconsumer"></a><span data-ttu-id="053cd-124">ICtiEnabledControlConsumer</span><span class="sxs-lookup"><span data-stu-id="053cd-124">ICtiEnabledControlConsumer</span></span>  
 <span data-ttu-id="053cd-125">The [ICtiEnabledControlConsumer](https://docs.microsoft.com/dotnet/api/microsoft.uii.desktop.cti.core.ictienabledcontrolconsumer) interface describes a hosted control that will accept pointers to the [CtiCallStateManager](https://docs.microsoft.com/dotnet/api/microsoft.uii.desktop.cti.core.cticallstatemanager) and the [CtiAgentStateManager](https://docs.microsoft.com/dotnet/api/microsoft.uii.desktop.cti.core.ctiagentstatemanager).</span><span class="sxs-lookup"><span data-stu-id="053cd-125">The [ICtiEnabledControlConsumer](https://docs.microsoft.com/dotnet/api/microsoft.uii.desktop.cti.core.ictienabledcontrolconsumer) interface describes a hosted control that will accept pointers to the [CtiCallStateManager](https://docs.microsoft.com/dotnet/api/microsoft.uii.desktop.cti.core.cticallstatemanager) and the [CtiAgentStateManager](https://docs.microsoft.com/dotnet/api/microsoft.uii.desktop.cti.core.ctiagentstatemanager).</span></span>  

 <span data-ttu-id="053cd-126">This interface has method definitions to perform following functions:</span><span class="sxs-lookup"><span data-stu-id="053cd-126">This interface has method definitions to perform following functions:</span></span>  

- <span data-ttu-id="053cd-127">[Object)](https://docs.microsoft.com/dotnet/api/microsoft.uii.desktop.cti.core.ictienabledcontrolconsumer.setmanagers\(system.object,system.object\)): Called by UII when a control that implements this interface is initialized.</span><span class="sxs-lookup"><span data-stu-id="053cd-127">[Object)](https://docs.microsoft.com/dotnet/api/microsoft.uii.desktop.cti.core.ictienabledcontrolconsumer.setmanagers\(system.object,system.object\)): Called by UII when a control that implements this interface is initialized.</span></span>  

- <span data-ttu-id="053cd-128">[SessionControllerEventArgs)](https://docs.microsoft.com/dotnet/api/microsoft.uii.desktop.cti.core.ictienabledcontrolconsumer.sessioncloseevent\(microsoft.uii.csr.sessioncontrollereventargs\)): Called by UII when a session is closing.</span><span class="sxs-lookup"><span data-stu-id="053cd-128">[SessionControllerEventArgs)](https://docs.microsoft.com/dotnet/api/microsoft.uii.desktop.cti.core.ictienabledcontrolconsumer.sessioncloseevent\(microsoft.uii.csr.sessioncontrollereventargs\)): Called by UII when a session is closing.</span></span>  

  <span data-ttu-id="053cd-129">The [ICtiEnabledControlConsumer](https://docs.microsoft.com/dotnet/api/microsoft.uii.desktop.cti.core.ictienabledcontrolconsumer) interface uses the [IsManagersSet](https://docs.microsoft.com/dotnet/api/microsoft.uii.desktop.cti.core.ictienabledcontrolconsumer.ismanagersset) property to set or get whether the [Object)](https://docs.microsoft.com/dotnet/api/microsoft.uii.desktop.cti.core.ictienabledcontrolconsumer.setmanagers\(system.object,system.object\)) method has been called successfully.</span><span class="sxs-lookup"><span data-stu-id="053cd-129">The [ICtiEnabledControlConsumer](https://docs.microsoft.com/dotnet/api/microsoft.uii.desktop.cti.core.ictienabledcontrolconsumer) interface uses the [IsManagersSet](https://docs.microsoft.com/dotnet/api/microsoft.uii.desktop.cti.core.ictienabledcontrolconsumer.ismanagersset) property to set or get whether the [Object)](https://docs.microsoft.com/dotnet/api/microsoft.uii.desktop.cti.core.ictienabledcontrolconsumer.setmanagers\(system.object,system.object\)) method has been called successfully.</span></span>  

<a name="Configure"></a>   
## <a name="configure-the-cti-control-hosted-control-in-unified-service-desk"></a><span data-ttu-id="053cd-130">Configure the CTI Control hosted control in Unified Service Desk</span><span class="sxs-lookup"><span data-stu-id="053cd-130">Configure the CTI Control hosted control in Unified Service Desk</span></span>  

1. <span data-ttu-id="053cd-131">Sign in to [!INCLUDE[pn_microsoftcrm](../includes/pn-microsoftcrm.md)] apps.</span><span class="sxs-lookup"><span data-stu-id="053cd-131">Sign in to [!INCLUDE[pn_microsoftcrm](../includes/pn-microsoftcrm.md)] apps.</span></span>  

2. <span data-ttu-id="053cd-132">On the nav bar, choose **Microsoft Dynamics 365 for Customer Engagement apps** > **Settings** > **Unified Service Desk**.</span><span class="sxs-lookup"><span data-stu-id="053cd-132">On the nav bar, choose **Microsoft Dynamics 365 for Customer Engagement apps** > **Settings** > **Unified Service Desk**.</span></span>  

3. <span data-ttu-id="053cd-133">Trên trang **Unified Service Desk**, bấm vào **Kiểm soát Tổ chức**.</span><span class="sxs-lookup"><span data-stu-id="053cd-133">On the **Unified Service Desk** page, click **Hosted Controls**.</span></span>  

4. <span data-ttu-id="053cd-134">Trên trang **Kiểm soát Tổ chức**, bấm vào **Mới**.</span><span class="sxs-lookup"><span data-stu-id="053cd-134">On the **Hosted Controls** page, click **New**.</span></span>  

5. <span data-ttu-id="053cd-135">On the **New Hosted Control** page, specify the following values:</span><span class="sxs-lookup"><span data-stu-id="053cd-135">On the **New Hosted Control** page, specify the following values:</span></span>  


   |         <span data-ttu-id="053cd-136">Trường</span><span class="sxs-lookup"><span data-stu-id="053cd-136">Field</span></span>         |                                                                                                                                                                                                 <span data-ttu-id="053cd-137">Value</span><span class="sxs-lookup"><span data-stu-id="053cd-137">Value</span></span>                                                                                                                                                                                                 |
   |-----------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   |         <span data-ttu-id="053cd-138">Tên</span><span class="sxs-lookup"><span data-stu-id="053cd-138">Name</span></span>          |                                                                                                                                                                                            <span data-ttu-id="053cd-139">Specify a name.</span><span class="sxs-lookup"><span data-stu-id="053cd-139">Specify a name.</span></span>                                                                                                                                                                                            |
   |  <span data-ttu-id="053cd-140">USD Component Type</span><span class="sxs-lookup"><span data-stu-id="053cd-140">USD Component Type</span></span>   |                                                                                                                                                                                        <span data-ttu-id="053cd-141">CCA Hosted Application</span><span class="sxs-lookup"><span data-stu-id="053cd-141">CCA Hosted Application</span></span>                                                                                                                                                                                         |
   |  <span data-ttu-id="053cd-142">Ứng dụng được lưu trữ</span><span class="sxs-lookup"><span data-stu-id="053cd-142">Hosted Application</span></span>   |                                                                                                                                                                                            <span data-ttu-id="053cd-143">Kiểm soát được lưu trữ</span><span class="sxs-lookup"><span data-stu-id="053cd-143">Hosted Control</span></span>                                                                                                                                                                                             |
   | <span data-ttu-id="053cd-144">Application is Global</span><span class="sxs-lookup"><span data-stu-id="053cd-144">Application is Global</span></span> |                                                                                                                                                                                                <span data-ttu-id="053cd-145">Đã kiểm tra</span><span class="sxs-lookup"><span data-stu-id="053cd-145">Checked</span></span>                                                                                                                                                                                                |
   |     <span data-ttu-id="053cd-146">Nhóm hiển thị</span><span class="sxs-lookup"><span data-stu-id="053cd-146">Display Group</span></span>     |                                                                                                                                                                                               <span data-ttu-id="053cd-147">CtiPanel</span><span class="sxs-lookup"><span data-stu-id="053cd-147">CtiPanel</span></span>                                                                                                                                                                                                |
   |        <span data-ttu-id="053cd-148">Bộ điều hợp</span><span class="sxs-lookup"><span data-stu-id="053cd-148">Adapter</span></span>        |                                                                                                                                                                                            <span data-ttu-id="053cd-149">Use No Adapter</span><span class="sxs-lookup"><span data-stu-id="053cd-149">Use No Adapter</span></span>                                                                                                                                                                                             |
   |     <span data-ttu-id="053cd-150">URI cụm tổ hợp</span><span class="sxs-lookup"><span data-stu-id="053cd-150">Assembly URI</span></span>      |                                                                                                                                                          <span data-ttu-id="053cd-151">This is the name of your assembly (.dll) file that you built in the previous step.</span><span class="sxs-lookup"><span data-stu-id="053cd-151">This is the name of your assembly (.dll) file that you built in the previous step.</span></span>                                                                                                                                                           |
   |     <span data-ttu-id="053cd-152">Loại cụm tổ hợp</span><span class="sxs-lookup"><span data-stu-id="053cd-152">Assembly Type</span></span>     | <span data-ttu-id="053cd-153">This is the name of your assembly followed by a dot, and then the class name of your [!INCLUDE[pn_cti_acronym](../includes/pn-cti-acronym.md)] Control.</span><span class="sxs-lookup"><span data-stu-id="053cd-153">This is the name of your assembly followed by a dot, and then the class name of your [!INCLUDE[pn_cti_acronym](../includes/pn-cti-acronym.md)] Control.</span></span> <span data-ttu-id="053cd-154">For example, if your assembly (dll) name is `MyCtiControl`, and the name of the class of your [!INCLUDE[pn_cti_acronym](../includes/pn-cti-acronym.md)] project is `CtiControl`, type the following in this field: `MyCtiControl.CtiControl`.</span><span class="sxs-lookup"><span data-stu-id="053cd-154">For example, if your assembly (dll) name is `MyCtiControl`, and the name of the class of your [!INCLUDE[pn_cti_acronym](../includes/pn-cti-acronym.md)] project is `CtiControl`, type the following in this field: `MyCtiControl.CtiControl`.</span></span> |


6. <span data-ttu-id="053cd-155">Choose **Save** to create the hosted control.</span><span class="sxs-lookup"><span data-stu-id="053cd-155">Choose **Save** to create the hosted control.</span></span>  

### <a name="see-also"></a><span data-ttu-id="053cd-156">Xem thêm</span><span class="sxs-lookup"><span data-stu-id="053cd-156">See also</span></span>  
 <span data-ttu-id="053cd-157">[Considerations for creating a CTI adapter for Unified Service Desk](../unified-service-desk/consideration-creating-cti-adapter-unified-service-desk.md) </span><span class="sxs-lookup"><span data-stu-id="053cd-157">[Considerations for creating a CTI adapter for Unified Service Desk](../unified-service-desk/consideration-creating-cti-adapter-unified-service-desk.md) </span></span>  
 <span data-ttu-id="053cd-158">[Tạo trình kết nối CTI](../unified-service-desk/create-cti-connector.md) </span><span class="sxs-lookup"><span data-stu-id="053cd-158">[Create a CTI Connector](../unified-service-desk/create-cti-connector.md) </span></span>  
 <span data-ttu-id="053cd-159">[Create a CTI Desktop Manager](../unified-service-desk/create-cti-desktop-manager.md) </span><span class="sxs-lookup"><span data-stu-id="053cd-159">[Create a CTI Desktop Manager](../unified-service-desk/create-cti-desktop-manager.md) </span></span>  
 [<span data-ttu-id="053cd-160">UII Computer Telephony Integration (CTI) framework</span><span class="sxs-lookup"><span data-stu-id="053cd-160">UII Computer Telephony Integration (CTI) framework</span></span>](../unified-service-desk/uii-computer-telephony-integration-cti-framework.md)
